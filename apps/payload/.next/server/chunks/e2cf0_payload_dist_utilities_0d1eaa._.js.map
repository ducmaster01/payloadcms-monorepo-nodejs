{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/createArrayFromCommaDelineated.ts"],"sourcesContent":["export function createArrayFromCommaDelineated(input: string): string[] {\n  if (Array.isArray(input)) {\n    return input\n  }\n  if (input.indexOf(',') > -1) {\n    return input.split(',')\n  }\n  return [input]\n}\n"],"names":["createArrayFromCommaDelineated","input","Array","isArray","indexOf","split"],"mappings":";;;AAAO,SAASA,+BAA+BC,KAAa;IAC1D,IAAIC,MAAMC,OAAO,CAACF,QAAQ;QACxB,OAAOA;IACT;IACA,IAAIA,MAAMG,OAAO,CAAC,OAAO,CAAC,GAAG;QAC3B,OAAOH,MAAMI,KAAK,CAAC;IACrB;IACA,OAAO;QAACJ;KAAM;AAChB","ignoreList":[0]}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getSelectMode.ts"],"sourcesContent":["import type { SelectMode, SelectType } from '../types/index.js'\n\nexport const getSelectMode = (select: SelectType): SelectMode => {\n  for (const key in select) {\n    const selectValue = select[key]\n    if (selectValue === false) {\n      return 'exclude'\n    }\n\n    if (typeof selectValue === 'object') {\n      return getSelectMode(selectValue)\n    }\n  }\n\n  return 'include'\n}\n"],"names":["getSelectMode","select","key","selectValue"],"mappings":";;;AAEO,MAAMA,gBAAgB,CAACC;IAC5B,IAAK,MAAMC,OAAOD,OAAQ;QACxB,MAAME,cAAcF,MAAM,CAACC,IAAI;QAC/B,IAAIC,gBAAgB,OAAO;YACzB,OAAO;QACT;QAEA,IAAI,OAAOA,gBAAgB,UAAU;YACnC,OAAOH,cAAcG;QACvB;IACF;IAEA,OAAO;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeFallbackLocale.ts"],"sourcesContent":["import type { SanitizedLocalizationConfig } from '../config/types.js'\nimport type { TypedLocale } from '../index.js'\n\ninterface Args {\n  fallbackLocale: false | TypedLocale\n  locale: string\n  localization: SanitizedLocalizationConfig\n}\n\n/**\n * Sanitizes fallbackLocale based on a provided fallbackLocale, locale and localization config\n *\n * Handles the following scenarios:\n * - determines if a fallback locale should be used\n * - determines if a locale specific fallback should be used in place of the default locale\n * - sets the fallbackLocale to 'null' if no fallback locale should be used\n */\nexport const sanitizeFallbackLocale = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: Args): null | string => {\n  const hasFallbackLocale =\n    fallbackLocale === undefined || fallbackLocale === null\n      ? localization && localization.fallback\n      : fallbackLocale\n        ? !['false', 'none', 'null'].includes(fallbackLocale)\n        : false\n\n  if (hasFallbackLocale) {\n    if (!fallbackLocale) {\n      // Check for locale specific fallback\n      const localeSpecificFallback =\n        localization && localization?.locales?.length\n          ? localization.locales.find((localeConfig) => localeConfig.code === locale)\n              ?.fallbackLocale\n          : undefined\n\n      if (localeSpecificFallback) {\n        fallbackLocale = localeSpecificFallback\n      } else {\n        // Use defaultLocale as fallback otherwise\n        if (localization && 'fallback' in localization && localization.fallback) {\n          fallbackLocale = localization.defaultLocale\n        }\n      }\n    }\n  } else {\n    fallbackLocale = null\n  }\n\n  return fallbackLocale as null | string\n}\n"],"names":["sanitizeFallbackLocale","fallbackLocale","locale","localization","hasFallbackLocale","undefined","fallback","includes","localeSpecificFallback","locales","length","find","localeConfig","code","defaultLocale"],"mappings":"AASA;;;;;;;CAOC,GACD;;;AAAO,MAAMA,yBAAyB,CAAC,EACrCC,cAAc,EACdC,MAAM,EACNC,YAAY,EACP;IACL,MAAMC,oBACJH,mBAAmBI,aAAaJ,mBAAmB,OAC/CE,gBAAgBA,aAAaG,QAAQ,GACrCL,iBACE,CAAC;QAAC;QAAS;QAAQ;KAAO,CAACM,QAAQ,CAACN,kBACpC;IAER,IAAIG,mBAAmB;QACrB,IAAI,CAACH,gBAAgB;YACnB,qCAAqC;YACrC,MAAMO,yBACJL,gBAAgBA,cAAcM,SAASC,SACnCP,aAAaM,OAAO,CAACE,IAAI,CAAC,CAACC,eAAiBA,aAAaC,IAAI,KAAKX,SAC9DD,iBACJI;YAEN,IAAIG,wBAAwB;gBAC1BP,iBAAiBO;YACnB,OAAO;gBACL,0CAA0C;gBAC1C,IAAIL,gBAAgB,cAAcA,gBAAgBA,aAAaG,QAAQ,EAAE;oBACvEL,iBAAiBE,aAAaW,aAAa;gBAC7C;YACF;QACF;IACF,OAAO;QACLb,iBAAiB;IACnB;IAEA,OAAOA;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isValidID.ts"],"sourcesContent":["import ObjectIdImport from 'bson-objectid'\n\nconst ObjectId = (ObjectIdImport.default ||\n  ObjectIdImport) as unknown as typeof ObjectIdImport.default\n\nexport const isValidID = (\n  value: number | string,\n  type: 'number' | 'ObjectID' | 'text',\n): boolean => {\n  if (type === 'text' && value) {\n    if (['object', 'string'].includes(typeof value)) {\n      const isObjectID = ObjectId.isValid(value as string)\n      return typeof value === 'string' || isObjectID\n    }\n    return false\n  }\n\n  if (typeof value === 'number' && !Number.isNaN(value)) {\n    return true\n  }\n\n  if (type === 'ObjectID') {\n    return ObjectId.isValid(String(value))\n  }\n}\n"],"names":["ObjectIdImport","ObjectId","default","isValidID","value","type","includes","isObjectID","isValid","Number","isNaN","String"],"mappings":";;;AAAA,OAAOA,oBAAoB,gBAAe;;AAE1C,MAAMC,uNAAYD,UAAAA,CAAeE,OAAO,gNACtCF,UAAAA;AAEK,MAAMG,YAAY,CACvBC,OACAC;IAEA,IAAIA,SAAS,UAAUD,OAAO;QAC5B,IAAI;YAAC;YAAU;SAAS,CAACE,QAAQ,CAAC,OAAOF,QAAQ;YAC/C,MAAMG,aAAaN,SAASO,OAAO,CAACJ;YACpC,OAAO,OAAOA,UAAU,YAAYG;QACtC;QACA,OAAO;IACT;IAEA,IAAI,OAAOH,UAAU,YAAY,CAACK,OAAOC,KAAK,CAACN,QAAQ;QACrD,OAAO;IACT;IAEA,IAAIC,SAAS,YAAY;QACvB,OAAOJ,SAASO,OAAO,CAACG,OAAOP;IACjC;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/createLocalReq.ts"],"sourcesContent":["import type { User } from '../auth/types.js'\nimport type { Payload, RequestContext, TypedLocale } from '../index.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { getDataLoader } from '../collections/dataloader.js'\nimport { getLocalI18n } from '../translations/getLocalI18n.js'\nimport { sanitizeFallbackLocale } from '../utilities/sanitizeFallbackLocale.js'\n\nfunction getRequestContext(\n  req: Partial<PayloadRequest> = { context: null } as PayloadRequest,\n  context: RequestContext = {},\n): RequestContext {\n  if (req.context) {\n    if (Object.keys(req.context).length === 0 && req.context.constructor === Object) {\n      // if req.context is `{}` avoid unnecessary spread\n      return context\n    } else {\n      return { ...req.context, ...context }\n    }\n  } else {\n    return context\n  }\n}\n\nconst attachFakeURLProperties = (req: Partial<PayloadRequest>) => {\n  /**\n   * *NOTE*\n   * If no URL is provided, the local API was called directly outside\n   * the context of a request. Therefore we create a fake URL object.\n   * `ts-expect-error` is used below for properties that are 'read-only'\n   * since they do not exist yet we can safely ignore the error.\n   */\n  let urlObject\n\n  function getURLObject() {\n    if (urlObject) {\n      return urlObject\n    }\n    const urlToUse = req?.url || req.payload.config?.serverURL || 'http://localhost'\n    try {\n      urlObject = new URL(urlToUse)\n    } catch (error) {\n      urlObject = new URL('http://localhost')\n    }\n\n    return urlObject\n  }\n\n  if (!req.host) {\n    req.host = getURLObject().host\n  }\n  if (!req.protocol) {\n    req.protocol = getURLObject().protocol\n  }\n  if (!req.pathname) {\n    req.pathname = getURLObject().pathname\n  }\n  if (!req.searchParams) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.searchParams = getURLObject().searchParams\n  }\n  if (!req.origin) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.origin = getURLObject().origin\n  }\n  if (!req?.url) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.url = getURLObject().href\n  }\n}\n\ntype CreateLocalReq = (\n  options: {\n    context?: RequestContext\n    fallbackLocale?: false | TypedLocale\n    locale?: string\n    req?: Partial<PayloadRequest>\n    user?: User\n  },\n  payload: Payload,\n) => Promise<PayloadRequest>\n\nexport const createLocalReq: CreateLocalReq = async (\n  { context, fallbackLocale, locale: localeArg, req = {} as PayloadRequest, user },\n  payload,\n) => {\n  const localization = payload.config?.localization\n  if (localization) {\n    const locale = localeArg === '*' ? 'all' : localeArg\n    const defaultLocale = localization.defaultLocale\n    const localeCandidate = locale || req?.locale || req?.query?.locale\n\n    req.locale =\n      localeCandidate && typeof localeCandidate === 'string' ? localeCandidate : defaultLocale\n\n    const sanitizedFallback = sanitizeFallbackLocale({\n      fallbackLocale,\n      locale: req.locale,\n      localization,\n    })\n\n    req.fallbackLocale = sanitizedFallback\n  }\n\n  const i18n =\n    req?.i18n ||\n    (await getLocalI18n({ config: payload.config, language: payload.config.i18n.fallbackLanguage }))\n\n  if (!req.headers) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.headers = new Headers()\n  }\n\n  req.context = getRequestContext(req, context)\n  req.payloadAPI = req?.payloadAPI || 'local'\n  req.payload = payload\n  req.i18n = i18n\n  req.t = i18n.t\n  req.user = user || req?.user || null\n  req.payloadDataLoader = req?.payloadDataLoader || getDataLoader(req as PayloadRequest)\n  req.routeParams = req?.routeParams || {}\n  req.query = req?.query || {}\n\n  attachFakeURLProperties(req)\n\n  return req as PayloadRequest\n}\n"],"names":["getDataLoader","getLocalI18n","sanitizeFallbackLocale","getRequestContext","req","context","Object","keys","length","constructor","attachFakeURLProperties","urlObject","getURLObject","urlToUse","url","payload","config","serverURL","URL","error","host","protocol","pathname","searchParams","origin","href","createLocalReq","fallbackLocale","locale","localeArg","user","localization","defaultLocale","localeCandidate","query","sanitizedFallback","i18n","language","fallbackLanguage","headers","Headers","payloadAPI","t","payloadDataLoader","routeParams"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/initTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * Starts a new transaction using the db adapter with a random id and then assigns it to the req.transaction\n * @returns true if beginning a transaction and false when req already has a transaction to use\n */\nexport async function initTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<boolean> {\n  const { payload, transactionID } = req\n  if (transactionID instanceof Promise) {\n    // wait for whoever else is already creating the transaction\n    await transactionID\n    return false\n  }\n\n  if (transactionID) {\n    // we already have a transaction, we're not in charge of committing it\n    return false\n  }\n  if (typeof payload.db.beginTransaction === 'function') {\n    // create a new transaction\n    req.transactionID = payload.db.beginTransaction().then((transactionID) => {\n      if (transactionID) {\n        req.transactionID = transactionID\n      }\n\n      return transactionID\n    })\n    return !!(await req.transactionID)\n  }\n  return false\n}\n"],"names":["initTransaction","req","payload","transactionID","Promise","db","beginTransaction","then"],"mappings":"AAIA;;;CAGC,GACD;;;AAAO,eAAeA,gBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IACnC,IAAIE,yBAAyBC,SAAS;QACpC,4DAA4D;QAC5D,MAAMD;QACN,OAAO;IACT;IAEA,IAAIA,eAAe;QACjB,sEAAsE;QACtE,OAAO;IACT;IACA,IAAI,OAAOD,QAAQG,EAAE,CAACC,gBAAgB,KAAK,YAAY;QACrD,2BAA2B;QAC3BL,IAAIE,aAAa,GAAGD,QAAQG,EAAE,CAACC,gBAAgB,GAAGC,IAAI,CAAC,CAACJ;YACtD,IAAIA,eAAe;gBACjBF,IAAIE,aAAa,GAAGA;YACtB;YAEA,OAAOA;QACT;QACA,OAAO,CAAC,CAAE,MAAMF,IAAIE,aAAa;IACnC;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/commitTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * complete a transaction calling adapter db.commitTransaction and delete the transactionID from req\n */\nexport async function commitTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<void> {\n  const { payload, transactionID } = req\n\n  await payload.db.commitTransaction(transactionID)\n  delete req.transactionID\n}\n"],"names":["commitTransaction","req","payload","transactionID","db"],"mappings":"AAIA;;CAEC,GACD;;;AAAO,eAAeA,kBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IAEnC,MAAMC,QAAQE,EAAE,CAACJ,iBAAiB,CAACG;IACnC,OAAOF,IAAIE,aAAa;AAC1B","ignoreList":[0]}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/killTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * Rollback the transaction from the req using the db adapter and removes it from the req\n */\nexport async function killTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<void> {\n  const { payload, transactionID } = req\n  if (transactionID && !(transactionID instanceof Promise)) {\n    try {\n      await payload.db.rollbackTransaction(req.transactionID)\n    } catch (error) {\n      // swallow any errors while attempting to rollback\n    }\n    delete req.transactionID\n  }\n}\n"],"names":["killTransaction","req","payload","transactionID","Promise","db","rollbackTransaction","error"],"mappings":"AAIA;;CAEC,GACD;;;AAAO,eAAeA,gBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IACnC,IAAIE,iBAAiB,CAAEA,CAAAA,yBAAyBC,OAAM,GAAI;QACxD,IAAI;YACF,MAAMF,QAAQG,EAAE,CAACC,mBAAmB,CAACL,IAAIE,aAAa;QACxD,EAAE,OAAOI,OAAO;QACd,kDAAkD;QACpD;QACA,OAAON,IAAIE,aAAa;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/addDataAndFileToRequest.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from '../errors/APIError.js'\nimport { fetchAPIFileUpload } from '../uploads/fetchAPI-multipart/index.js'\n\ntype AddDataAndFileToRequest = (req: PayloadRequest) => Promise<void>\n\n/**\n * Mutates the Request, appending 'data' and 'file' if found\n */\nexport const addDataAndFileToRequest: AddDataAndFileToRequest = async (req) => {\n  const { body, headers, method, payload } = req\n\n  if (method && ['PATCH', 'POST', 'PUT'].includes(method.toUpperCase()) && body) {\n    const [contentType] = (headers.get('Content-Type') || '').split(';')\n    const bodyByteSize = parseInt(req.headers.get('Content-Length') || '0', 10)\n\n    if (contentType === 'application/json') {\n      let data = {}\n      try {\n        data = await req.json()\n      } catch (error) {\n        req.payload.logger.error(error)\n      } finally {\n        req.data = data\n        req.json = () => Promise.resolve(data)\n      }\n    } else if (bodyByteSize && contentType.includes('multipart/')) {\n      const { error, fields, files } = await fetchAPIFileUpload({\n        options: payload.config.upload,\n        request: req as Request,\n      })\n\n      if (error) {\n        throw new APIError(error.message)\n      }\n\n      if (files?.file) {\n        req.file = files.file\n      }\n\n      if (fields?._payload && typeof fields._payload === 'string') {\n        req.data = JSON.parse(fields._payload)\n      }\n    }\n  }\n}\n"],"names":["APIError","fetchAPIFileUpload","addDataAndFileToRequest","req","body","headers","method","payload","includes","toUpperCase","contentType","get","split","bodyByteSize","parseInt","data","json","error","logger","Promise","resolve","fields","files","options","config","upload","request","message","file","_payload","JSON","parse"],"mappings":";;;AAGA,SAASC,kBAAkB,QAAQ,yCAAwC;AAD3E,SAASD,QAAQ,QAAQ,wBAAuB;;;AAQzC,MAAME,0BAAmD,OAAOC;IACrE,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAEC,MAAM,EAAEC,OAAO,EAAE,GAAGJ;IAE3C,IAAIG,UAAU;QAAC;QAAS;QAAQ;KAAM,CAACE,QAAQ,CAACF,OAAOG,WAAW,OAAOL,MAAM;QAC7E,MAAM,CAACM,YAAY,GAAIL,CAAAA,QAAQM,GAAG,CAAC,mBAAmB,EAAC,EAAGC,KAAK,CAAC;QAChE,MAAMC,eAAeC,SAASX,IAAIE,OAAO,CAACM,GAAG,CAAC,qBAAqB,KAAK;QAExE,IAAID,gBAAgB,oBAAoB;YACtC,IAAIK,OAAO,CAAC;YACZ,IAAI;gBACFA,OAAO,MAAMZ,IAAIa,IAAI;YACvB,EAAE,OAAOC,OAAO;gBACdd,IAAII,OAAO,CAACW,MAAM,CAACD,KAAK,CAACA;YAC3B,SAAU;gBACRd,IAAIY,IAAI,GAAGA;gBACXZ,IAAIa,IAAI,GAAG,IAAMG,QAAQC,OAAO,CAACL;YACnC;QACF,OAAO,IAAIF,gBAAgBH,YAAYF,QAAQ,CAAC,eAAe;YAC7D,MAAM,EAAES,KAAK,EAAEI,MAAM,EAAEC,KAAK,EAAE,GAAG,MAAMrB,8ZAAAA,EAAmB;gBACxDsB,SAAShB,QAAQiB,MAAM,CAACC,MAAM;gBAC9BC,SAASvB;YACX;YAEA,IAAIc,OAAO;gBACT,MAAM,iXAAIjB,YAAAA,CAASiB,MAAMU,OAAO;YAClC;YAEA,IAAIL,OAAOM,MAAM;gBACfzB,IAAIyB,IAAI,GAAGN,MAAMM,IAAI;YACvB;YAEA,IAAIP,QAAQQ,YAAY,OAAOR,OAAOQ,QAAQ,KAAK,UAAU;gBAC3D1B,IAAIY,IAAI,GAAGe,KAAKC,KAAK,CAACV,OAAOQ,QAAQ;YACvC;QACF;IACF;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/addLocalesToRequest.ts"],"sourcesContent":["import type { SanitizedConfig } from '../config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { sanitizeFallbackLocale } from './sanitizeFallbackLocale.js'\n\n/**\n * Mutates the Request to contain 'locale' and 'fallbackLocale' based on data or searchParams\n */\nexport function addLocalesToRequestFromData(req: PayloadRequest): void {\n  const {\n    data,\n    payload: { config },\n  } = req\n\n  if (data) {\n    let localeOnReq = req.locale\n    let fallbackLocaleOnReq = req.fallbackLocale\n\n    if (!localeOnReq && data?.locale && typeof data.locale === 'string') {\n      localeOnReq = data.locale\n    }\n\n    if (!fallbackLocaleOnReq) {\n      if (data?.['fallback-locale'] && typeof data?.['fallback-locale'] === 'string') {\n        fallbackLocaleOnReq = data['fallback-locale']\n      }\n\n      if (data?.['fallbackLocale'] && typeof data?.['fallbackLocale'] === 'string') {\n        fallbackLocaleOnReq = data['fallbackLocale']\n      }\n    }\n\n    const { fallbackLocale, locale } = sanitizeLocales({\n      fallbackLocale: fallbackLocaleOnReq,\n      locale: localeOnReq,\n      localization: config.localization,\n    })\n\n    if (locale) {\n      req.locale = locale\n    }\n    if (fallbackLocale) {\n      req.fallbackLocale = fallbackLocale\n    }\n  }\n}\n\ntype SanitizeLocalesArgs = {\n  fallbackLocale: string\n  locale: string\n  localization: SanitizedConfig['localization']\n}\ntype SanitizeLocalesReturn = {\n  fallbackLocale?: string\n  locale?: string\n}\nexport const sanitizeLocales = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: SanitizeLocalesArgs): SanitizeLocalesReturn => {\n  // Check if localization has fallback enabled or if a fallback locale is provided\n\n  if (localization) {\n    fallbackLocale = sanitizeFallbackLocale({\n      fallbackLocale,\n      locale,\n      localization,\n    })\n  }\n\n  if (['*', 'all'].includes(locale)) {\n    locale = 'all'\n  } else if (localization && !localization.localeCodes.includes(locale) && localization.fallback) {\n    locale = localization.defaultLocale\n  }\n\n  return {\n    fallbackLocale,\n    locale,\n  }\n}\n"],"names":["sanitizeFallbackLocale","addLocalesToRequestFromData","req","data","payload","config","localeOnReq","locale","fallbackLocaleOnReq","fallbackLocale","sanitizeLocales","localization","includes","localeCodes","fallback","defaultLocale"],"mappings":";;;;AAGA,SAASA,sBAAsB,QAAQ,8BAA6B;;AAK7D,SAASC,4BAA4BC,GAAmB;IAC7D,MAAM,EACJC,IAAI,EACJC,SAAS,EAAEC,MAAM,EAAE,EACpB,GAAGH;IAEJ,IAAIC,MAAM;QACR,IAAIG,cAAcJ,IAAIK,MAAM;QAC5B,IAAIC,sBAAsBN,IAAIO,cAAc;QAE5C,IAAI,CAACH,eAAeH,MAAMI,UAAU,OAAOJ,KAAKI,MAAM,KAAK,UAAU;YACnED,cAAcH,KAAKI,MAAM;QAC3B;QAEA,IAAI,CAACC,qBAAqB;YACxB,IAAIL,MAAM,CAAC,kBAAkB,IAAI,OAAOA,MAAM,CAAC,kBAAkB,KAAK,UAAU;gBAC9EK,sBAAsBL,IAAI,CAAC,kBAAkB;YAC/C;YAEA,IAAIA,MAAM,CAAC,iBAAiB,IAAI,OAAOA,MAAM,CAAC,iBAAiB,KAAK,UAAU;gBAC5EK,sBAAsBL,IAAI,CAAC,iBAAiB;YAC9C;QACF;QAEA,MAAM,EAAEM,cAAc,EAAEF,MAAM,EAAE,GAAGG,gBAAgB;YACjDD,gBAAgBD;YAChBD,QAAQD;YACRK,cAAcN,OAAOM,YAAY;QACnC;QAEA,IAAIJ,QAAQ;YACVL,IAAIK,MAAM,GAAGA;QACf;QACA,IAAIE,gBAAgB;YAClBP,IAAIO,cAAc,GAAGA;QACvB;IACF;AACF;AAWO,MAAMC,kBAAkB,CAAC,EAC9BD,cAAc,EACdF,MAAM,EACNI,YAAY,EACQ;IACpB,iFAAiF;IAEjF,IAAIA,cAAc;QAChBF,oZAAiBT,yBAAAA,EAAuB;YACtCS;YACAF;YACAI;QACF;IACF;IAEA,IAAI;QAAC;QAAK;KAAM,CAACC,QAAQ,CAACL,SAAS;QACjCA,SAAS;IACX,OAAO,IAAII,gBAAgB,CAACA,aAAaE,WAAW,CAACD,QAAQ,CAACL,WAAWI,aAAaG,QAAQ,EAAE;QAC9FP,SAASI,aAAaI,aAAa;IACrC;IAEA,OAAO;QACLN;QACAF;IACF;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/wrapInternalEndpoints.ts"],"sourcesContent":["import type { Endpoint } from '../config/types.js'\n\nimport { addDataAndFileToRequest } from './addDataAndFileToRequest.js'\nimport { addLocalesToRequestFromData } from './addLocalesToRequest.js'\n\nexport const wrapInternalEndpoints = (endpoints: Endpoint[]): Endpoint[] => {\n  return endpoints.map((endpoint) => {\n    const handler = endpoint.handler\n\n    if (['patch', 'post'].includes(endpoint.method)) {\n      endpoint.handler = async (req) => {\n        await addDataAndFileToRequest(req)\n        addLocalesToRequestFromData(req)\n        return handler(req)\n      }\n    }\n\n    return endpoint\n  })\n}\n"],"names":["addDataAndFileToRequest","addLocalesToRequestFromData","wrapInternalEndpoints","endpoints","map","endpoint","handler","includes","method","req"],"mappings":";;;AAEA,SAASA,uBAAuB,QAAQ,+BAA8B;AACtE,SAASC,2BAA2B,QAAQ,2BAA0B;;;AAE/D,MAAMC,wBAAwB,CAACC;IACpC,OAAOA,UAAUC,GAAG,CAAC,CAACC;QACpB,MAAMC,UAAUD,SAASC,OAAO;QAEhC,IAAI;YAAC;YAAS;SAAO,CAACC,QAAQ,CAACF,SAASG,MAAM,GAAG;YAC/CH,SAASC,OAAO,GAAG,OAAOG;gBACxB,0YAAMT,0BAAAA,EAAwBS;gZAC9BR,8BAAAA,EAA4BQ;gBAC5B,OAAOH,QAAQG;YACjB;QACF;QAEA,OAAOJ;IACT;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/headersWithCors.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\ntype CorsArgs = {\n  headers: Headers\n  req: Partial<PayloadRequest>\n}\nexport const headersWithCors = ({ headers, req }: CorsArgs): Headers => {\n  const cors = req?.payload.config.cors\n  const requestOrigin = req?.headers.get('Origin')\n\n  if (cors) {\n    const defaultAllowedHeaders = [\n      'Origin',\n      'X-Requested-With',\n      'Content-Type',\n      'Accept',\n      'Authorization',\n      'Content-Encoding',\n      'x-apollo-tracing',\n    ]\n\n    headers.set('Access-Control-Allow-Methods', 'PUT, PATCH, POST, GET, DELETE, OPTIONS')\n\n    if (typeof cors === 'object' && 'headers' in cors) {\n      headers.set(\n        'Access-Control-Allow-Headers',\n        [...defaultAllowedHeaders, ...cors.headers].filter(Boolean).join(', '),\n      )\n    } else {\n      headers.set('Access-Control-Allow-Headers', defaultAllowedHeaders.join(', '))\n    }\n\n    if (cors === '*' || (typeof cors === 'object' && 'origins' in cors && cors.origins === '*')) {\n      headers.set('Access-Control-Allow-Origin', '*')\n    } else if (\n      (Array.isArray(cors) && cors.indexOf(requestOrigin) > -1) ||\n      (!Array.isArray(cors) &&\n        typeof cors === 'object' &&\n        'origins' in cors &&\n        cors.origins.indexOf(requestOrigin) > -1)\n    ) {\n      headers.set('Access-Control-Allow-Credentials', 'true')\n      headers.set('Access-Control-Allow-Origin', requestOrigin)\n    }\n  }\n\n  return headers\n}\n"],"names":["headersWithCors","headers","req","cors","payload","config","requestOrigin","get","defaultAllowedHeaders","set","filter","Boolean","join","origins","Array","isArray","indexOf"],"mappings":";;;AAMO,MAAMA,kBAAkB,CAAC,EAAEC,OAAO,EAAEC,GAAG,EAAY;IACxD,MAAMC,OAAOD,KAAKE,QAAQC,OAAOF;IACjC,MAAMG,gBAAgBJ,KAAKD,QAAQM,IAAI;IAEvC,IAAIJ,MAAM;QACR,MAAMK,wBAAwB;YAC5B;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAEDP,QAAQQ,GAAG,CAAC,gCAAgC;QAE5C,IAAI,OAAON,SAAS,YAAY,aAAaA,MAAM;YACjDF,QAAQQ,GAAG,CACT,gCACA;mBAAID;mBAA0BL,KAAKF,OAAO;aAAC,CAACS,MAAM,CAACC,SAASC,IAAI,CAAC;QAErE,OAAO;YACLX,QAAQQ,GAAG,CAAC,gCAAgCD,sBAAsBI,IAAI,CAAC;QACzE;QAEA,IAAIT,SAAS,OAAQ,OAAOA,SAAS,YAAY,aAAaA,QAAQA,KAAKU,OAAO,KAAK,KAAM;YAC3FZ,QAAQQ,GAAG,CAAC,+BAA+B;QAC7C,OAAO,IACJK,MAAMC,OAAO,CAACZ,SAASA,KAAKa,OAAO,CAACV,iBAAiB,CAAC,KACtD,CAACQ,MAAMC,OAAO,CAACZ,SACd,OAAOA,SAAS,YAChB,aAAaA,QACbA,KAAKU,OAAO,CAACG,OAAO,CAACV,iBAAiB,CAAC,GACzC;YACAL,QAAQQ,GAAG,CAAC,oCAAoC;YAChDR,QAAQQ,GAAG,CAAC,+BAA+BH;QAC7C;IACF;IAEA,OAAOL;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 474, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/oneWayHash.ts"],"sourcesContent":["import type { BinaryLike } from 'crypto'\n\nimport { createHash } from 'crypto'\n\nexport const oneWayHash = (data: BinaryLike, secret: string): string => {\n  const hash = createHash('sha256')\n\n  // prepend value with payload secret. This ensure one-way.\n  hash.update(secret)\n\n  // Update is an append operation, not a replacement. The secret from the prior\n  // update is still present!\n  hash.update(data)\n  return hash.digest('hex')\n}\n"],"names":["createHash","oneWayHash","data","secret","hash","update","digest"],"mappings":";;;AAEA,SAASA,UAAU,QAAQ,SAAQ;;AAE5B,MAAMC,aAAa,CAACC,MAAkBC;IAC3C,MAAMC,iHAAOJ,aAAAA,EAAW;IAExB,0DAA0D;IAC1DI,KAAKC,MAAM,CAACF;IAEZ,8EAA8E;IAC9E,2BAA2B;IAC3BC,KAAKC,MAAM,CAACH;IACZ,OAAOE,KAAKE,MAAM,CAAC;AACrB,EAAC","ignoreList":[0]}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/conf/envPaths.ts"],"sourcesContent":["/**\n * Taken from https://github.com/sindresorhus/env-paths/blob/main/index.js\n *\n * MIT License\n *\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport os from 'node:os'\nimport path from 'node:path'\nimport process from 'node:process'\n\nconst homedir = os.homedir()\nconst tmpdir = os.tmpdir()\nconst { env } = process\n\nconst macos = (name) => {\n  const library = path.join(homedir, 'Library')\n\n  return {\n    cache: path.join(library, 'Caches', name),\n    config: path.join(library, 'Preferences', name),\n    data: path.join(library, 'Application Support', name),\n    log: path.join(library, 'Logs', name),\n    temp: path.join(tmpdir, name),\n  }\n}\n\nconst windows = (name) => {\n  const appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming')\n  const localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local')\n\n  return {\n    // Data/config/cache/log are invented by me as Windows isn't opinionated about this\n    cache: path.join(localAppData, name, 'Cache'),\n    config: path.join(appData, name, 'Config'),\n    data: path.join(localAppData, name, 'Data'),\n    log: path.join(localAppData, name, 'Log'),\n    temp: path.join(tmpdir, name),\n  }\n}\n\n// https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\nconst linux = (name) => {\n  const username = path.basename(homedir)\n\n  return {\n    cache: path.join(env.XDG_CACHE_HOME || path.join(homedir, '.cache'), name),\n    config: path.join(env.XDG_CONFIG_HOME || path.join(homedir, '.config'), name),\n    data: path.join(env.XDG_DATA_HOME || path.join(homedir, '.local', 'share'), name),\n    // https://wiki.debian.org/XDGBaseDirectorySpecification#state\n    log: path.join(env.XDG_STATE_HOME || path.join(homedir, '.local', 'state'), name),\n    temp: path.join(tmpdir, username, name),\n  }\n}\n\nexport function envPaths(name, { suffix = 'nodejs' } = {}) {\n  if (typeof name !== 'string') {\n    throw new TypeError(`Expected a string, got ${typeof name}`)\n  }\n\n  if (suffix) {\n    // Add suffix to prevent possible conflict with native apps\n    name += `-${suffix}`\n  }\n\n  if (process.platform === 'darwin') {\n    return macos(name)\n  }\n\n  if (process.platform === 'win32') {\n    return windows(name)\n  }\n\n  return linux(name)\n}\n"],"names":["os","path","process","homedir","tmpdir","env","macos","name","library","join","cache","config","data","log","temp","windows","appData","APPDATA","localAppData","LOCALAPPDATA","linux","username","basename","XDG_CACHE_HOME","XDG_CONFIG_HOME","XDG_DATA_HOME","XDG_STATE_HOME","envPaths","suffix","TypeError","platform"],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;AAED,OAAOA,QAAQ,UAAS;AACxB,OAAOC,UAAU,YAAW;AAC5B,OAAOC,aAAa,eAAc;;;;AAElC,MAAMC,wHAAUH,UAAAA,CAAGG,OAAO;AAC1B,MAAMC,uHAASJ,UAAAA,CAAGI,MAAM;AACxB,MAAM,EAAEC,GAAG,EAAE,2HAAGH,UAAAA;AAEhB,MAAMI,QAAQ,CAACC;IACb,MAAMC,4HAAUP,UAAAA,CAAKQ,IAAI,CAACN,SAAS;IAEnC,OAAO;QACLO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACD,SAAS,UAAUD;QACpCI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACD,SAAS,eAAeD;QAC1CK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACD,SAAS,uBAAuBD;QAChDM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACD,SAAS,QAAQD;QAChCO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQG;IAC1B;AACF;AAEA,MAAMQ,UAAU,CAACR;IACf,MAAMS,UAAUX,IAAIY,OAAO,sHAAIhB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAW;IAC7D,MAAMe,eAAeb,IAAIc,YAAY,sHAAIlB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAW;IAEvE,OAAO;QACL,mFAAmF;QACnFO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACrCI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACO,SAAST,MAAM;QACjCK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACpCM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACnCO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQG;IAC1B;AACF;AAEA,+EAA+E;AAC/E,MAAMa,QAAQ,CAACb;IACb,MAAMc,6HAAWpB,UAAAA,CAAKqB,QAAQ,CAACnB;IAE/B,OAAO;QACLO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACJ,IAAIkB,cAAc,sHAAItB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAWI;QACrEI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACJ,IAAImB,eAAe,sHAAIvB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,YAAYI;QACxEK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACJ,IAAIoB,aAAa,sHAAIxB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,UAAU,UAAUI;QAC5E,8DAA8D;QAC9DM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACJ,IAAIqB,cAAc,sHAAIzB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,UAAU,UAAUI;QAC5EO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQiB,UAAUd;IACpC;AACF;AAEO,SAASoB,SAASpB,IAAI,EAAE,EAAEqB,SAAS,QAAQ,EAAE,GAAG,CAAC,CAAC;IACvD,IAAI,OAAOrB,SAAS,UAAU;QAC5B,MAAM,IAAIsB,UAAU,CAAC,uBAAuB,EAAE,OAAOtB,MAAM;IAC7D;IAEA,IAAIqB,QAAQ;QACV,2DAA2D;QAC3DrB,QAAQ,CAAC,CAAC,EAAEqB,QAAQ;IACtB;IAEA,4HAAI1B,UAAAA,CAAQ4B,QAAQ,KAAK,UAAU;QACjC,OAAOxB,MAAMC;IACf;IAEA,4HAAIL,UAAAA,CAAQ4B,QAAQ,KAAK,SAAS;QAChC,OAAOf,QAAQR;IACjB;IAEA,OAAOa,MAAMb;AACf","ignoreList":[0]}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/conf/index.ts"],"sourcesContent":["/**\n * Taken & simplified from https://github.com/sindresorhus/conf/blob/main/source/index.ts\n *\n * MIT License\n *\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport assert from 'node:assert'\nimport fs from 'node:fs'\nimport path from 'node:path'\n\nimport { envPaths } from './envPaths.js'\n\nconst createPlainObject = <T = Record<string, unknown>>(): T => Object.create(null)\n\nconst checkValueType = (key: string, value: unknown): void => {\n  const nonJsonTypes = new Set(['function', 'symbol', 'undefined'])\n\n  const type = typeof value\n\n  if (nonJsonTypes.has(type)) {\n    throw new TypeError(\n      `Setting a value of type \\`${type}\\` for key \\`${key}\\` is not allowed as it's not supported by JSON`,\n    )\n  }\n}\n\nexport class Conf<T extends Record<string, any> = Record<string, unknown>>\n  implements Iterable<[keyof T, T[keyof T]]>\n{\n  readonly #options: Readonly<Partial<Options>>\n  private readonly _deserialize: Deserialize<T> = (value) => JSON.parse(value)\n  private readonly _serialize: Serialize<T> = (value) => JSON.stringify(value, undefined, '\\t')\n\n  readonly events: EventTarget\n\n  readonly path: string\n\n  constructor() {\n    const options: Partial<Options> = {\n      configFileMode: 0o666,\n      configName: 'config',\n      fileExtension: 'json',\n      projectSuffix: 'nodejs',\n    }\n\n    const cwd = envPaths('payload', { suffix: options.projectSuffix }).config\n\n    this.#options = options\n\n    this.events = new EventTarget()\n\n    const fileExtension = options.fileExtension ? `.${options.fileExtension}` : ''\n    this.path = path.resolve(cwd, `${options.configName ?? 'config'}${fileExtension}`)\n\n    const fileStore = this.store\n    const store = Object.assign(createPlainObject(), fileStore)\n\n    try {\n      assert.deepEqual(fileStore, store)\n    } catch {\n      this.store = store\n    }\n  }\n\n  private _ensureDirectory(): void {\n    // Ensure the directory exists as it could have been deleted in the meantime.\n    fs.mkdirSync(path.dirname(this.path), { recursive: true })\n  }\n\n  private _write(value: T): void {\n    const data: string | Uint8Array = this._serialize(value)\n\n    fs.writeFileSync(this.path, data, { mode: this.#options.configFileMode })\n  }\n\n  /**\n   Delete an item.\n\n   @param key - The key of the item to delete.\n   */\n  delete(key: string): void {\n    const { store } = this\n    delete store[key]\n\n    this.store = store\n  }\n\n  /**\n   Get an item.\n\n   @param key - The key of the item to get.\n   */\n  get<Key extends keyof T>(key: Key): T[Key] {\n    const { store } = this\n    return store[key]\n  }\n\n  /**\n   Set an item or multiple items at once.\n\n   @param key - You can use [dot-notation](https://github.com/sindresorhus/dot-prop) in a key to access nested properties. Or a hashmap of items to set at once.\n   @param value - Must be JSON serializable. Trying to set the type `undefined`, `function`, or `symbol` will result in a `TypeError`.\n   */\n  set<Key extends keyof T>(key: string, value?: T[Key] | unknown): void {\n    if (typeof key !== 'string' && typeof key !== 'object') {\n      throw new TypeError(\n        `Expected \\`key\\` to be of type \\`string\\` or \\`object\\`, got ${typeof key}`,\n      )\n    }\n\n    if (typeof key !== 'object' && value === undefined) {\n      throw new TypeError('Use `delete()` to clear values')\n    }\n\n    const { store } = this\n\n    const set = (key: string, value?: T | T[Key] | unknown): void => {\n      checkValueType(key, value)\n      store[key as Key] = value as T[Key]\n    }\n\n    if (typeof key === 'object') {\n      const object = key\n      for (const [key, value] of Object.entries(object)) {\n        set(key, value)\n      }\n    } else {\n      set(key, value)\n    }\n\n    this.store = store\n  }\n\n  *[Symbol.iterator](): IterableIterator<[keyof T, T[keyof T]]> {\n    for (const [key, value] of Object.entries(this.store)) {\n      yield [key, value]\n    }\n  }\n  get size(): number {\n    return Object.keys(this.store).length\n  }\n  get store(): T {\n    try {\n      const dataString = fs.readFileSync(this.path, 'utf8')\n      const deserializedData = this._deserialize(dataString)\n      return Object.assign(createPlainObject(), deserializedData)\n    } catch (error: unknown) {\n      if ((error as any)?.code === 'ENOENT') {\n        this._ensureDirectory()\n        return createPlainObject()\n      }\n\n      throw error\n    }\n  }\n\n  set store(value: T) {\n    this._ensureDirectory()\n\n    this._write(value)\n\n    this.events.dispatchEvent(new Event('change'))\n  }\n}\n\nexport type Options = {\n  /**\n   The config is cleared if reading the config file causes a `SyntaxError`. This is a good behavior for unimportant data, as the config file is not intended to be hand-edited, so it usually means the config is corrupt and there's nothing the user can do about it anyway. However, if you let the user edit the config file directly, mistakes might happen and it could be more useful to throw an error when the config is invalid instead of clearing.\n\n   @default false\n   */\n  clearInvalidConfig?: boolean\n\n  /**\n   The [mode](https://en.wikipedia.org/wiki/File-system_permissions#Numeric_notation) that will be used for the config file.\n\n   You would usually not need this, but it could be useful if you want to restrict the permissions of the config file. Setting a permission such as `0o600` would result in a config file that can only be accessed by the user running the program.\n\n   Note that setting restrictive permissions can cause problems if different users need to read the file. A common problem is a user running your tool with and without `sudo` and then not being able to access the config the second time.\n\n   @default 0o666\n   */\n  readonly configFileMode?: number\n\n  /**\n   Name of the config file (without extension).\n\n   Useful if you need multiple config files for your app or module. For example, different config files between two major versions.\n\n   @default 'config'\n   */\n  configName?: string\n\n  /**\n   Extension of the config file.\n\n   You would usually not need this, but could be useful if you want to interact with a file with a custom file extension that can be associated with your app. These might be simple save/export/preference files that are intended to be shareable or saved outside of the app.\n\n   @default 'json'\n   */\n  fileExtension?: string\n\n  readonly projectSuffix?: string\n}\n\nexport type Serialize<T> = (value: T) => string\nexport type Deserialize<T> = (text: string) => T\n"],"names":["assert","fs","path","envPaths","createPlainObject","Object","create","checkValueType","key","value","nonJsonTypes","Set","type","has","TypeError","Conf","_deserialize","JSON","parse","_serialize","stringify","undefined","events","constructor","options","configFileMode","configName","fileExtension","projectSuffix","cwd","suffix","config","EventTarget","resolve","fileStore","store","assign","deepEqual","_ensureDirectory","mkdirSync","dirname","recursive","_write","data","writeFileSync","mode","delete","get","set","object","entries","Symbol","iterator","size","keys","length","dataString","readFileSync","deserializedData","error","code","dispatchEvent","Event"],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;AAED,OAAOA,YAAY,cAAa;AAChC,OAAOC,QAAQ,UAAS;AACxB,OAAOC,UAAU,YAAW;AAE5B,SAASC,QAAQ,QAAQ,gBAAe;;;;;AAExC,MAAMC,oBAAoB,IAAsCC,OAAOC,MAAM,CAAC;AAE9E,MAAMC,iBAAiB,CAACC,KAAaC;IACnC,MAAMC,eAAe,IAAIC,IAAI;QAAC;QAAY;QAAU;KAAY;IAEhE,MAAMC,OAAO,OAAOH;IAEpB,IAAIC,aAAaG,GAAG,CAACD,OAAO;QAC1B,MAAM,IAAIE,UACR,CAAC,0BAA0B,EAAEF,KAAK,aAAa,EAAEJ,IAAI,+CAA+C,CAAC;IAEzG;AACF;AAEO,MAAMO;KAGF,CAAA,MAAQ,CAA4B;IAC5BC,eAA+B,CAACP,QAAUQ,KAAKC,KAAK,CAACT,OAAM;IAC3DU,aAA2B,CAACV,QAAUQ,KAAKG,SAAS,CAACX,OAAOY,WAAW,MAAK;IAEpFC,OAAmB;IAEnBpB,KAAY;IAErBqB,aAAc;QACZ,MAAMC,UAA4B;YAChCC,gBAAgB;YAChBC,YAAY;YACZC,eAAe;YACfC,eAAe;QACjB;QAEA,MAAMC,gZAAM1B,WAAAA,EAAS,WAAW;YAAE2B,QAAQN,QAAQI,aAAa;QAAC,GAAGG,MAAM;QAEzE,IAAI,EAAC,CAAA,MAAQ,GAAGP;QAEhB,IAAI,CAACF,MAAM,GAAG,IAAIU;QAElB,MAAML,gBAAgBH,QAAQG,aAAa,GAAG,CAAC,CAAC,EAAEH,QAAQG,aAAa,EAAE,GAAG;QAC5E,IAAI,CAACzB,IAAI,qHAAGA,UAAAA,CAAK+B,OAAO,CAACJ,KAAK,GAAGL,QAAQE,UAAU,IAAI,WAAWC,eAAe;QAEjF,MAAMO,YAAY,IAAI,CAACC,KAAK;QAC5B,MAAMA,QAAQ9B,OAAO+B,MAAM,CAAChC,qBAAqB8B;QAEjD,IAAI;kIACFlC,UAAAA,CAAOqC,SAAS,CAACH,WAAWC;QAC9B,EAAE,OAAM;YACN,IAAI,CAACA,KAAK,GAAGA;QACf;IACF;IAEQG,mBAAyB;QAC/B,6EAA6E;sHAC7ErC,UAAAA,CAAGsC,SAAS,mHAACrC,UAAAA,CAAKsC,OAAO,CAAC,IAAI,CAACtC,IAAI,GAAG;YAAEuC,WAAW;QAAK;IAC1D;IAEQC,OAAOjC,KAAQ,EAAQ;QAC7B,MAAMkC,OAA4B,IAAI,CAACxB,UAAU,CAACV;sHAElDR,UAAAA,CAAG2C,aAAa,CAAC,IAAI,CAAC1C,IAAI,EAAEyC,MAAM;YAAEE,MAAM,IAAI,EAAC,CAAA,MAAQ,CAACpB,cAAc;QAAC;IACzE;IAEA;;;;GAIC,GACDqB,OAAOtC,GAAW,EAAQ;QACxB,MAAM,EAAE2B,KAAK,EAAE,GAAG,IAAI;QACtB,OAAOA,KAAK,CAAC3B,IAAI;QAEjB,IAAI,CAAC2B,KAAK,GAAGA;IACf;IAEA;;;;GAIC,GACDY,IAAyBvC,GAAQ,EAAU;QACzC,MAAM,EAAE2B,KAAK,EAAE,GAAG,IAAI;QACtB,OAAOA,KAAK,CAAC3B,IAAI;IACnB;IAEA;;;;;GAKC,GACDwC,IAAyBxC,GAAW,EAAEC,KAAwB,EAAQ;QACpE,IAAI,OAAOD,QAAQ,YAAY,OAAOA,QAAQ,UAAU;YACtD,MAAM,IAAIM,UACR,CAAC,6DAA6D,EAAE,OAAON,KAAK;QAEhF;QAEA,IAAI,OAAOA,QAAQ,YAAYC,UAAUY,WAAW;YAClD,MAAM,IAAIP,UAAU;QACtB;QAEA,MAAM,EAAEqB,KAAK,EAAE,GAAG,IAAI;QAEtB,MAAMa,MAAM,CAACxC,KAAaC;YACxBF,eAAeC,KAAKC;YACpB0B,KAAK,CAAC3B,IAAW,GAAGC;QACtB;QAEA,IAAI,OAAOD,QAAQ,UAAU;YAC3B,MAAMyC,SAASzC;YACf,KAAK,MAAM,CAACA,KAAKC,MAAM,IAAIJ,OAAO6C,OAAO,CAACD,QAAS;gBACjDD,IAAIxC,KAAKC;YACX;QACF,OAAO;YACLuC,IAAIxC,KAAKC;QACX;QAEA,IAAI,CAAC0B,KAAK,GAAGA;IACf;IAEA,CAAC,CAACgB,OAAOC,QAAQ,CAAC,GAA4C;QAC5D,KAAK,MAAM,CAAC5C,KAAKC,MAAM,IAAIJ,OAAO6C,OAAO,CAAC,IAAI,CAACf,KAAK,EAAG;YACrD,MAAM;gBAAC3B;gBAAKC;aAAM;QACpB;IACF;IACA,IAAI4C,OAAe;QACjB,OAAOhD,OAAOiD,IAAI,CAAC,IAAI,CAACnB,KAAK,EAAEoB,MAAM;IACvC;IACA,IAAIpB,QAAW;QACb,IAAI;YACF,MAAMqB,2HAAavD,UAAAA,CAAGwD,YAAY,CAAC,IAAI,CAACvD,IAAI,EAAE;YAC9C,MAAMwD,mBAAmB,IAAI,CAAC1C,YAAY,CAACwC;YAC3C,OAAOnD,OAAO+B,MAAM,CAAChC,qBAAqBsD;QAC5C,EAAE,OAAOC,OAAgB;YACvB,IAAKA,OAAeC,SAAS,UAAU;gBACrC,IAAI,CAACtB,gBAAgB;gBACrB,OAAOlC;YACT;YAEA,MAAMuD;QACR;IACF;IAEA,IAAIxB,MAAM1B,KAAQ,EAAE;QAClB,IAAI,CAAC6B,gBAAgB;QAErB,IAAI,CAACI,MAAM,CAACjC;QAEZ,IAAI,CAACa,MAAM,CAACuC,aAAa,CAAC,IAAIC,MAAM;IACtC;AACF","ignoreList":[0]}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 735, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/findUp.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\n/**\n * Synchronously walks up parent directories until a condition is met and/or one of the file names within the fileNames array is found.\n */\nexport function findUpSync({\n  condition,\n  dir,\n  fileNames,\n}: {\n  condition?: (dir: string) => boolean | Promise<boolean | string> | string\n  dir: string\n  fileNames?: string[]\n}): null | string {\n  const { root } = path.parse(dir)\n\n  while (true) {\n    if (fileNames?.length) {\n      let found = false\n      for (const fileName of fileNames) {\n        const filePath = path.join(dir, fileName)\n        const exists = pathExistsAndIsAccessibleSync(filePath)\n        if (exists) {\n          if (!condition) {\n            return filePath\n          }\n          found = true\n          break\n        }\n      }\n      if (!found) {\n        dir = path.dirname(dir) // Move up one directory level.\n        continue\n      }\n    }\n    const result = condition(dir)\n    if (result === true) {\n      return dir\n    }\n    if (typeof result === 'string' && result?.length) {\n      return result\n    }\n    if (dir === root) {\n      return null // Reached the root directory without a match.\n    }\n    dir = path.dirname(dir) // Move up one directory level.\n  }\n}\n\n/**\n * Asynchronously walks up parent directories until a condition is met and/or one of the file names within the fileNames array is found.\n */\nexport async function findUp({\n  condition,\n  dir,\n  fileNames,\n}: {\n  condition?: (dir: string) => boolean | Promise<boolean | string> | string\n  dir: string\n  fileNames?: string[]\n}): Promise<null | string> {\n  const { root } = path.parse(dir)\n\n  while (true) {\n    if (fileNames?.length) {\n      let found = false\n      for (const fileName of fileNames) {\n        const filePath = path.resolve(dir, fileName)\n        const exists = await pathExistsAndIsAccessible(filePath)\n        if (exists) {\n          if (!condition) {\n            return filePath\n          }\n          found = true\n          break\n        }\n      }\n      if (!found) {\n        dir = path.dirname(dir) // Move up one directory level.\n        continue\n      }\n    }\n    const result = await condition(dir)\n    if (result === true) {\n      return dir\n    }\n    if (typeof result === 'string' && result?.length) {\n      return result\n    }\n    if (dir === root) {\n      return null // Reached the root directory without a match.\n    }\n    dir = path.dirname(dir) // Move up one directory level.\n  }\n}\n\n// From https://github.com/sindresorhus/path-exists/blob/main/index.js\n// fs.accessSync is preferred over fs.existsSync as it's usually a good idea\n// to check if the process has permission to read/write to a file before doing so.\n// Also see https://github.com/nodejs/node/issues/39960\nexport function pathExistsAndIsAccessibleSync(path: string) {\n  try {\n    fs.accessSync(path)\n    return true\n  } catch {\n    return false\n  }\n}\n\nexport async function pathExistsAndIsAccessible(path: string) {\n  try {\n    await fs.promises.access(path)\n    return true\n  } catch {\n    return false\n  }\n}\n"],"names":["fs","path","findUpSync","condition","dir","fileNames","root","parse","length","found","fileName","filePath","join","exists","pathExistsAndIsAccessibleSync","dirname","result","findUp","resolve","pathExistsAndIsAccessible","accessSync","promises","access"],"mappings":";;;;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;;;AAKhB,SAASC,WAAW,EACzBC,SAAS,EACTC,GAAG,EACHC,SAAS,EAKV;IACC,MAAM,EAAEC,IAAI,EAAE,qGAAGL,UAAAA,CAAKM,KAAK,CAACH;IAE5B,MAAO,KAAM;QACX,IAAIC,WAAWG,QAAQ;YACrB,IAAIC,QAAQ;YACZ,KAAK,MAAMC,YAAYL,UAAW;gBAChC,MAAMM,6GAAWV,UAAAA,CAAKW,IAAI,CAACR,KAAKM;gBAChC,MAAMG,SAASC,8BAA8BH;gBAC7C,IAAIE,QAAQ;oBACV,IAAI,CAACV,WAAW;wBACd,OAAOQ;oBACT;oBACAF,QAAQ;oBACR;gBACF;YACF;YACA,IAAI,CAACA,OAAO;gBACVL,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;gBACvD;YACF;QACF;QACA,MAAMY,SAASb,UAAUC;QACzB,IAAIY,WAAW,MAAM;YACnB,OAAOZ;QACT;QACA,IAAI,OAAOY,WAAW,YAAYA,QAAQR,QAAQ;YAChD,OAAOQ;QACT;QACA,IAAIZ,QAAQE,MAAM;YAChB,OAAO,KAAK,8CAA8C;;QAC5D;QACAF,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;IACzD;AACF;AAKO,eAAea,OAAO,EAC3Bd,SAAS,EACTC,GAAG,EACHC,SAAS,EAKV;IACC,MAAM,EAAEC,IAAI,EAAE,qGAAGL,UAAAA,CAAKM,KAAK,CAACH;IAE5B,MAAO,KAAM;QACX,IAAIC,WAAWG,QAAQ;YACrB,IAAIC,QAAQ;YACZ,KAAK,MAAMC,YAAYL,UAAW;gBAChC,MAAMM,6GAAWV,UAAAA,CAAKiB,OAAO,CAACd,KAAKM;gBACnC,MAAMG,SAAS,MAAMM,0BAA0BR;gBAC/C,IAAIE,QAAQ;oBACV,IAAI,CAACV,WAAW;wBACd,OAAOQ;oBACT;oBACAF,QAAQ;oBACR;gBACF;YACF;YACA,IAAI,CAACA,OAAO;gBACVL,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;gBACvD;YACF;QACF;QACA,MAAMY,SAAS,MAAMb,UAAUC;QAC/B,IAAIY,WAAW,MAAM;YACnB,OAAOZ;QACT;QACA,IAAI,OAAOY,WAAW,YAAYA,QAAQR,QAAQ;YAChD,OAAOQ;QACT;QACA,IAAIZ,QAAQE,MAAM;YAChB,OAAO,KAAK,8CAA8C;;QAC5D;QACAF,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;IACzD;AACF;AAMO,SAASU,8BAA8Bb,IAAY;IACxD,IAAI;sGACFD,UAAAA,CAAGoB,UAAU,CAACnB;QACd,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAekB,0BAA0BlB,IAAY;IAC1D,IAAI;QACF,oGAAMD,UAAAA,CAAGqB,QAAQ,CAACC,MAAM,CAACrB;QACzB,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF","ignoreList":[0]}},
    {"offset": {"line": 835, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 841, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/index.ts"],"sourcesContent":["import { execSync } from 'child_process'\nimport ciInfo from 'ci-info'\nimport { randomBytes } from 'crypto'\nimport fs from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport type { Payload } from '../../types/index.js'\nimport type { AdminInitEvent } from './events/adminInit.js'\nimport type { ServerInitEvent } from './events/serverInit.js'\n\nimport { findUp } from '../findUp.js'\nimport { Conf } from './conf/index.js'\nimport { oneWayHash } from './oneWayHash.js'\n\nexport type BaseEvent = {\n  ciName: null | string\n  dbAdapter: string\n  emailAdapter: null | string\n  envID: string\n  isCI: boolean\n  locales: string[]\n  localizationDefaultLocale: null | string\n  localizationEnabled: boolean\n  nodeEnv: string\n  nodeVersion: string\n  payloadVersion: string\n  projectID: string\n  projectIDSource: 'cwd' | 'git' | 'packageJSON' | 'serverURL'\n  uploadAdapters: string[]\n}\n\ntype PackageJSON = {\n  dependencies: Record<string, string | undefined>\n  name: string\n}\n\ntype TelemetryEvent = AdminInitEvent | ServerInitEvent\n\ntype Args = {\n  event: TelemetryEvent\n  payload: Payload\n}\n\nlet baseEvent: BaseEvent | null = null\n\nexport const sendEvent = async ({ event, payload }: Args): Promise<void> => {\n  try {\n    const { packageJSON, packageJSONPath } = await getPackageJSON()\n\n    // Only generate the base event once\n    if (!baseEvent) {\n      const { projectID, source: projectIDSource } = getProjectID(payload, packageJSON)\n      baseEvent = {\n        ciName: ciInfo.isCI ? ciInfo.name : null,\n        envID: getEnvID(),\n        isCI: ciInfo.isCI,\n        nodeEnv: process.env.NODE_ENV || 'development',\n        nodeVersion: process.version,\n        payloadVersion: getPayloadVersion(packageJSON),\n        projectID,\n        projectIDSource,\n        ...getLocalizationInfo(payload),\n        dbAdapter: payload.db.name,\n        emailAdapter: payload.email?.name || null,\n        uploadAdapters: payload.config.upload.adapters,\n      }\n    }\n\n    if (process.env.PAYLOAD_TELEMETRY_DEBUG) {\n      payload.logger.info({\n        event: { ...baseEvent, ...event, packageJSONPath },\n        msg: 'Telemetry Event',\n      })\n      return\n    }\n\n    if (payload.config.telemetry !== false) {\n      await fetch('https://telemetry.payloadcms.com/events', {\n        body: JSON.stringify({ ...baseEvent, ...event }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        method: 'post',\n      })\n    }\n  } catch (_) {\n    // Eat any errors in sending telemetry event\n  }\n}\n\n/**\n * This is a quasi-persistent identifier used to dedupe recurring events. It's\n * generated from random data and completely anonymous.\n */\nconst getEnvID = (): string => {\n  const conf = new Conf()\n  const ENV_ID = 'envID'\n\n  const val = conf.get(ENV_ID)\n  if (val) {\n    return val as string\n  }\n\n  const generated = randomBytes(32).toString('hex')\n  conf.set(ENV_ID, generated)\n  return generated\n}\n\nconst getProjectID = (\n  payload: Payload,\n  packageJSON: PackageJSON,\n): { projectID: string; source: BaseEvent['projectIDSource'] } => {\n  const gitID = getGitID(payload)\n  if (gitID) {\n    return { projectID: oneWayHash(gitID, payload.secret), source: 'git' }\n  }\n\n  const packageJSONID = getPackageJSONID(payload, packageJSON)\n  if (packageJSONID) {\n    return { projectID: oneWayHash(packageJSONID, payload.secret), source: 'packageJSON' }\n  }\n\n  const serverURL = payload.config.serverURL\n  if (serverURL) {\n    return { projectID: oneWayHash(serverURL, payload.secret), source: 'serverURL' }\n  }\n\n  const cwd = process.cwd()\n  return { projectID: oneWayHash(cwd, payload.secret), source: 'cwd' }\n}\n\nconst getGitID = (payload: Payload) => {\n  try {\n    const originBuffer = execSync('git config --local --get remote.origin.url', {\n      stdio: 'pipe',\n      timeout: 1000,\n    })\n\n    return oneWayHash(String(originBuffer).trim(), payload.secret)\n  } catch (_) {\n    return null\n  }\n}\n\nconst getPackageJSON = async (): Promise<{\n  packageJSON?: PackageJSON\n  packageJSONPath: string\n}> => {\n  let packageJSONPath = path.resolve(process.cwd(), 'package.json')\n\n  if (!fs.existsSync(packageJSONPath)) {\n    // Old logic\n    const filename = fileURLToPath(import.meta.url)\n    const dirname = path.dirname(filename)\n    packageJSONPath = await findUp({\n      dir: dirname,\n      fileNames: ['package.json'],\n    })\n  }\n\n  const jsonContentString = await fs.promises.readFile(packageJSONPath, 'utf-8')\n  const jsonContent: PackageJSON = JSON.parse(jsonContentString)\n  return { packageJSON: jsonContent, packageJSONPath }\n}\n\nconst getPackageJSONID = (payload: Payload, packageJSON: PackageJSON): string => {\n  return oneWayHash(packageJSON.name, payload.secret)\n}\n\nexport const getPayloadVersion = (packageJSON: PackageJSON): string => {\n  return packageJSON?.dependencies?.payload ?? ''\n}\n\nexport const getLocalizationInfo = (\n  payload: Payload,\n): Pick<BaseEvent, 'locales' | 'localizationDefaultLocale' | 'localizationEnabled'> => {\n  if (!payload.config.localization) {\n    return {\n      locales: [],\n      localizationDefaultLocale: null,\n      localizationEnabled: false,\n    }\n  }\n\n  return {\n    locales: payload.config.localization.localeCodes,\n    localizationDefaultLocale: payload.config.localization.defaultLocale,\n    localizationEnabled: true,\n  }\n}\n"],"names":["execSync","ciInfo","randomBytes","fs","path","fileURLToPath","findUp","Conf","oneWayHash","baseEvent","sendEvent","event","payload","packageJSON","packageJSONPath","getPackageJSON","projectID","source","projectIDSource","getProjectID","ciName","isCI","name","envID","getEnvID","nodeEnv","process","env","NODE_ENV","nodeVersion","version","payloadVersion","getPayloadVersion","getLocalizationInfo","dbAdapter","db","emailAdapter","email","uploadAdapters","config","upload","adapters","PAYLOAD_TELEMETRY_DEBUG","logger","info","msg","telemetry","fetch","body","JSON","stringify","headers","method","_","conf","ENV_ID","val","get","generated","toString","set","gitID","getGitID","secret","packageJSONID","getPackageJSONID","serverURL","cwd","originBuffer","stdio","timeout","String","trim","resolve","existsSync","filename","url","dirname","dir","fileNames","jsonContentString","promises","readFile","jsonContent","parse","dependencies","localization","locales","localizationDefaultLocale","localizationEnabled","localeCodes","defaultLocale"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1017, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/events/adminInit.ts"],"sourcesContent":["import type { Payload } from '../../../index.js'\nimport type { PayloadRequest } from '../../../types/index.js'\n\nimport { sendEvent } from '../index.js'\nimport { oneWayHash } from '../oneWayHash.js'\n\nexport type AdminInitEvent = {\n  domainID?: string\n  type: 'admin-init'\n  userID?: string\n}\n\ntype Args = {\n  headers: Request['headers']\n  payload: Payload\n  user: PayloadRequest['user']\n}\nexport const adminInit = ({ headers, payload, user }: Args): void => {\n  const host = headers.get('host')\n\n  let domainID: string\n  let userID: string\n\n  if (host) {\n    domainID = oneWayHash(host, payload.secret)\n  }\n\n  if (user?.id) {\n    userID = oneWayHash(String(user.id), payload.secret)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  sendEvent({\n    event: {\n      type: 'admin-init',\n      domainID,\n      userID,\n    },\n    payload,\n  })\n}\n"],"names":["sendEvent","oneWayHash","adminInit","headers","payload","user","host","get","domainID","userID","secret","id","String","event","type"],"mappings":";;;AAIA,SAASC,UAAU,QAAQ,mBAAkB;AAD7C,SAASD,SAAS,QAAQ,cAAa;;;AAchC,MAAME,YAAY,CAAC,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAQ;IACxD,MAAMC,OAAOH,QAAQI,GAAG,CAAC;IAEzB,IAAIC;IACJ,IAAIC;IAEJ,IAAIH,MAAM;QACRE,+YAAWP,aAAAA,EAAWK,MAAMF,QAAQM,MAAM;IAC5C;IAEA,IAAIL,MAAMM,IAAI;QACZF,UAASR,gZAAAA,EAAWW,OAAOP,KAAKM,EAAE,GAAGP,QAAQM,MAAM;IACrD;IAEA,mEAAmE;mYACnEV,YAAAA,EAAU;QACRa,OAAO;YACLC,MAAM;YACNN;YACAC;QACF;QACAL;IACF;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getEntityPolicies.ts"],"sourcesContent":["import type { CollectionPermission, GlobalPermission } from '../auth/types.js'\nimport type { SanitizedCollectionConfig, TypeWithID } from '../collections/config/types.js'\nimport type { Access } from '../config/types.js'\nimport type { Field, FieldAccess } from '../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { AllOperations, Document, PayloadRequest, Where } from '../types/index.js'\n\nimport { combineQueries } from '../database/combineQueries.js'\nimport { tabHasName } from '../fields/config/types.js'\n\ntype Args = {\n  entity: SanitizedCollectionConfig | SanitizedGlobalConfig\n  id?: number | string\n  operations: AllOperations[]\n  req: PayloadRequest\n  type: 'collection' | 'global'\n}\n\ntype ReturnType<T extends Args> = T['type'] extends 'global'\n  ? GlobalPermission\n  : CollectionPermission\n\ntype CreateAccessPromise = (args: {\n  access: Access | FieldAccess\n  accessLevel: 'entity' | 'field'\n  disableWhere?: boolean\n  operation: AllOperations\n  policiesObj: {\n    [key: string]: any\n  }\n}) => Promise<void>\n\nexport async function getEntityPolicies<T extends Args>(args: T): Promise<ReturnType<T>> {\n  const { id, type, entity, operations, req } = args\n  const { data, locale, payload, user } = req\n  const isLoggedIn = !!user\n\n  const policies = {\n    fields: {},\n  } as ReturnType<T>\n\n  let docBeingAccessed\n\n  async function getEntityDoc({ where }: { where?: Where } = {}): Promise<Document & TypeWithID> {\n    if (entity.slug) {\n      if (type === 'global') {\n        return payload.findGlobal({\n          slug: entity.slug,\n          fallbackLocale: null,\n          locale,\n          overrideAccess: true,\n          req,\n        })\n      }\n\n      if (type === 'collection' && id) {\n        if (typeof where === 'object') {\n          const paginatedRes = await payload.find({\n            collection: entity.slug,\n            depth: 0,\n            fallbackLocale: null,\n            limit: 1,\n            locale,\n            overrideAccess: true,\n            pagination: false,\n            req,\n            where: combineQueries(where, { id: { equals: id } }),\n          })\n\n          return paginatedRes?.docs?.[0] || undefined\n        }\n\n        return payload.findByID({\n          id,\n          collection: entity.slug,\n          depth: 0,\n          fallbackLocale: null,\n          locale,\n          overrideAccess: true,\n          req,\n        })\n      }\n    }\n\n    return undefined\n  }\n\n  const createAccessPromise: CreateAccessPromise = async ({\n    access,\n    accessLevel,\n    disableWhere = false,\n    operation,\n    policiesObj,\n  }) => {\n    const mutablePolicies = policiesObj\n\n    if (accessLevel === 'field' && docBeingAccessed === undefined) {\n      // assign docBeingAccessed first as the promise to avoid multiple calls to getEntityDoc\n      docBeingAccessed = getEntityDoc().then((doc) => {\n        docBeingAccessed = doc\n      })\n    }\n    // awaiting the promise to ensure docBeingAccessed is assigned before it is used\n    await docBeingAccessed\n\n    // https://payloadcms.slack.com/archives/C048Z9C2BEX/p1702054928343769\n    const accessResult = await access({ id, data, doc: docBeingAccessed, req })\n\n    if (typeof accessResult === 'object' && !disableWhere) {\n      mutablePolicies[operation] = {\n        permission:\n          id || type === 'global' ? !!(await getEntityDoc({ where: accessResult })) : true,\n        where: accessResult,\n      }\n    } else if (mutablePolicies[operation]?.permission !== false) {\n      mutablePolicies[operation] = {\n        permission: !!accessResult,\n      }\n    }\n  }\n\n  const executeFieldPolicies = async ({\n    entityPermission,\n    fields,\n    operation,\n    policiesObj,\n  }: {\n    entityPermission\n    fields: Field[]\n    operation: AllOperations\n    policiesObj\n  }) => {\n    const mutablePolicies = policiesObj.fields\n\n    // Fields don't have all operations of a collection\n    if (operation === 'delete' || operation === 'readVersions' || operation === 'unlock') {\n      return\n    }\n\n    await Promise.all(\n      fields.map(async (field) => {\n        if ('name' in field && field.name) {\n          if (!mutablePolicies[field.name]) {\n            mutablePolicies[field.name] = {}\n          }\n\n          if ('access' in field && field.access && typeof field.access[operation] === 'function') {\n            await createAccessPromise({\n              access: field.access[operation],\n              accessLevel: 'field',\n              disableWhere: true,\n              operation,\n              policiesObj: mutablePolicies[field.name],\n            })\n          } else {\n            mutablePolicies[field.name][operation] = {\n              permission: policiesObj[operation]?.permission,\n            }\n          }\n\n          if ('fields' in field && field.fields) {\n            if (!mutablePolicies[field.name].fields) {\n              mutablePolicies[field.name].fields = {}\n            }\n\n            await executeFieldPolicies({\n              entityPermission,\n              fields: field.fields,\n              operation,\n              policiesObj: mutablePolicies[field.name],\n            })\n          }\n\n          if ('blocks' in field && field.blocks) {\n            if (!mutablePolicies[field.name]?.blocks) {\n              mutablePolicies[field.name].blocks = {}\n            }\n\n            await Promise.all(\n              field.blocks.map(async (block) => {\n                if (!mutablePolicies[field.name].blocks?.[block.slug]) {\n                  mutablePolicies[field.name].blocks[block.slug] = {\n                    fields: {},\n                    [operation]: { permission: entityPermission },\n                  }\n                } else if (!mutablePolicies[field.name].blocks[block.slug][operation]) {\n                  mutablePolicies[field.name].blocks[block.slug][operation] = {\n                    permission: entityPermission,\n                  }\n                }\n\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: block.fields,\n                  operation,\n                  policiesObj: mutablePolicies[field.name].blocks[block.slug],\n                })\n              }),\n            )\n          }\n        } else if ('fields' in field && field.fields) {\n          await executeFieldPolicies({\n            entityPermission,\n            fields: field.fields,\n            operation,\n            policiesObj,\n          })\n        } else if (field.type === 'tabs') {\n          await Promise.all(\n            field.tabs.map(async (tab) => {\n              if (tabHasName(tab)) {\n                if (!mutablePolicies[tab.name]) {\n                  mutablePolicies[tab.name] = {\n                    fields: {},\n                    [operation]: { permission: entityPermission },\n                  }\n                } else if (!mutablePolicies[tab.name][operation]) {\n                  mutablePolicies[tab.name][operation] = { permission: entityPermission }\n                }\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: tab.fields,\n                  operation,\n                  policiesObj: mutablePolicies[tab.name],\n                })\n              } else {\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: tab.fields,\n                  operation,\n                  policiesObj,\n                })\n              }\n            }),\n          )\n        }\n      }),\n    )\n  }\n\n  await operations.reduce(async (priorOperation, operation) => {\n    await priorOperation\n\n    let entityAccessPromise: Promise<void>\n\n    if (typeof entity.access[operation] === 'function') {\n      entityAccessPromise = createAccessPromise({\n        access: entity.access[operation],\n        accessLevel: 'entity',\n        operation,\n        policiesObj: policies,\n      })\n    } else {\n      policies[operation] = {\n        permission: isLoggedIn,\n      }\n    }\n\n    await entityAccessPromise\n\n    await executeFieldPolicies({\n      entityPermission: policies[operation].permission,\n      fields: entity.fields,\n      operation,\n      policiesObj: policies,\n    })\n  }, Promise.resolve())\n\n  return policies\n}\n"],"names":["combineQueries","tabHasName","getEntityPolicies","args","id","type","entity","operations","req","data","locale","payload","user","isLoggedIn","policies","fields","docBeingAccessed","getEntityDoc","where","slug","findGlobal","fallbackLocale","overrideAccess","paginatedRes","find","collection","depth","limit","pagination","equals","docs","undefined","findByID","createAccessPromise","access","accessLevel","disableWhere","operation","policiesObj","mutablePolicies","then","doc","accessResult","permission","executeFieldPolicies","entityPermission","Promise","all","map","field","name","blocks","block","tabs","tab","reduce","priorOperation","entityAccessPromise","resolve"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1263, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1269, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizePermissions.ts"],"sourcesContent":["import type { MarkOptional } from 'ts-essentials'\n\nimport type {\n  CollectionPermission,\n  FieldPermissions,\n  FieldsPermissions,\n  GlobalPermission,\n  Permissions,\n  SanitizedBlocksPermissions,\n  SanitizedFieldPermissions,\n  SanitizedFieldsPermissions,\n  SanitizedPermissions,\n} from '../auth/types.js'\n\nfunction checkAndSanitizeFieldsPermssions(data: FieldsPermissions): boolean {\n  let allFieldPermissionsTrue = true\n  for (const key in data) {\n    if (typeof data[key] === 'object') {\n      if (!checkAndSanitizePermissions(data[key])) {\n        allFieldPermissionsTrue = false\n      } else {\n        ;(data[key] as unknown as SanitizedFieldPermissions) = true\n      }\n    } else if (data[key] !== true) {\n      allFieldPermissionsTrue = false\n    }\n  }\n\n  // If all values are true or it's an empty object, return true\n  return allFieldPermissionsTrue\n}\n\n/**\n * Check if all permissions in a FieldPermissions, CollectionPermission or GlobalPermission object are true.\n * If nested fields or blocks are present, the function will recursively check those as well.\n */\nfunction checkAndSanitizePermissions(\n  data: CollectionPermission | FieldPermissions | GlobalPermission,\n): boolean {\n  /**\n   * Check blocks permissions\n   */\n  let blocksPermissions = true\n  if ('blocks' in data && data.blocks) {\n    for (const blockSlug in data.blocks) {\n      if (typeof data.blocks[blockSlug] === 'object') {\n        for (const key in data.blocks[blockSlug]) {\n          /**\n           * Check fields in nested blocks\n           */\n          if (key === 'fields') {\n            if (data.blocks[blockSlug].fields) {\n              if (!checkAndSanitizeFieldsPermssions(data.blocks[blockSlug].fields)) {\n                blocksPermissions = false\n              } else {\n                ;(data.blocks[blockSlug].fields as unknown as SanitizedFieldsPermissions) = true\n              }\n            }\n          } else {\n            if (typeof data.blocks[blockSlug][key] === 'object') {\n              /**\n               * Check Permissions in nested blocks\n               */\n              if (isPermissionObject(data.blocks[blockSlug][key])) {\n                if (\n                  data.blocks[blockSlug][key]['permission'] === true &&\n                  !('where' in data.blocks[blockSlug][key])\n                ) {\n                  // If the permission is true and there is no where clause, set the key to true\n                  data.blocks[blockSlug][key] = true\n                  continue\n                } else if (\n                  data.blocks[blockSlug][key]['permission'] === true &&\n                  'where' in data.blocks[blockSlug][key]\n                ) {\n                  // otherwise do nothing so we can keep the where clause\n                  blocksPermissions = false\n                } else {\n                  blocksPermissions = false\n                  data.blocks[blockSlug][key] = false\n                  delete data.blocks[blockSlug][key]\n                  continue\n                }\n              } else {\n                throw new Error('Unexpected object in block permissions')\n              }\n            }\n          }\n        }\n      } else if (data.blocks[blockSlug] !== true) {\n        // If any value is not true, return false\n        blocksPermissions = false\n        delete data.blocks[blockSlug]\n      }\n    }\n    if (blocksPermissions) {\n      ;(data.blocks as unknown as SanitizedBlocksPermissions) = true\n    }\n  }\n\n  /**\n   * Check nested Fields permissions\n   */\n  let fieldsPermissions = true\n  if (data.fields) {\n    if (!checkAndSanitizeFieldsPermssions(data.fields)) {\n      fieldsPermissions = false\n    } else {\n      ;(data.fields as unknown as SanitizedFieldsPermissions) = true\n    }\n  }\n\n  /**\n   * Check other Permissions objects (e.g. read, write)\n   */\n  let otherPermissions = true\n  for (const key in data) {\n    if (key === 'fields' || key === 'blocks') {\n      continue\n    }\n    if (typeof data[key] === 'object') {\n      if (isPermissionObject(data[key])) {\n        if (data[key]['permission'] === true && !('where' in data[key])) {\n          // If the permission is true and there is no where clause, set the key to true\n          data[key] = true\n          continue\n        } else if (data[key]['permission'] === true && 'where' in data[key]) {\n          // otherwise do nothing so we can keep the where clause\n          otherPermissions = false\n        } else {\n          otherPermissions = false\n          data[key] = false\n          delete data[key]\n          continue\n        }\n      } else {\n        throw new Error('Unexpected object in fields permissions')\n      }\n    } else if (data[key] !== true) {\n      // If any value is not true, return false\n      otherPermissions = false\n    }\n  }\n\n  // If all values are true or it's an empty object, return true\n  return fieldsPermissions && blocksPermissions && otherPermissions\n}\n\n/**\n * Check if an object is a permission object.\n */\nfunction isPermissionObject(data: unknown): boolean {\n  return typeof data === 'object' && 'permission' in data && typeof data['permission'] === 'boolean'\n}\n\n/**\n * Recursively remove empty objects from an object.\n */\nfunction cleanEmptyObjects(obj: any): void {\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] === 'object' && obj[key] !== null) {\n      // Recursive call\n      cleanEmptyObjects(obj[key])\n      if (Object.keys(obj[key]).length === 0) {\n        // Delete the key if the object is empty\n        delete obj[key]\n      }\n    } else if (obj[key] === null || obj[key] === undefined) {\n      delete obj[key]\n    }\n  })\n}\n\nexport function recursivelySanitizeCollections(obj: Permissions['collections']): void {\n  if (typeof obj !== 'object') {\n    return\n  }\n\n  const collectionPermissions = Object.values(obj)\n\n  for (const collectionPermission of collectionPermissions) {\n    checkAndSanitizePermissions(collectionPermission)\n  }\n}\n\nexport function recursivelySanitizeGlobals(obj: Permissions['globals']): void {\n  if (typeof obj !== 'object') {\n    return\n  }\n\n  const globalPermissions = Object.values(obj)\n\n  for (const globalPermission of globalPermissions) {\n    checkAndSanitizePermissions(globalPermission)\n  }\n}\n\n/**\n * Recursively remove empty objects and false values from an object.\n */\nexport function sanitizePermissions(\n  data: MarkOptional<Permissions, 'canAccessAdmin'>,\n): SanitizedPermissions {\n  if (data.canAccessAdmin === false) {\n    delete data.canAccessAdmin\n  }\n\n  if (data.collections) {\n    recursivelySanitizeCollections(data.collections)\n  }\n\n  if (data.globals) {\n    recursivelySanitizeGlobals(data.globals)\n  }\n\n  // Run clean up of empty objects at the end\n  cleanEmptyObjects(data)\n\n  return data as unknown as SanitizedPermissions\n}\n"],"names":["checkAndSanitizeFieldsPermssions","data","allFieldPermissionsTrue","key","checkAndSanitizePermissions","blocksPermissions","blocks","blockSlug","fields","isPermissionObject","Error","fieldsPermissions","otherPermissions","cleanEmptyObjects","obj","Object","keys","forEach","length","undefined","recursivelySanitizeCollections","collectionPermissions","values","collectionPermission","recursivelySanitizeGlobals","globalPermissions","globalPermission","sanitizePermissions","canAccessAdmin","collections","globals"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1445, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1451, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getRequestEntity.ts"],"sourcesContent":["import type { Collection } from '../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from '../errors/APIError.js'\n\nexport const getRequestCollection = (req: PayloadRequest): Collection => {\n  const collectionSlug = req.routeParams.collection\n\n  if (typeof collectionSlug !== 'string') {\n    throw new APIError(`No collection was specified`, 400)\n  }\n\n  const collection = req.payload.collections[collectionSlug]\n\n  if (!collection) {\n    throw new APIError(`Collection with the slug ${collectionSlug} was not found`, 404)\n  }\n\n  return collection\n}\n\nexport const getRequestCollectionWithID = <T extends boolean>(\n  req: PayloadRequest,\n  {\n    disableSanitize,\n    optionalID,\n  }: {\n    disableSanitize?: T\n    optionalID?: boolean\n  } = {},\n): {\n  collection: Collection\n  id: T extends true ? string : number | string\n} => {\n  const collection = getRequestCollection(req)\n  const id = req.routeParams.id\n\n  if (typeof id !== 'string') {\n    if (optionalID) {\n      return {\n        id: undefined,\n        collection,\n      }\n    }\n\n    throw new APIError(`ID was not specified`, 400)\n  }\n\n  if (disableSanitize === true) {\n    return {\n      id,\n      collection,\n    }\n  }\n\n  let sanitizedID: number | string = id\n\n  // If default db ID type is a number, we should sanitize\n  let shouldSanitize = Boolean(req.payload.db.defaultIDType === 'number')\n\n  // UNLESS the customIDType for this collection is text.... then we leave it\n  if (shouldSanitize && collection.customIDType === 'text') {\n    shouldSanitize = false\n  }\n\n  // If we still should sanitize, parse float\n  if (shouldSanitize) {\n    sanitizedID = parseFloat(sanitizedID)\n  }\n\n  return {\n    // @ts-expect-error generic return\n    id: sanitizedID,\n    collection,\n  }\n}\n\nexport const getRequestGlobal = (req: PayloadRequest): SanitizedGlobalConfig => {\n  const globalSlug = req.routeParams.global\n\n  if (typeof globalSlug !== 'string') {\n    throw new APIError(`No global was specified`, 400)\n  }\n\n  const globalConfig = req.payload.globals.config.find((each) => each.slug === globalSlug)\n\n  if (!globalConfig) {\n    throw new APIError(`Global with the slug ${globalSlug} was not found`, 404)\n  }\n\n  return globalConfig\n}\n"],"names":["APIError","getRequestCollection","req","collectionSlug","routeParams","collection","payload","collections","getRequestCollectionWithID","disableSanitize","optionalID","id","undefined","sanitizedID","shouldSanitize","Boolean","db","defaultIDType","customIDType","parseFloat","getRequestGlobal","globalSlug","global","globalConfig","globals","config","find","each","slug"],"mappings":";;;;;AAIA,SAASA,QAAQ,QAAQ,wBAAuB;;AAEzC,MAAMC,uBAAuB,CAACC;IACnC,MAAMC,iBAAiBD,IAAIE,WAAW,CAACC,UAAU;IAEjD,IAAI,OAAOF,mBAAmB,UAAU;QACtC,MAAM,kXAAIH,WAAAA,CAAS,CAAC,2BAA2B,CAAC,EAAE;IACpD;IAEA,MAAMK,aAAaH,IAAII,OAAO,CAACC,WAAW,CAACJ,eAAe;IAE1D,IAAI,CAACE,YAAY;QACf,MAAM,kXAAIL,WAAAA,CAAS,CAAC,yBAAyB,EAAEG,eAAe,cAAc,CAAC,EAAE;IACjF;IAEA,OAAOE;AACT,EAAC;AAEM,MAAMG,6BAA6B,CACxCN,KACA,EACEO,eAAe,EACfC,UAAU,EAIX,GAAG,CAAC,CAAC;IAKN,MAAML,aAAaJ,qBAAqBC;IACxC,MAAMS,KAAKT,IAAIE,WAAW,CAACO,EAAE;IAE7B,IAAI,OAAOA,OAAO,UAAU;QAC1B,IAAID,YAAY;YACd,OAAO;gBACLC,IAAIC;gBACJP;YACF;QACF;QAEA,MAAM,kXAAIL,WAAAA,CAAS,CAAC,oBAAoB,CAAC,EAAE;IAC7C;IAEA,IAAIS,oBAAoB,MAAM;QAC5B,OAAO;YACLE;YACAN;QACF;IACF;IAEA,IAAIQ,cAA+BF;IAEnC,wDAAwD;IACxD,IAAIG,iBAAiBC,QAAQb,IAAII,OAAO,CAACU,EAAE,CAACC,aAAa,KAAK;IAE9D,2EAA2E;IAC3E,IAAIH,kBAAkBT,WAAWa,YAAY,KAAK,QAAQ;QACxDJ,iBAAiB;IACnB;IAEA,2CAA2C;IAC3C,IAAIA,gBAAgB;QAClBD,cAAcM,WAAWN;IAC3B;IAEA,OAAO;QACL,kCAAkC;QAClCF,IAAIE;QACJR;IACF;AACF,EAAC;AAEM,MAAMe,mBAAmB,CAAClB;IAC/B,MAAMmB,aAAanB,IAAIE,WAAW,CAACkB,MAAM;IAEzC,IAAI,OAAOD,eAAe,UAAU;QAClC,MAAM,kXAAIrB,WAAAA,CAAS,CAAC,uBAAuB,CAAC,EAAE;IAChD;IAEA,MAAMuB,eAAerB,IAAII,OAAO,CAACkB,OAAO,CAACC,MAAM,CAACC,IAAI,CAAC,CAACC,OAASA,KAAKC,IAAI,KAAKP;IAE7E,IAAI,CAACE,cAAc;QACjB,MAAM,kXAAIvB,WAAAA,CAAS,CAAC,qBAAqB,EAAEqB,WAAW,cAAc,CAAC,EAAE;IACzE;IAEA,OAAOE;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 1515, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1521, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeInternalFields.ts"],"sourcesContent":["const sanitizeInternalFields = <T extends Record<string, unknown>>(incomingDoc: T): T => {\n  // Create a new object to hold the sanitized fields\n  const newDoc: Record<string, unknown> = {}\n\n  for (const key in incomingDoc) {\n    const val = incomingDoc[key]\n    if (key === '_id') {\n      newDoc['id'] = val\n    } else if (key !== '__v') {\n      newDoc[key] = val\n    }\n  }\n\n  return newDoc as T\n}\n\nexport default sanitizeInternalFields\n"],"names":["sanitizeInternalFields","incomingDoc","newDoc","key","val"],"mappings":";;;AAAA,MAAMA,yBAAyB,CAAoCC;IACjE,mDAAmD;IACnD,MAAMC,SAAkC,CAAC;IAEzC,IAAK,MAAMC,OAAOF,YAAa;QAC7B,MAAMG,MAAMH,WAAW,CAACE,IAAI;QAC5B,IAAIA,QAAQ,OAAO;YACjBD,MAAM,CAAC,KAAK,GAAGE;QACjB,OAAO,IAAID,QAAQ,OAAO;YACxBD,MAAM,CAACC,IAAI,GAAGC;QAChB;IACF;IAEA,OAAOF;AACT;uCAEeF,uBAAsB","ignoreList":[0]}},
    {"offset": {"line": 1539, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1545, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/deepCopyObject.ts"],"sourcesContent":["import type { JsonValue } from '../types/index.js'\n\n/*\nMain deepCopyObject handling - from rfdc: https://github.com/davidmarkclements/rfdc/blob/master/index.js\n\nCopyright 2019 \"David Mark Clements <david.mark.clements@gmail.com>\"\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\ndocumentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\nto permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions\nof the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\nTO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\nTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\nCONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE.\n*/\n\nfunction copyBuffer(cur) {\n  if (cur instanceof Buffer) {\n    return Buffer.from(cur)\n  }\n\n  return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length)\n}\n\nconst constructorHandlers = new Map()\nconstructorHandlers.set(Date, (o) => new Date(o))\nconstructorHandlers.set(Map, (o, fn) => new Map(cloneArray<any>(Array.from(o), fn)))\nconstructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\nconstructorHandlers.set(RegExp, (regex: RegExp) => new RegExp(regex.source, regex.flags))\n\nlet handler = null\n\nfunction cloneArray<T>(a: T, fn): T {\n  const keys = Object.keys(a)\n  const a2 = new Array(keys.length)\n  for (let i = 0; i < keys.length; i++) {\n    const k = keys[i]\n    const cur = a[k]\n    if (typeof cur !== 'object' || cur === null) {\n      a2[k] = cur\n    } else if (cur instanceof RegExp) {\n      a2[k] = new RegExp(cur.source, cur.flags)\n    } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n      a2[k] = handler(cur, fn)\n    } else if (ArrayBuffer.isView(cur)) {\n      a2[k] = copyBuffer(cur)\n    } else {\n      a2[k] = fn(cur)\n    }\n  }\n  return a2 as T\n}\n\nexport const deepCopyObject = <T>(o: T): T => {\n  if (typeof o !== 'object' || o === null) {\n    return o\n  }\n  if (Array.isArray(o)) {\n    return cloneArray(o, deepCopyObject)\n  }\n  if (o instanceof RegExp) {\n    return new RegExp(o.source, o.flags) as T\n  }\n\n  if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n    return handler(o, deepCopyObject)\n  }\n  const o2 = {}\n  for (const k in o) {\n    if (Object.hasOwnProperty.call(o, k) === false) {\n      continue\n    }\n    const cur = o[k]\n    if (typeof cur !== 'object' || cur === null) {\n      o2[k as string] = cur\n    } else if (cur instanceof RegExp) {\n      o2[k as string] = new RegExp(cur.source, cur.flags)\n    } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n      o2[k as string] = handler(cur, deepCopyObject)\n    } else if (ArrayBuffer.isView(cur)) {\n      o2[k as string] = copyBuffer(cur)\n    } else {\n      o2[k as string] = deepCopyObject(cur)\n    }\n  }\n  return o2 as T\n}\n\n/*\nFast deepCopyObjectSimple handling - from fast-json-clone: https://github.com/rhysd/fast-json-clone\n\nBenchmark: https://github.com/AlessioGr/fastest-deep-clone-json/blob/main/test/benchmark.js\n*/\n\n/**\n * A deepCopyObject implementation which only works for JSON objects and arrays, and is faster than\n * JSON.parse(JSON.stringify(obj))\n *\n * @param value The JSON value to be cloned. There are two invariants. 1) It must not contain circles\n *              as JSON does not allow it. This function will cause infinite loop for such values by\n *              design. 2) It must contain JSON values only. Other values like `Date`, `Regexp`, `Map`,\n *              `Set`, `Buffer`, ... are not allowed.\n * @returns The cloned JSON value.\n */\nexport function deepCopyObjectSimple<T extends JsonValue>(value: T, filterUndefined = false): T {\n  if (typeof value !== 'object' || value === null) {\n    return value\n  } else if (Array.isArray(value)) {\n    return value.map((e) =>\n      typeof e !== 'object' || e === null ? e : deepCopyObjectSimple(e, filterUndefined),\n    ) as T\n  } else {\n    if (value instanceof Date) {\n      return new Date(value) as unknown as T\n    }\n    const ret: { [key: string]: T } = {}\n    for (const k in value) {\n      const v = value[k]\n      if (filterUndefined && v === undefined) {\n        continue\n      }\n      ret[k] =\n        typeof v !== 'object' || v === null\n          ? v\n          : (deepCopyObjectSimple(v as T, filterUndefined) as any)\n    }\n    return ret as unknown as T\n  }\n}\n\nexport function deepCopyObjectSimpleWithoutReactComponents<T extends JsonValue>(value: T): T {\n  if (\n    typeof value === 'object' &&\n    value !== null &&\n    '$$typeof' in value &&\n    typeof value.$$typeof === 'symbol'\n  ) {\n    return undefined\n  } else if (typeof value !== 'object' || value === null) {\n    return value\n  } else if (Array.isArray(value)) {\n    return value.map((e) =>\n      typeof e !== 'object' || e === null ? e : deepCopyObjectSimpleWithoutReactComponents(e),\n    ) as T\n  } else {\n    if (value instanceof Date) {\n      return new Date(value) as unknown as T\n    }\n    const ret: { [key: string]: T } = {}\n    for (const k in value) {\n      const v = value[k]\n      ret[k] =\n        typeof v !== 'object' || v === null\n          ? v\n          : (deepCopyObjectSimpleWithoutReactComponents(v as T) as any)\n    }\n    return ret as unknown as T\n  }\n}\n\n/**\n * A deepCopyObject implementation which is slower than deepCopyObject, but more correct.\n * Can be used if correctness is more important than speed. Supports circular dependencies\n */\nexport function deepCopyObjectComplex<T>(object: T, cache: WeakMap<any, any> = new WeakMap()): T {\n  if (object === null) {\n    return null\n  }\n\n  if (cache.has(object)) {\n    return cache.get(object)\n  }\n\n  // Handle File\n  if (object instanceof File) {\n    return object as unknown as T\n  }\n\n  // Handle Date\n  if (object instanceof Date) {\n    return new Date(object.getTime()) as unknown as T\n  }\n\n  // Handle RegExp\n  if (object instanceof RegExp) {\n    return new RegExp(object.source, object.flags) as unknown as T\n  }\n\n  // Handle Map\n  if (object instanceof Map) {\n    const clonedMap = new Map()\n    cache.set(object, clonedMap)\n    for (const [key, value] of object.entries()) {\n      clonedMap.set(key, deepCopyObjectComplex(value, cache))\n    }\n    return clonedMap as unknown as T\n  }\n\n  // Handle Set\n  if (object instanceof Set) {\n    const clonedSet = new Set()\n    cache.set(object, clonedSet)\n    for (const value of object.values()) {\n      clonedSet.add(deepCopyObjectComplex(value, cache))\n    }\n    return clonedSet as unknown as T\n  }\n\n  // Handle Array and Object\n  if (typeof object === 'object' && object !== null) {\n    if ('$$typeof' in object && typeof object.$$typeof === 'symbol') {\n      return object\n    }\n\n    const clonedObject: any = Array.isArray(object)\n      ? []\n      : Object.create(Object.getPrototypeOf(object))\n    cache.set(object, clonedObject)\n\n    for (const key in object) {\n      if (\n        Object.prototype.hasOwnProperty.call(object, key) ||\n        Object.getOwnPropertySymbols(object).includes(key as any)\n      ) {\n        clonedObject[key] = deepCopyObjectComplex(object[key], cache)\n      }\n    }\n\n    return clonedObject as T\n  }\n\n  // Handle all other cases\n  return object\n}\n"],"names":["copyBuffer","cur","Buffer","from","constructor","buffer","slice","byteOffset","length","constructorHandlers","Map","set","Date","o","fn","cloneArray","Array","Set","RegExp","regex","source","flags","handler","a","keys","Object","a2","i","k","get","ArrayBuffer","isView","deepCopyObject","isArray","o2","hasOwnProperty","call","deepCopyObjectSimple","value","filterUndefined","map","e","ret","v","undefined","deepCopyObjectSimpleWithoutReactComponents","$$typeof","deepCopyObjectComplex","object","cache","WeakMap","has","File","getTime","clonedMap","key","entries","clonedSet","values","add","clonedObject","create","getPrototypeOf","prototype","getOwnPropertySymbols","includes"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1727, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1733, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isNumber.ts"],"sourcesContent":["export function isNumber(value: unknown): value is number {\n  if (value === null || value === undefined || (typeof value === 'string' && value.trim() === '')) {\n    return false\n  }\n\n  return !Number.isNaN(Number(value))\n}\n"],"names":["isNumber","value","undefined","trim","Number","isNaN"],"mappings":";;;AAAO,SAASA,SAASC,KAAc;IACrC,IAAIA,UAAU,QAAQA,UAAUC,aAAc,OAAOD,UAAU,YAAYA,MAAME,IAAI,OAAO,IAAK;QAC/F,OAAO;IACT;IAEA,OAAO,CAACC,OAAOC,KAAK,CAACD,OAAOH;AAC9B","ignoreList":[0]}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1748, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/parseCookies.ts"],"sourcesContent":["import { APIError } from '../errors/APIError.js'\n\nexport const parseCookies = (headers: Request['headers']): Map<string, string> => {\n  const list = new Map<string, string>()\n  const rc = headers.get('Cookie')\n\n  if (rc) {\n    rc.split(';').forEach((cookie) => {\n      const parts = cookie.split('=')\n      const key = parts.shift().trim()\n      const encodedValue = parts.join('=')\n\n      try {\n        const decodedValue = decodeURI(encodedValue)\n        list.set(key, decodedValue)\n      } catch (e) {\n        throw new APIError(`Error decoding cookie value for key ${key}: ${e.message}`)\n      }\n    })\n  }\n\n  return list\n}\n"],"names":["APIError","parseCookies","headers","list","Map","rc","get","split","forEach","cookie","parts","key","shift","trim","encodedValue","join","decodedValue","decodeURI","set","e","message"],"mappings":";;;AAAA,SAASA,QAAQ,QAAQ,wBAAuB;;AAEzC,MAAMC,eAAe,CAACC;IAC3B,MAAMC,OAAO,IAAIC;IACjB,MAAMC,KAAKH,QAAQI,GAAG,CAAC;IAEvB,IAAID,IAAI;QACNA,GAAGE,KAAK,CAAC,KAAKC,OAAO,CAAC,CAACC;YACrB,MAAMC,QAAQD,OAAOF,KAAK,CAAC;YAC3B,MAAMI,MAAMD,MAAME,KAAK,GAAGC,IAAI;YAC9B,MAAMC,eAAeJ,MAAMK,IAAI,CAAC;YAEhC,IAAI;gBACF,MAAMC,eAAeC,UAAUH;gBAC/BX,KAAKe,GAAG,CAACP,KAAKK;YAChB,EAAE,OAAOG,GAAG;gBACV,MAAM,kXAAInB,WAAAA,CAAS,CAAC,oCAAoC,EAAEW,IAAI,EAAE,EAAEQ,EAAEC,OAAO,EAAE;YAC/E;QACF;IACF;IAEA,OAAOjB;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 1771, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1777, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isReactComponent.ts"],"sourcesContent":["import type React from 'react'\n\nconst clientRefSymbol = Symbol.for('react.client.reference')\n\nexport function isReactServerComponentOrFunction<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  if (component === null || component === undefined) {\n    return false\n  }\n  const hasClientComponentSymbol = component.$$typeof == clientRefSymbol\n\n  const isFunctionalComponent = typeof component === 'function'\n  // Anonymous functions are Client Components in Turbopack. RSCs should have a name\n  const isAnonymousFunction = typeof component === 'function' && component.name === ''\n\n  const isRSC = isFunctionalComponent && !isAnonymousFunction && !hasClientComponentSymbol\n\n  return isRSC\n}\n\nexport function isReactClientComponent<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  if (component === null || component === undefined) {\n    return false\n  }\n  return !isReactServerComponentOrFunction(component) && component.$$typeof == clientRefSymbol\n}\n\nexport function isReactComponentOrFunction<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  return isReactServerComponentOrFunction(component) || isReactClientComponent(component)\n}\n"],"names":["clientRefSymbol","Symbol","for","isReactServerComponentOrFunction","component","undefined","hasClientComponentSymbol","$$typeof","isFunctionalComponent","isAnonymousFunction","name","isRSC","isReactClientComponent","isReactComponentOrFunction"],"mappings":";;;;;AAEA,MAAMA,kBAAkBC,OAAOC,GAAG,CAAC;AAE5B,SAASC,iCACdC,SAAoC;IAEpC,IAAIA,cAAc,QAAQA,cAAcC,WAAW;QACjD,OAAO;IACT;IACA,MAAMC,2BAA2BF,UAAUG,QAAQ,IAAIP;IAEvD,MAAMQ,wBAAwB,OAAOJ,cAAc;IACnD,kFAAkF;IAClF,MAAMK,sBAAsB,OAAOL,cAAc,cAAcA,UAAUM,IAAI,KAAK;IAElF,MAAMC,QAAQH,yBAAyB,CAACC,uBAAuB,CAACH;IAEhE,OAAOK;AACT;AAEO,SAASC,uBACdR,SAAoC;IAEpC,IAAIA,cAAc,QAAQA,cAAcC,WAAW;QACjD,OAAO;IACT;IACA,OAAO,CAACF,iCAAiCC,cAAcA,UAAUG,QAAQ,IAAIP;AAC/E;AAEO,SAASa,2BACdT,SAAoC;IAEpC,OAAOD,iCAAiCC,cAAcQ,uBAAuBR;AAC/E","ignoreList":[0]}},
    {"offset": {"line": 1803, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1809, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isPlainObject.ts"],"sourcesContent":["import { isReactComponentOrFunction } from './isReactComponent.js'\n\nexport function isPlainObject(o: any): boolean {\n  // Is this a React component?\n  if (isReactComponentOrFunction(o)) {\n    return false\n  }\n\n  // from https://github.com/fastify/deepmerge/blob/master/index.js#L77\n  return typeof o === 'object' && o !== null && !(o instanceof RegExp) && !(o instanceof Date)\n}\n"],"names":["isReactComponentOrFunction","isPlainObject","o","RegExp","Date"],"mappings":";;;AAAA,SAASA,0BAA0B,QAAQ,wBAAuB;;AAE3D,SAASC,cAAcC,CAAM;IAClC,6BAA6B;IAC7B,iYAAIF,6BAAAA,EAA2BE,IAAI;QACjC,OAAO;IACT;IAEA,qEAAqE;IACrE,OAAO,OAAOA,MAAM,YAAYA,MAAM,QAAQ,CAAEA,CAAAA,aAAaC,MAAK,KAAM,CAAED,CAAAA,aAAaE,IAAG;AAC5F","ignoreList":[0]}},
    {"offset": {"line": 1822, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1828, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/deepMerge.ts"],"sourcesContent":["import deepMerge from 'deepmerge'\n\nimport { isPlainObject } from './isPlainObject.js'\n\nexport { deepMerge }\n/**\n * Fully-featured deepMerge.\n *\n * Array handling: Arrays in the target object are combined with the source object's arrays.\n */\nexport function deepMergeWithCombinedArrays<T extends object>(\n  obj1: object,\n  obj2: object,\n  options: deepMerge.Options = {},\n): T {\n  return deepMerge<T>(obj1, obj2, {\n    arrayMerge: (target, source, options) => {\n      const destination = target.slice()\n\n      source.forEach((item, index) => {\n        if (typeof destination[index] === 'undefined') {\n          destination[index] = options.cloneUnlessOtherwiseSpecified(item, options)\n        } else if (options.isMergeableObject(item)) {\n          destination[index] = deepMerge(target[index], item, options)\n        } else if (target.indexOf(item) === -1) {\n          destination.push(item)\n        }\n      })\n      return destination\n    },\n    ...options,\n  })\n}\n\n/**\n * Fully-featured deepMerge.\n *\n * Array handling: Arrays in the target object are replaced by the source object's arrays.\n */\nexport function deepMergeWithSourceArrays<T extends object>(obj1: object, obj2: object): T {\n  return deepMerge<T>(obj1, obj2, { arrayMerge: (_, source) => source })\n}\n\n/**\n * Fully-featured deepMerge. Does not clone React components by default.\n */\nexport function deepMergeWithReactComponents<T extends object>(obj1: object, obj2: object): T {\n  return deepMerge<T>(obj1, obj2, {\n    isMergeableObject: isPlainObject,\n  })\n}\n"],"names":["deepMerge","isPlainObject","deepMergeWithCombinedArrays","obj1","obj2","options","arrayMerge","target","source","destination","slice","forEach","item","index","cloneUnlessOtherwiseSpecified","isMergeableObject","indexOf","push","deepMergeWithSourceArrays","_","deepMergeWithReactComponents"],"mappings":";;;;;AAAA,OAAOA,eAAe,YAAW;AAEjC,SAASC,aAAa,QAAQ,qBAAoB;;;;AAQ3C,SAASC,4BACdC,IAAY,EACZC,IAAY,EACZC,UAA6B,CAAC,CAAC;IAE/B,4MAAOL,UAAAA,EAAaG,MAAMC,MAAM;QAC9BE,YAAY,CAACC,QAAQC,QAAQH;YAC3B,MAAMI,cAAcF,OAAOG,KAAK;YAEhCF,OAAOG,OAAO,CAAC,CAACC,MAAMC;gBACpB,IAAI,OAAOJ,WAAW,CAACI,MAAM,KAAK,aAAa;oBAC7CJ,WAAW,CAACI,MAAM,GAAGR,QAAQS,6BAA6B,CAACF,MAAMP;gBACnE,OAAO,IAAIA,QAAQU,iBAAiB,CAACH,OAAO;oBAC1CH,WAAW,CAACI,MAAM,wMAAGb,UAAAA,EAAUO,MAAM,CAACM,MAAM,EAAED,MAAMP;gBACtD,OAAO,IAAIE,OAAOS,OAAO,CAACJ,UAAU,CAAC,GAAG;oBACtCH,YAAYQ,IAAI,CAACL;gBACnB;YACF;YACA,OAAOH;QACT;QACA,GAAGJ,OAAO;IACZ;AACF;AAOO,SAASa,0BAA4Cf,IAAY,EAAEC,IAAY;IACpF,4MAAOJ,UAAAA,EAAaG,MAAMC,MAAM;QAAEE,YAAY,CAACa,GAAGX,SAAWA;IAAO;AACtE;AAKO,SAASY,6BAA+CjB,IAAY,EAAEC,IAAY;IACvF,4MAAOJ,UAAAA,EAAaG,MAAMC,MAAM;QAC9BW,yYAAmBd,gBAAAA;IACrB;AACF","ignoreList":[0]}},
    {"offset": {"line": 1866, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1872, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/formatLabels.ts"],"sourcesContent":["import pluralize from 'pluralize'\nconst { isPlural, singular } = pluralize\n\nconst capitalizeFirstLetter = (string: string): string =>\n  string.charAt(0).toUpperCase() + string.slice(1)\n\nconst toWords = (inputString: string, joinWords = false): string => {\n  const notNullString = inputString || ''\n  const trimmedString = notNullString.trim()\n  const arrayOfStrings = trimmedString.split(/[\\s-]/)\n\n  const splitStringsArray = []\n  arrayOfStrings.forEach((tempString) => {\n    if (tempString !== '') {\n      const splitWords = tempString.split(/(?=[A-Z])/).join(' ')\n      splitStringsArray.push(capitalizeFirstLetter(splitWords))\n    }\n  })\n\n  return joinWords ? splitStringsArray.join('').replace(/\\s/g, '') : splitStringsArray.join(' ')\n}\n\nconst formatLabels = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug)\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nconst formatNames = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug, true)\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nexport { formatLabels, formatNames, toWords }\n"],"names":["pluralize","isPlural","singular","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toWords","inputString","joinWords","notNullString","trimmedString","trim","arrayOfStrings","split","splitStringsArray","forEach","tempString","splitWords","join","push","replace","formatLabels","slug","words","plural","formatNames"],"mappings":";;;;;AAAA,OAAOA,eAAe,YAAW;;AACjC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE,kMAAGF,UAAAA;AAE/B,MAAMG,wBAAwB,CAACC,SAC7BA,OAAOC,MAAM,CAAC,GAAGC,WAAW,KAAKF,OAAOG,KAAK,CAAC;AAEhD,MAAMC,UAAU,CAACC,aAAqBC,YAAY,KAAK;IACrD,MAAMC,gBAAgBF,eAAe;IACrC,MAAMG,gBAAgBD,cAAcE,IAAI;IACxC,MAAMC,iBAAiBF,cAAcG,KAAK,CAAC;IAE3C,MAAMC,oBAAoB,EAAE;IAC5BF,eAAeG,OAAO,CAAC,CAACC;QACtB,IAAIA,eAAe,IAAI;YACrB,MAAMC,aAAaD,WAAWH,KAAK,CAAC,aAAaK,IAAI,CAAC;YACtDJ,kBAAkBK,IAAI,CAAClB,sBAAsBgB;QAC/C;IACF;IAEA,OAAOT,YAAYM,kBAAkBI,IAAI,CAAC,IAAIE,OAAO,CAAC,OAAO,MAAMN,kBAAkBI,IAAI,CAAC;AAC5F;AAEA,MAAMG,eAAe,CAACC;IACpB,MAAMC,QAAQjB,QAAQgB;IACtB,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,2MAAQ1B,UAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN;AAEA,MAAME,cAAc,CAACH;IACnB,MAAMC,QAAQjB,QAAQgB,MAAM;IAC5B,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,2MAAQ1B,UAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN","ignoreList":[0]}},
    {"offset": {"line": 1916, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1922, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/traverseFields.ts"],"sourcesContent":["import type { ArrayField, BlocksField, Field, TabAsField } from '../fields/config/types.js'\n\nimport { fieldHasSubFields } from '../fields/config/types.js'\n\nconst traverseArrayOrBlocksField = ({\n  callback,\n  data,\n  field,\n  fillEmpty,\n  parentRef,\n}: {\n  callback: TraverseFieldsCallback\n  data: Record<string, unknown>[]\n  field: ArrayField | BlocksField\n  fillEmpty: boolean\n  parentRef?: unknown\n}) => {\n  if (fillEmpty) {\n    if (field.type === 'array') {\n      traverseFields({ callback, fields: field.fields, parentRef })\n    }\n    if (field.type === 'blocks') {\n      field.blocks.forEach((block) => {\n        traverseFields({ callback, fields: block.fields, parentRef })\n      })\n    }\n    return\n  }\n  for (const ref of data) {\n    let fields: Field[]\n    if (field.type === 'blocks' && typeof ref?.blockType === 'string') {\n      const block = field.blocks.find((block) => block.slug === ref.blockType)\n      fields = block?.fields\n    } else if (field.type === 'array') {\n      fields = field.fields\n    }\n\n    if (fields) {\n      traverseFields({ callback, fields, fillEmpty, parentRef, ref })\n    }\n  }\n}\n\nexport type TraverseFieldsCallback = (args: {\n  /**\n   * The current field\n   */\n  field: Field | TabAsField\n  /**\n   * Function that when called will skip the current field and continue to the next\n   */\n  next?: () => void\n  /**\n   * The parent reference object\n   */\n  parentRef?: Record<string, unknown> | unknown\n  /**\n   * The current reference object\n   */\n  ref?: Record<string, unknown> | unknown\n}) => boolean | void\n\ntype TraverseFieldsArgs = {\n  callback: TraverseFieldsCallback\n  fields: (Field | TabAsField)[]\n  fillEmpty?: boolean\n  parentRef?: Record<string, unknown> | unknown\n  ref?: Record<string, unknown> | unknown\n}\n\n/**\n * Iterate a recurse an array of fields, calling a callback for each field\n *\n * @param fields\n * @param callback callback called for each field, discontinue looping if callback returns truthy\n * @param fillEmpty fill empty properties to use this without data\n * @param ref the data or any artifacts assigned in the callback during field recursion\n * @param parentRef the data or any artifacts assigned in the callback during field recursion one level up\n */\nexport const traverseFields = ({\n  callback,\n  fields,\n  fillEmpty = true,\n  parentRef = {},\n  ref = {},\n}: TraverseFieldsArgs): void => {\n  fields.some((field) => {\n    let skip = false\n    const next = () => {\n      skip = true\n    }\n\n    if (!ref || typeof ref !== 'object') {\n      return\n    }\n\n    if (callback && callback({ field, next, parentRef, ref })) {\n      return true\n    }\n\n    if (skip) {\n      return false\n    }\n\n    // avoid mutation of ref for all fields\n    let currentRef = ref\n    let currentParentRef = parentRef\n\n    if (field.type === 'tabs' && 'tabs' in field) {\n      for (const tab of field.tabs) {\n        let tabRef = ref\n\n        if (skip) {\n          return false\n        }\n\n        if ('name' in tab && tab.name) {\n          if (!ref[tab.name] || typeof ref[tab.name] !== 'object') {\n            if (fillEmpty) {\n              if (tab.localized) {\n                ref[tab.name] = { en: {} }\n              } else {\n                ref[tab.name] = {}\n              }\n            } else {\n              continue\n            }\n          }\n\n          if (\n            callback &&\n            callback({\n              field: { ...tab, type: 'tab' },\n              next,\n              parentRef: currentParentRef,\n              ref: tabRef,\n            })\n          ) {\n            return true\n          }\n\n          tabRef = tabRef[tab.name]\n\n          if (tab.localized) {\n            for (const key in tabRef as Record<string, unknown>) {\n              if (tabRef[key] && typeof tabRef[key] === 'object') {\n                traverseFields({\n                  callback,\n                  fields: tab.fields,\n                  fillEmpty,\n                  parentRef: currentParentRef,\n                  ref: tabRef[key],\n                })\n              }\n            }\n          }\n        } else {\n          if (\n            callback &&\n            callback({\n              field: { ...tab, type: 'tab' },\n              next,\n              parentRef: currentParentRef,\n              ref: tabRef,\n            })\n          ) {\n            return true\n          }\n        }\n\n        if (!tab.localized) {\n          traverseFields({\n            callback,\n            fields: tab.fields,\n            fillEmpty,\n            parentRef: currentParentRef,\n            ref: tabRef,\n          })\n        }\n\n        if (skip) {\n          return false\n        }\n      }\n\n      return\n    }\n\n    if (field.type !== 'tab' && (fieldHasSubFields(field) || field.type === 'blocks')) {\n      if ('name' in field && field.name) {\n        currentParentRef = currentRef\n        if (!ref[field.name]) {\n          if (fillEmpty) {\n            if (field.type === 'group') {\n              if (field.localized) {\n                ref[field.name] = {\n                  en: {},\n                }\n              } else {\n                ref[field.name] = {}\n              }\n            } else if (field.type === 'array' || field.type === 'blocks') {\n              if (field.localized) {\n                ref[field.name] = {\n                  en: [],\n                }\n              } else {\n                ref[field.name] = []\n              }\n            }\n          } else {\n            return\n          }\n        }\n        currentRef = ref[field.name]\n      }\n\n      if (\n        field.type === 'group' &&\n        field.localized &&\n        currentRef &&\n        typeof currentRef === 'object'\n      ) {\n        for (const key in currentRef as Record<string, unknown>) {\n          if (currentRef[key]) {\n            traverseFields({\n              callback,\n              fields: field.fields,\n              fillEmpty,\n              parentRef: currentParentRef,\n              ref: currentRef[key],\n            })\n          }\n        }\n        return\n      }\n\n      if (\n        (field.type === 'blocks' || field.type === 'array') &&\n        currentRef &&\n        typeof currentRef === 'object'\n      ) {\n        if (field.localized) {\n          if (Array.isArray(currentRef)) {\n            return\n          }\n\n          for (const key in currentRef as Record<string, unknown>) {\n            const localeData = currentRef[key]\n            if (!Array.isArray(localeData)) {\n              continue\n            }\n\n            traverseArrayOrBlocksField({\n              callback,\n              data: localeData,\n              field,\n              fillEmpty,\n              parentRef: currentParentRef,\n            })\n          }\n        } else if (Array.isArray(currentRef)) {\n          traverseArrayOrBlocksField({\n            callback,\n            data: currentRef as Record<string, unknown>[],\n            field,\n            fillEmpty,\n            parentRef: currentParentRef,\n          })\n        }\n      } else if (currentRef && typeof currentRef === 'object' && 'fields' in field) {\n        traverseFields({\n          callback,\n          fields: field.fields,\n          fillEmpty,\n          parentRef: currentParentRef,\n          ref: currentRef,\n        })\n      }\n    }\n  })\n}\n"],"names":["fieldHasSubFields","traverseArrayOrBlocksField","callback","data","field","fillEmpty","parentRef","type","traverseFields","fields","blocks","forEach","block","ref","blockType","find","slug","some","skip","next","currentRef","currentParentRef","tab","tabs","tabRef","name","localized","en","key","Array","isArray","localeData"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2143, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2149, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isolateObjectProperty.ts"],"sourcesContent":["/* eslint-disable no-restricted-exports */\n/**\n * Creates a proxy for the given object that has its own property\n */\nexport default function isolateObjectProperty<T extends object>(\n  object: T,\n  key: (keyof T)[] | keyof T,\n): T {\n  const keys = Array.isArray(key) ? key : [key]\n  const delegate = {} as T\n\n  // Initialize delegate with the keys, if they exist in the original object\n  for (const k of keys) {\n    if (k in object) {\n      delegate[k] = object[k]\n    }\n  }\n\n  const handler: ProxyHandler<T> = {\n    deleteProperty(target, p): boolean {\n      return Reflect.deleteProperty(keys.includes(p as keyof T) ? delegate : target, p)\n    },\n    get(target, p, receiver) {\n      return Reflect.get(keys.includes(p as keyof T) ? delegate : target, p, receiver)\n    },\n    has(target, p) {\n      return Reflect.has(keys.includes(p as keyof T) ? delegate : target, p)\n    },\n    set(target, p, newValue, receiver) {\n      if (keys.includes(p as keyof T)) {\n        // in case of transactionID we must ignore any receiver, because\n        // \"If provided and target does not have a setter for propertyKey, the property will be set on receiver instead.\"\n        return Reflect.set(delegate, p, newValue)\n      } else {\n        return Reflect.set(target, p, newValue, receiver)\n      }\n    },\n  }\n  return new Proxy(object, handler)\n}\n"],"names":["isolateObjectProperty","object","key","keys","Array","isArray","delegate","k","handler","deleteProperty","target","p","Reflect","includes","get","receiver","has","set","newValue","Proxy"],"mappings":"AAAA,wCAAwC,GACxC;;CAEC,GACD;;;AAAe,SAASA,sBACtBC,MAAS,EACTC,GAA0B;IAE1B,MAAMC,OAAOC,MAAMC,OAAO,CAACH,OAAOA,MAAM;QAACA;KAAI;IAC7C,MAAMI,WAAW,CAAC;IAElB,0EAA0E;IAC1E,KAAK,MAAMC,KAAKJ,KAAM;QACpB,IAAII,KAAKN,QAAQ;YACfK,QAAQ,CAACC,EAAE,GAAGN,MAAM,CAACM,EAAE;QACzB;IACF;IAEA,MAAMC,UAA2B;QAC/BC,gBAAeC,MAAM,EAAEC,CAAC;YACtB,OAAOC,QAAQH,cAAc,CAACN,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC;QACjF;QACAG,KAAIJ,MAAM,EAAEC,CAAC,EAAEI,QAAQ;YACrB,OAAOH,QAAQE,GAAG,CAACX,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC,GAAGI;QACzE;QACAC,KAAIN,MAAM,EAAEC,CAAC;YACX,OAAOC,QAAQI,GAAG,CAACb,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC;QACtE;QACAM,KAAIP,MAAM,EAAEC,CAAC,EAAEO,QAAQ,EAAEH,QAAQ;YAC/B,IAAIZ,KAAKU,QAAQ,CAACF,IAAe;gBAC/B,gEAAgE;gBAChE,iHAAiH;gBACjH,OAAOC,QAAQK,GAAG,CAACX,UAAUK,GAAGO;YAClC,OAAO;gBACL,OAAON,QAAQK,GAAG,CAACP,QAAQC,GAAGO,UAAUH;YAC1C;QACF;IACF;IACA,OAAO,IAAII,MAAMlB,QAAQO;AAC3B","ignoreList":[0]}},
    {"offset": {"line": 2187, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2193, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getTranslatedLabel.ts"],"sourcesContent":["import { getTranslation, type I18n } from '@payloadcms/translations'\n\nimport type { LabelFunction, StaticLabel } from '../config/types.js'\n\nexport const getTranslatedLabel = (label: LabelFunction | StaticLabel, i18n?: I18n): string => {\n  if (typeof label === 'function') {\n    return label({ t: i18n.t })\n  }\n\n  if (typeof label === 'object') {\n    return getTranslation(label, i18n)\n  }\n\n  return label\n}\n"],"names":["getTranslation","getTranslatedLabel","label","i18n","t"],"mappings":";;;AAAA,SAASA,cAAc,QAAmB,2BAA0B;;;AAI7D,MAAMC,qBAAqB,CAACC,OAAoCC;IACrE,IAAI,OAAOD,UAAU,YAAY;QAC/B,OAAOA,MAAM;YAAEE,GAAGD,KAAKC,CAAC;QAAC;IAC3B;IAEA,IAAI,OAAOF,UAAU,UAAU;QAC7B,2QAAOF,iBAAAA,EAAeE,OAAOC;IAC/B;IAEA,OAAOD;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2210, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2216, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getLabelFromPath.ts"],"sourcesContent":["export const getLabelFromPath = (path: (number | string)[]): string => {\n  return path\n    .filter((pathSegment) => !(typeof pathSegment === 'string' && pathSegment.includes('_index')))\n    .reduce<string[]>((acc, part) => {\n      if (typeof part === 'number' || (typeof part === 'string' && !isNaN(Number(part)))) {\n        // Convert index to 1-based and format as \"Array 01\", \"Array 02\", etc.\n        const fieldName = acc.pop()\n        acc.push(`${fieldName} ${Number(part) + 1}`)\n      } else {\n        // Capitalize field names\n        acc.push(part.charAt(0).toUpperCase() + part.slice(1))\n      }\n      return acc\n    }, [])\n    .join(' > ')\n}\n"],"names":["getLabelFromPath","path","filter","pathSegment","includes","reduce","acc","part","isNaN","Number","fieldName","pop","push","charAt","toUpperCase","slice","join"],"mappings":";;;AAAO,MAAMA,mBAAmB,CAACC;IAC/B,OAAOA,KACJC,MAAM,CAAC,CAACC,cAAgB,CAAE,CAAA,OAAOA,gBAAgB,YAAYA,YAAYC,QAAQ,CAAC,SAAQ,GAC1FC,MAAM,CAAW,CAACC,KAAKC;QACtB,IAAI,OAAOA,SAAS,YAAa,OAAOA,SAAS,YAAY,CAACC,MAAMC,OAAOF,QAAS;YAClF,sEAAsE;YACtE,MAAMG,YAAYJ,IAAIK,GAAG;YACzBL,IAAIM,IAAI,CAAC,GAAGF,UAAU,CAAC,EAAED,OAAOF,QAAQ,GAAG;QAC7C,OAAO;YACL,yBAAyB;YACzBD,IAAIM,IAAI,CAACL,KAAKM,MAAM,CAAC,GAAGC,WAAW,KAAKP,KAAKQ,KAAK,CAAC;QACrD;QACA,OAAOT;IACT,GAAG,EAAE,EACJU,IAAI,CAAC;AACV,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2232, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2238, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/mapAsync.ts"],"sourcesContent":["export async function mapAsync<T, U>(\n  arr: T[],\n  callbackfn: (item: T, index: number, array: T[]) => Promise<U>,\n): Promise<U[]> {\n  return Promise.all(arr.map(callbackfn))\n}\n"],"names":["mapAsync","arr","callbackfn","Promise","all","map"],"mappings":";;;AAAO,eAAeA,SACpBC,GAAQ,EACRC,UAA8D;IAE9D,OAAOC,QAAQC,GAAG,CAACH,IAAII,GAAG,CAACH;AAC7B","ignoreList":[0]}},
    {"offset": {"line": 2244, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2250, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeSelectParam.ts"],"sourcesContent":["import type { SelectType } from '../types/index.js'\n\n/**\n * Sanitizes REST select query to SelectType\n */\nexport const sanitizeSelectParam = (unsanitizedSelect: unknown): SelectType | undefined => {\n  if (unsanitizedSelect && typeof unsanitizedSelect === 'object') {\n    for (const k in unsanitizedSelect) {\n      if (unsanitizedSelect[k] === 'true') {\n        unsanitizedSelect[k] = true\n      } else if (unsanitizedSelect[k] === 'false') {\n        unsanitizedSelect[k] = false\n      } else if (typeof unsanitizedSelect[k] === 'object') {\n        sanitizeSelectParam(unsanitizedSelect[k])\n      }\n    }\n  }\n\n  return unsanitizedSelect as SelectType\n}\n"],"names":["sanitizeSelectParam","unsanitizedSelect","k"],"mappings":"AAEA;;CAEC,GACD;;;AAAO,MAAMA,sBAAsB,CAACC;IAClC,IAAIA,qBAAqB,OAAOA,sBAAsB,UAAU;QAC9D,IAAK,MAAMC,KAAKD,kBAAmB;YACjC,IAAIA,iBAAiB,CAACC,EAAE,KAAK,QAAQ;gBACnCD,iBAAiB,CAACC,EAAE,GAAG;YACzB,OAAO,IAAID,iBAAiB,CAACC,EAAE,KAAK,SAAS;gBAC3CD,iBAAiB,CAACC,EAAE,GAAG;YACzB,OAAO,IAAI,OAAOD,iBAAiB,CAACC,EAAE,KAAK,UAAU;gBACnDF,oBAAoBC,iBAAiB,CAACC,EAAE;YAC1C;QACF;IACF;IAEA,OAAOD;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2269, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2275, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizePopulateParam.ts"],"sourcesContent":["import type { PopulateType } from '../types/index.js'\n\nimport { sanitizeSelectParam } from './sanitizeSelectParam.js'\n\n/**\n * Sanitizes REST populate query to PopulateType\n */\nexport const sanitizePopulateParam = (unsanitizedPopulate: unknown): PopulateType | undefined => {\n  if (!unsanitizedPopulate || typeof unsanitizedPopulate !== 'object') {\n    return\n  }\n\n  for (const k in unsanitizedPopulate) {\n    unsanitizedPopulate[k] = sanitizeSelectParam(unsanitizedPopulate[k])\n  }\n\n  return unsanitizedPopulate as PopulateType\n}\n"],"names":["sanitizeSelectParam","sanitizePopulateParam","unsanitizedPopulate","k"],"mappings":";;;AAEA,SAASA,mBAAmB,QAAQ,2BAA0B;;AAKvD,MAAMC,wBAAwB,CAACC;IACpC,IAAI,CAACA,uBAAuB,OAAOA,wBAAwB,UAAU;QACnE;IACF;IAEA,IAAK,MAAMC,KAAKD,oBAAqB;QACnCA,mBAAmB,CAACC,EAAE,mYAAGH,sBAAAA,EAAoBE,mBAAmB,CAACC,EAAE;IACrE;IAEA,OAAOD;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2289, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2295, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/checkDocumentLockStatus.ts"],"sourcesContent":["import type { TypeWithID } from '../collections/config/types.js'\nimport type { PaginatedDocs } from '../database/types.js'\nimport type { JsonObject, PayloadRequest } from '../types/index.js'\n\nimport { Locked } from '../errors/index.js'\n\ntype CheckDocumentLockStatusArgs = {\n  collectionSlug?: string\n  globalSlug?: string\n  id?: number | string\n  lockDurationDefault?: number\n  lockErrorMessage?: string\n  overrideLock?: boolean\n  req: PayloadRequest\n}\n\nexport const checkDocumentLockStatus = async ({\n  id,\n  collectionSlug,\n  globalSlug,\n  lockDurationDefault = 300, // Default 5 minutes in seconds\n  lockErrorMessage,\n  overrideLock = true,\n  req,\n}: CheckDocumentLockStatusArgs): Promise<void> => {\n  const { payload } = req\n\n  // Retrieve the lockDocuments property for either collection or global\n  const lockDocumentsProp = collectionSlug\n    ? payload.collections?.[collectionSlug]?.config?.lockDocuments\n    : payload.config?.globals?.find((g) => g.slug === globalSlug)?.lockDocuments\n\n  const isLockingEnabled = lockDocumentsProp !== false\n\n  let lockedDocumentQuery = {}\n\n  if (collectionSlug) {\n    lockedDocumentQuery = {\n      and: [\n        { 'document.relationTo': { equals: collectionSlug } },\n        { 'document.value': { equals: id } },\n      ],\n    }\n  } else if (globalSlug) {\n    lockedDocumentQuery = { globalSlug: { equals: globalSlug } }\n  } else {\n    throw new Error('Either collectionSlug or globalSlug must be provided.')\n  }\n\n  if (!isLockingEnabled) {\n    return\n  }\n\n  // Only perform lock checks if overrideLock is false and locking is enabled\n  if (!overrideLock) {\n    const defaultLockErrorMessage = collectionSlug\n      ? `Document with ID ${id} is currently locked by another user and cannot be modified.`\n      : `Global document with slug \"${globalSlug}\" is currently locked by another user and cannot be modified.`\n\n    const finalLockErrorMessage = lockErrorMessage || defaultLockErrorMessage\n\n    const lockedDocumentResult: PaginatedDocs<JsonObject & TypeWithID> = await payload.db.find({\n      collection: 'payload-locked-documents',\n      limit: 1,\n      pagination: false,\n      req,\n      sort: '-updatedAt',\n      where: lockedDocumentQuery,\n    })\n\n    // If there's a locked document, check lock conditions\n    const lockedDoc = lockedDocumentResult?.docs[0]\n    if (lockedDoc) {\n      const lastEditedAt = new Date(lockedDoc?.updatedAt).getTime()\n      const now = new Date().getTime()\n\n      const lockDuration =\n        typeof lockDocumentsProp === 'object' ? lockDocumentsProp.duration : lockDurationDefault\n\n      const lockDurationInMilliseconds = lockDuration * 1000\n      const currentUserId = req.user?.id\n\n      // document is locked by another user and the lock hasn't expired\n      if (\n        lockedDoc.user?.value !== currentUserId &&\n        now - lastEditedAt <= lockDurationInMilliseconds\n      ) {\n        throw new Locked(finalLockErrorMessage)\n      }\n    }\n  }\n\n  // Perform the delete operation regardless of overrideLock status\n  await payload.db.deleteMany({\n    collection: 'payload-locked-documents',\n    req,\n    where: lockedDocumentQuery,\n  })\n}\n"],"names":["Locked","checkDocumentLockStatus","id","collectionSlug","globalSlug","lockDurationDefault","lockErrorMessage","overrideLock","req","payload","lockDocumentsProp","collections","config","lockDocuments","globals","find","g","slug","isLockingEnabled","lockedDocumentQuery","and","equals","Error","defaultLockErrorMessage","finalLockErrorMessage","lockedDocumentResult","db","collection","limit","pagination","sort","where","lockedDoc","docs","lastEditedAt","Date","updatedAt","getTime","now","lockDuration","duration","lockDurationInMilliseconds","currentUserId","user","value","deleteMany"],"mappings":";;;AAIA,SAASA,MAAM,QAAQ,qBAAoB;;AAYpC,MAAMC,0BAA0B,OAAO,EAC5CC,EAAE,EACFC,cAAc,EACdC,UAAU,EACVC,sBAAsB,GAAG,EACzBC,gBAAgB,EAChBC,eAAe,IAAI,EACnBC,GAAG,EACyB;IAC5B,MAAM,EAAEC,OAAO,EAAE,GAAGD;IAEpB,sEAAsE;IACtE,MAAME,oBAAoBP,iBACtBM,QAAQE,WAAW,EAAE,CAACR,eAAe,EAAES,QAAQC,gBAC/CJ,QAAQG,MAAM,EAAEE,SAASC,KAAK,CAACC,IAAMA,EAAEC,IAAI,KAAKb,aAAaS;IAEjE,MAAMK,mBAAmBR,sBAAsB;IAE/C,IAAIS,sBAAsB,CAAC;IAE3B,IAAIhB,gBAAgB;QAClBgB,sBAAsB;YACpBC,KAAK;gBACH;oBAAE,uBAAuB;wBAAEC,QAAQlB;oBAAe;gBAAE;gBACpD;oBAAE,kBAAkB;wBAAEkB,QAAQnB;oBAAG;gBAAE;aACpC;QACH;IACF,OAAO,IAAIE,YAAY;QACrBe,sBAAsB;YAAEf,YAAY;gBAAEiB,QAAQjB;YAAW;QAAE;IAC7D,OAAO;QACL,MAAM,IAAIkB,MAAM;IAClB;IAEA,IAAI,CAACJ,kBAAkB;QACrB;IACF;IAEA,2EAA2E;IAC3E,IAAI,CAACX,cAAc;QACjB,MAAMgB,0BAA0BpB,iBAC5B,CAAC,iBAAiB,EAAED,GAAG,4DAA4D,CAAC,GACpF,CAAC,2BAA2B,EAAEE,WAAW,6DAA6D,CAAC;QAE3G,MAAMoB,wBAAwBlB,oBAAoBiB;QAElD,MAAME,uBAA+D,MAAMhB,QAAQiB,EAAE,CAACX,IAAI,CAAC;YACzFY,YAAY;YACZC,OAAO;YACPC,YAAY;YACZrB;YACAsB,MAAM;YACNC,OAAOZ;QACT;QAEA,sDAAsD;QACtD,MAAMa,YAAYP,sBAAsBQ,IAAI,CAAC,EAAE;QAC/C,IAAID,WAAW;YACb,MAAME,eAAe,IAAIC,KAAKH,WAAWI,WAAWC,OAAO;YAC3D,MAAMC,MAAM,IAAIH,OAAOE,OAAO;YAE9B,MAAME,eACJ,OAAO7B,sBAAsB,WAAWA,kBAAkB8B,QAAQ,GAAGnC;YAEvE,MAAMoC,6BAA6BF,eAAe;YAClD,MAAMG,gBAAgBlC,IAAImC,IAAI,EAAEzC;YAEhC,iEAAiE;YACjE,IACE8B,UAAUW,IAAI,EAAEC,UAAUF,iBAC1BJ,MAAMJ,gBAAgBO,4BACtB;gBACA,MAAM,gXAAIzC,SAAAA,CAAOwB;YACnB;QACF;IACF;IAEA,iEAAiE;IACjE,MAAMf,QAAQiB,EAAE,CAACmB,UAAU,CAAC;QAC1BlB,YAAY;QACZnB;QACAuB,OAAOZ;IACT;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2366, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2372, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isURLAllowed.ts"],"sourcesContent":["import type { AllowList } from '../uploads/types.js'\n\nexport const isURLAllowed = (url: string, allowList: AllowList): boolean => {\n  try {\n    const parsedUrl = new URL(url)\n\n    return allowList.some((allowItem) => {\n      return Object.entries(allowItem).every(([key, value]) => {\n        // Skip undefined or null values\n        if (!value) {\n          return true\n        }\n        // Compare protocol with colon\n        if (key === 'protocol') {\n          return typeof value === 'string' && parsedUrl.protocol === `${value}:`\n        }\n\n        if (key === 'pathname') {\n          // Convert wildcards to a regex\n          const regexPattern = value\n            .replace(/\\*\\*/g, '.*') // Match any path\n            .replace(/\\*/g, '[^/]*') // Match any part of a path segment\n            .replace(/\\/$/, '(/)?') // Allow optional trailing slash\n          const regex = new RegExp(`^${regexPattern}$`)\n          return regex.test(parsedUrl.pathname)\n        }\n\n        // Default comparison for all other properties (hostname, port, search)\n        return parsedUrl[key as keyof URL] === value\n      })\n    })\n  } catch {\n    return false // If the URL is invalid, deny by default\n  }\n}\n"],"names":["isURLAllowed","url","allowList","parsedUrl","URL","some","allowItem","Object","entries","every","key","value","protocol","regexPattern","replace","regex","RegExp","test","pathname"],"mappings":";;;AAEO,MAAMA,eAAe,CAACC,KAAaC;IACxC,IAAI;QACF,MAAMC,YAAY,IAAIC,IAAIH;QAE1B,OAAOC,UAAUG,IAAI,CAAC,CAACC;YACrB,OAAOC,OAAOC,OAAO,CAACF,WAAWG,KAAK,CAAC,CAAC,CAACC,KAAKC,MAAM;gBAClD,gCAAgC;gBAChC,IAAI,CAACA,OAAO;oBACV,OAAO;gBACT;gBACA,8BAA8B;gBAC9B,IAAID,QAAQ,YAAY;oBACtB,OAAO,OAAOC,UAAU,YAAYR,UAAUS,QAAQ,KAAK,GAAGD,MAAM,CAAC,CAAC;gBACxE;gBAEA,IAAID,QAAQ,YAAY;oBACtB,+BAA+B;oBAC/B,MAAMG,eAAeF,MAClBG,OAAO,CAAC,SAAS,MAAM,iBAAiB;qBACxCA,OAAO,CAAC,OAAO,SAAS,mCAAmC;qBAC3DA,OAAO,CAAC,OAAO,QAAQ,gCAAgC;;oBAC1D,MAAMC,QAAQ,IAAIC,OAAO,CAAC,CAAC,EAAEH,aAAa,CAAC,CAAC;oBAC5C,OAAOE,MAAME,IAAI,CAACd,UAAUe,QAAQ;gBACtC;gBAEA,uEAAuE;gBACvE,OAAOf,SAAS,CAACO,IAAiB,KAAKC;YACzC;QACF;IACF,EAAE,OAAM;QACN,OAAO,MAAM,yCAAyC;;IACxD;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2406, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2412, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeJoinParams.ts"],"sourcesContent":["import type { JoinQuery } from '../types/index.js'\n\nimport { isNumber } from './isNumber.js'\n\n/**\n * Convert request JoinQuery object from strings to numbers\n * @param joins\n */\nexport const sanitizeJoinParams = (\n  joins:\n    | {\n        [schemaPath: string]:\n          | {\n              limit?: unknown\n              sort?: string\n              where?: unknown\n            }\n          | false\n      }\n    | false = {},\n): JoinQuery => {\n  const joinQuery = {}\n\n  Object.keys(joins).forEach((schemaPath) => {\n    if (joins[schemaPath] === 'false' || joins[schemaPath] === false) {\n      joinQuery[schemaPath] = false\n    } else {\n      joinQuery[schemaPath] = {\n        limit: isNumber(joins[schemaPath]?.limit) ? Number(joins[schemaPath].limit) : undefined,\n        sort: joins[schemaPath]?.sort ? joins[schemaPath].sort : undefined,\n        where: joins[schemaPath]?.where ? joins[schemaPath].where : undefined,\n      }\n    }\n  })\n\n  return joinQuery\n}\n"],"names":["isNumber","sanitizeJoinParams","joins","joinQuery","Object","keys","forEach","schemaPath","limit","Number","undefined","sort","where"],"mappings":";;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAMjC,MAAMC,qBAAqB,CAChCC,QAUY,CAAC,CAAC;IAEd,MAAMC,YAAY,CAAC;IAEnBC,OAAOC,IAAI,CAACH,OAAOI,OAAO,CAAC,CAACC;QAC1B,IAAIL,KAAK,CAACK,WAAW,KAAK,WAAWL,KAAK,CAACK,WAAW,KAAK,OAAO;YAChEJ,SAAS,CAACI,WAAW,GAAG;QAC1B,OAAO;YACLJ,SAAS,CAACI,WAAW,GAAG;gBACtBC,4XAAOR,WAAAA,EAASE,KAAK,CAACK,WAAW,EAAEC,SAASC,OAAOP,KAAK,CAACK,WAAW,CAACC,KAAK,IAAIE;gBAC9EC,MAAMT,KAAK,CAACK,WAAW,EAAEI,OAAOT,KAAK,CAACK,WAAW,CAACI,IAAI,GAAGD;gBACzDE,OAAOV,KAAK,CAACK,WAAW,EAAEK,QAAQV,KAAK,CAACK,WAAW,CAACK,KAAK,GAAGF;YAC9D;QACF;IACF;IAEA,OAAOP;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2438, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/validateMimeType.ts"],"sourcesContent":["export const validateMimeType = (mimeType: string, allowedMimeTypes: string[]): boolean => {\n  const cleanedMimeTypes = allowedMimeTypes.map((v) => v.replace('*', ''))\n  return cleanedMimeTypes.some((cleanedMimeType) => mimeType.startsWith(cleanedMimeType))\n}\n"],"names":["validateMimeType","mimeType","allowedMimeTypes","cleanedMimeTypes","map","v","replace","some","cleanedMimeType","startsWith"],"mappings":";;;AAAO,MAAMA,mBAAmB,CAACC,UAAkBC;IACjD,MAAMC,mBAAmBD,iBAAiBE,GAAG,CAAC,CAACC,IAAMA,EAAEC,OAAO,CAAC,KAAK;IACpE,OAAOH,iBAAiBI,IAAI,CAAC,CAACC,kBAAoBP,SAASQ,UAAU,CAACD;AACxE,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2445, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2451, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/flattenTopLevelFields.ts"],"sourcesContent":["import type { ClientTab } from '../admin/fields/Tabs.js'\nimport type { ClientField } from '../fields/config/client.js'\nimport type {\n  Field,\n  FieldAffectingData,\n  FieldAffectingDataClient,\n  FieldPresentationalOnly,\n  FieldPresentationalOnlyClient,\n  Tab,\n} from '../fields/config/types.js'\n\nimport {\n  fieldAffectsData,\n  fieldHasSubFields,\n  fieldIsPresentationalOnly,\n  tabHasName,\n} from '../fields/config/types.js'\n\ntype FlattenedField<TField> = TField extends ClientField\n  ? FieldAffectingDataClient | FieldPresentationalOnlyClient\n  : FieldAffectingData | FieldPresentationalOnly\n\ntype TabType<TField> = TField extends ClientField ? ClientTab : Tab\n\n/**\n * Flattens a collection's fields into a single array of fields, as long\n * as the fields do not affect data.\n *\n * @param fields\n * @param keepPresentationalFields if true, will skip flattening fields that are presentational only\n */\nfunction flattenFields<TField extends ClientField | Field>(\n  fields: TField[],\n  keepPresentationalFields?: boolean,\n): FlattenedField<TField>[] {\n  return fields.reduce<FlattenedField<TField>[]>((acc, field) => {\n    if (fieldAffectsData(field) || (keepPresentationalFields && fieldIsPresentationalOnly(field))) {\n      acc.push(field as FlattenedField<TField>)\n    } else if (fieldHasSubFields(field)) {\n      acc.push(...flattenFields(field.fields as TField[], keepPresentationalFields))\n    } else if (field.type === 'tabs' && 'tabs' in field) {\n      return [\n        ...acc,\n        ...field.tabs.reduce<FlattenedField<TField>[]>((tabFields, tab: TabType<TField>) => {\n          if (tabHasName(tab)) {\n            return [...tabFields, { ...tab, type: 'tab' } as unknown as FlattenedField<TField>]\n          } else {\n            return [\n              ...tabFields,\n              ...flattenFields(tab.fields as TField[], keepPresentationalFields),\n            ]\n          }\n        }, []),\n      ]\n    }\n\n    return acc\n  }, [])\n}\n\nexport default flattenFields\n"],"names":["fieldAffectsData","fieldHasSubFields","fieldIsPresentationalOnly","tabHasName","flattenFields","fields","keepPresentationalFields","reduce","acc","field","push","type","tabs","tabFields","tab"],"mappings":";;;AAWA,SACEA,gBAAgB,EAChBC,iBAAiB,EACjBC,yBAAyB,EACzBC,UAAU,QACL,4BAA2B;;AAQlC;;;;;;CAMC,GACD,SAASC,cACPC,MAAgB,EAChBC,wBAAkC;IAElC,OAAOD,OAAOE,MAAM,CAA2B,CAACC,KAAKC;QACnD,QAAIT,wYAAAA,EAAiBS,UAAWH,qZAA4BJ,4BAAAA,EAA0BO,QAAS;YAC7FD,IAAIE,IAAI,CAACD;QACX,OAAO,6XAAIR,oBAAAA,EAAkBQ,QAAQ;YACnCD,IAAIE,IAAI,IAAIN,cAAcK,MAAMJ,MAAM,EAAcC;QACtD,OAAO,IAAIG,MAAME,IAAI,KAAK,UAAU,UAAUF,OAAO;YACnD,OAAO;mBACFD;mBACAC,MAAMG,IAAI,CAACL,MAAM,CAA2B,CAACM,WAAWC;oBACzD,6XAAIX,aAAAA,EAAWW,MAAM;wBACnB,OAAO;+BAAID;4BAAW;gCAAE,GAAGC,GAAG;gCAAEH,MAAM;4BAAM;yBAAuC;oBACrF,OAAO;wBACL,OAAO;+BACFE;+BACAT,cAAcU,IAAIT,MAAM,EAAcC;yBAC1C;oBACH;gBACF,GAAG,EAAE;aACN;QACH;QAEA,OAAOE;IACT,GAAG,EAAE;AACP;uCAEeJ,cAAa","ignoreList":[0]}},
    {"offset": {"line": 2494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2500, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/flattenAllFields.ts"],"sourcesContent":["import type { Field, FlattenedField, FlattenedJoinField } from '../fields/config/types.js'\n\nimport { tabHasName } from '../fields/config/types.js'\n\nexport const flattenAllFields = ({ fields }: { fields: Field[] }): FlattenedField[] => {\n  const result: FlattenedField[] = []\n\n  for (const field of fields) {\n    switch (field.type) {\n      case 'array':\n      case 'group': {\n        result.push({ ...field, flattenedFields: flattenAllFields({ fields: field.fields }) })\n        break\n      }\n\n      case 'blocks': {\n        const blocks = []\n        for (const block of field.blocks) {\n          blocks.push({\n            ...block,\n            flattenedFields: flattenAllFields({ fields: block.fields }),\n          })\n        }\n        result.push({\n          ...field,\n          blocks,\n        })\n        break\n      }\n\n      case 'collapsible':\n      case 'row': {\n        for (const nestedField of flattenAllFields({ fields: field.fields })) {\n          result.push(nestedField)\n        }\n        break\n      }\n\n      case 'join': {\n        result.push(field as FlattenedJoinField)\n        break\n      }\n\n      case 'tabs': {\n        for (const tab of field.tabs) {\n          if (!tabHasName(tab)) {\n            for (const nestedField of flattenAllFields({ fields: tab.fields })) {\n              result.push(nestedField)\n            }\n          } else {\n            result.push({\n              ...tab,\n              type: 'tab',\n              flattenedFields: flattenAllFields({ fields: tab.fields }),\n            })\n          }\n        }\n        break\n      }\n\n      default: {\n        if (field.type !== 'ui') {\n          result.push(field)\n        }\n      }\n    }\n  }\n\n  return result\n}\n"],"names":["tabHasName","flattenAllFields","fields","result","field","type","push","flattenedFields","blocks","block","nestedField","tab","tabs"],"mappings":";;;AAEA,SAASA,UAAU,QAAQ,4BAA2B;;AAE/C,MAAMC,mBAAmB,CAAC,EAAEC,MAAM,EAAuB;IAC9D,MAAMC,SAA2B,EAAE;IAEnC,KAAK,MAAMC,SAASF,OAAQ;QAC1B,OAAQE,MAAMC,IAAI;YAChB,KAAK;YACL,KAAK;gBAAS;oBACZF,OAAOG,IAAI,CAAC;wBAAE,GAAGF,KAAK;wBAAEG,iBAAiBN,iBAAiB;4BAAEC,QAAQE,MAAMF,MAAM;wBAAC;oBAAG;oBACpF;gBACF;YAEA,KAAK;gBAAU;oBACb,MAAMM,SAAS,EAAE;oBACjB,KAAK,MAAMC,SAASL,MAAMI,MAAM,CAAE;wBAChCA,OAAOF,IAAI,CAAC;4BACV,GAAGG,KAAK;4BACRF,iBAAiBN,iBAAiB;gCAAEC,QAAQO,MAAMP,MAAM;4BAAC;wBAC3D;oBACF;oBACAC,OAAOG,IAAI,CAAC;wBACV,GAAGF,KAAK;wBACRI;oBACF;oBACA;gBACF;YAEA,KAAK;YACL,KAAK;gBAAO;oBACV,KAAK,MAAME,eAAeT,iBAAiB;wBAAEC,QAAQE,MAAMF,MAAM;oBAAC,GAAI;wBACpEC,OAAOG,IAAI,CAACI;oBACd;oBACA;gBACF;YAEA,KAAK;gBAAQ;oBACXP,OAAOG,IAAI,CAACF;oBACZ;gBACF;YAEA,KAAK;gBAAQ;oBACX,KAAK,MAAMO,OAAOP,MAAMQ,IAAI,CAAE;wBAC5B,IAAI,EAACZ,qYAAAA,EAAWW,MAAM;4BACpB,KAAK,MAAMD,eAAeT,iBAAiB;gCAAEC,QAAQS,IAAIT,MAAM;4BAAC,GAAI;gCAClEC,OAAOG,IAAI,CAACI;4BACd;wBACF,OAAO;4BACLP,OAAOG,IAAI,CAAC;gCACV,GAAGK,GAAG;gCACNN,MAAM;gCACNE,iBAAiBN,iBAAiB;oCAAEC,QAAQS,IAAIT,MAAM;gCAAC;4BACzD;wBACF;oBACF;oBACA;gBACF;YAEA;gBAAS;oBACP,IAAIE,MAAMC,IAAI,KAAK,MAAM;wBACvBF,OAAOG,IAAI,CAACF;oBACd;gBACF;QACF;IACF;IAEA,OAAOD;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2583, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2589, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/realPath.ts"],"sourcesContent":["/*\n  This source code has been taken from https://github.com/vercel/next.js/blob/39498d604c3b25d92a483153fe648a7ee456fbda/packages/next/src/lib/realpath.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\nimport fs from 'fs'\n\nconst isWindows = process.platform === 'win32'\n\n// Interesting learning from this, that fs.realpathSync is 70x slower than fs.realpathSync.native:\n// https://sun0day.github.io/blog/vite/why-vite4_3-is-faster.html#fs-realpathsync-issue\n// https://github.com/nodejs/node/issues/2680\n// However, we can't use fs.realpathSync.native on Windows due to behavior differences.\nexport const realpathSync = isWindows ? fs.realpathSync : fs.realpathSync.native\n"],"names":["fs","isWindows","process","platform","realpathSync","native"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA;;;AACA,OAAOA,QAAQ,KAAI;;AAEnB,MAAMC,YAAYC,QAAQC,QAAQ,KAAK;AAMhC,MAAMC,eAAeH,YAAYD,GAAGI,YAAY,gJAAGJ,UAAAA,CAAGI,YAAY,CAACC,MAAM,CAAA","ignoreList":[0]}},
    {"offset": {"line": 2610, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2616, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/isError.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/be87132327ea28acd4bf7af09a401bac2374cb64/packages/next/src/lib/is-error.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport interface ErrorWithCode extends Error {\n  code?: number | string\n}\n\nexport function isError(err: unknown): err is ErrorWithCode {\n  return typeof err === 'object' && err !== null && 'name' in err && 'message' in err\n}\n"],"names":["isError","err"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA,GAMA;;;AAAO,SAASA,QAAQC,GAAY;IAClC,OAAO,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,UAAUA,OAAO,aAAaA;AAClF","ignoreList":[0]}},
    {"offset": {"line": 2636, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2642, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/resolveFrom.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/39498d604c3b25d92a483153fe648a7ee456fbda/packages/next/src/lib/resolve-from.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// source: https://github.com/sindresorhus/resolve-from\nimport { createRequire } from 'module'\nimport path from 'path'\n\nimport { isError } from './isError.js'\nimport { realpathSync } from './realPath.js'\n\nexport const resolveFrom = (fromDirectory: string, moduleId: string, silent?: boolean) => {\n  if (typeof fromDirectory !== 'string') {\n    throw new TypeError(\n      `Expected \\`fromDir\\` to be of type \\`string\\`, got \\`${typeof fromDirectory}\\``,\n    )\n  }\n\n  if (typeof moduleId !== 'string') {\n    throw new TypeError(\n      `Expected \\`moduleId\\` to be of type \\`string\\`, got \\`${typeof moduleId}\\``,\n    )\n  }\n\n  try {\n    fromDirectory = realpathSync(fromDirectory)\n  } catch (error: unknown) {\n    if (isError(error) && error.code === 'ENOENT') {\n      fromDirectory = path.resolve(fromDirectory)\n    } else if (silent) {\n      return\n    } else {\n      throw error\n    }\n  }\n\n  const fromFile = path.join(fromDirectory, 'noop.js')\n\n  const require = createRequire(import.meta.url)\n\n  const Module = require('module')\n\n  const resolveFileName = () => {\n    return Module._resolveFilename(moduleId, {\n      id: fromFile,\n      filename: fromFile,\n      paths: Module._nodeModulePaths(fromDirectory),\n    })\n  }\n\n  if (silent) {\n    try {\n      return resolveFileName()\n    } catch (error) {\n      return\n    }\n  }\n\n  return resolveFileName()\n}\n"],"names":["createRequire","path","isError","realpathSync","resolveFrom","fromDirectory","moduleId","silent","TypeError","error","code","resolve","fromFile","join","require","url","Module","resolveFileName","_resolveFilename","id","filename","paths","_nodeModulePaths"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA,GAEA,uDAAuD;;;;AACvD,SAASA,aAAa,QAAQ,SAAQ;AACtC,OAAOC,UAAU,OAAM;AAGvB,SAASE,YAAY,QAAQ,gBAAe;AAD5C,SAASD,OAAO,QAAQ,eAAc;;;;;;;;;;AAG/B,MAAME,cAAc,CAACC,eAAuBC,UAAkBC;IACnE,IAAI,OAAOF,kBAAkB,UAAU;QACrC,MAAM,IAAIG,UACR,CAAC,qDAAqD,EAAE,OAAOH,cAAc,EAAE,CAAC;IAEpF;IAEA,IAAI,OAAOC,aAAa,UAAU;QAChC,MAAM,IAAIE,UACR,CAAC,sDAAsD,EAAE,OAAOF,SAAS,EAAE,CAAC;IAEhF;IAEA,IAAI;QACFD,gBAAgBF,oZAAAA,EAAaE;IAC/B,EAAE,OAAOI,OAAgB;QACvB,KAAIP,6YAAAA,EAAQO,UAAUA,MAAMC,IAAI,KAAK,UAAU;YAC7CL,kHAAgBJ,UAAAA,CAAKU,OAAO,CAACN;QAC/B,OAAO,IAAIE,QAAQ;YACjB;QACF,OAAO;YACL,MAAME;QACR;IACF;IAEA,MAAMG,6GAAWX,UAAAA,CAAKY,IAAI,CAACR,eAAe;IAE1C,MAAMS,WAAUd,yHAAAA,EAAc,8BAAYe,GAAG;IAE7C,MAAMC,SAASF,QAAQ;IAEvB,MAAMG,kBAAkB;QACtB,OAAOD,OAAOE,gBAAgB,CAACZ,UAAU;YACvCa,IAAIP;YACJQ,UAAUR;YACVS,OAAOL,OAAOM,gBAAgB,CAACjB;QACjC;IACF;IAEA,IAAIE,QAAQ;QACV,IAAI;YACF,OAAOU;QACT,EAAE,OAAOR,OAAO;YACd;QACF;IACF;IAEA,OAAOQ;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 2710, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2716, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/getDependencies.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/41a80533f900467e1b788bd2673abe2dca20be6a/packages/next/src/lib/has-necessary-dependencies.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { promises as fs } from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport { findUp } from '../findUp.js'\nimport { resolveFrom } from './resolveFrom.js'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nconst payloadPkgDirname = path.resolve(dirname, '../../../') // pkg dir (outside src)\n// if node_modules is in payloadPkgDirname, go to parent dir which contains node_modules\nif (payloadPkgDirname.includes('node_modules')) {\n  payloadPkgDirname.split('node_modules').slice(0, -1)\n}\nconst resolvedCwd = path.resolve(process.cwd())\n\nexport type NecessaryDependencies = {\n  missing: string[]\n  resolved: Map<\n    string,\n    {\n      path: string\n      version: string\n    }\n  >\n}\n\nexport async function getDependencies(\n  baseDir: string,\n  requiredPackages: string[],\n): Promise<NecessaryDependencies> {\n  const resolutions = new Map<\n    string,\n    {\n      path: string\n      version: string\n    }\n  >()\n  const missingPackages: string[] = []\n\n  await Promise.all(\n    requiredPackages.map(async (pkg) => {\n      try {\n        const pkgPath = await fs.realpath(resolveFrom(baseDir, pkg))\n        const pkgDir = path.dirname(pkgPath)\n\n        let packageJsonFilePath = null\n\n        const foundPackageJsonDir = await findUp({\n          dir: pkgDir,\n          fileNames: ['package.json'],\n        })\n\n        if (foundPackageJsonDir) {\n          const resolvedFoundPath = path.resolve(foundPackageJsonDir)\n\n          if (\n            resolvedFoundPath.startsWith(resolvedCwd) ||\n            resolvedFoundPath.startsWith(payloadPkgDirname)\n          ) {\n            // We don't want to match node modules outside the user's project. Checking for both process.cwd and dirname is a reliable way to do this.\n            packageJsonFilePath = resolvedFoundPath\n          }\n        }\n\n        // No need to check if packageJsonFilePath exists - findUp checks that for us\n        if (packageJsonFilePath) {\n          // parse version\n          const packageJson = JSON.parse(await fs.readFile(packageJsonFilePath, 'utf8'))\n          const version = packageJson.version\n\n          resolutions.set(pkg, {\n            path: packageJsonFilePath,\n            version,\n          })\n        } else {\n          return missingPackages.push(pkg)\n        }\n      } catch (_) {\n        return missingPackages.push(pkg)\n      }\n    }),\n  )\n\n  return {\n    missing: missingPackages,\n    resolved: resolutions,\n  }\n}\n"],"names":["promises","fs","path","fileURLToPath","findUp","resolveFrom","filename","url","dirname","payloadPkgDirname","resolve","includes","split","slice","resolvedCwd","process","cwd","getDependencies","baseDir","requiredPackages","resolutions","Map","missingPackages","Promise","all","map","pkg","pkgPath","realpath","pkgDir","packageJsonFilePath","foundPackageJsonDir","dir","fileNames","resolvedFoundPath","startsWith","packageJson","JSON","parse","readFile","version","set","push","_","missing","resolved"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA;;;AAEA,SAASA,YAAYC,EAAE,QAAQ,KAAI;AACnC,OAAOC,UAAU,OAAM;AACvB,SAASC,aAAa,QAAQ,MAAK;AAGnC,SAASE,WAAW,QAAQ,mBAAkB;AAD9C,SAASD,MAAM,QAAQ,eAAc;;;;;;;;;;;AAGrC,MAAME,+GAAWH,gBAAAA,EAAc,8BAAYI,GAAG;AAC9C,MAAMC,2GAAUN,WAAAA,CAAKM,OAAO,CAACF;AAE7B,MAAMG,sHAAoBP,UAAAA,CAAKQ,OAAO,CAACF,SAAS,aAAa,wBAAwB;;AACrF,wFAAwF;AACxF,IAAIC,kBAAkBE,QAAQ,CAAC,iBAAiB;IAC9CF,kBAAkBG,KAAK,CAAC,gBAAgBC,KAAK,CAAC,GAAG,CAAC;AACpD;AACA,MAAMC,gHAAcZ,UAAAA,CAAKQ,OAAO,CAACK,QAAQC,GAAG;AAarC,eAAeC,gBACpBC,OAAe,EACfC,gBAA0B;IAE1B,MAAMC,cAAc,IAAIC;IAOxB,MAAMC,kBAA4B,EAAE;IAEpC,MAAMC,QAAQC,GAAG,CACfL,iBAAiBM,GAAG,CAAC,OAAOC;QAC1B,IAAI;YACF,MAAMC,UAAU,oGAAM1B,WAAAA,CAAG2B,QAAQ,yYAACvB,cAAAA,EAAYa,SAASQ;YACvD,MAAMG,2GAAS3B,UAAAA,CAAKM,OAAO,CAACmB;YAE5B,IAAIG,sBAAsB;YAE1B,MAAMC,sBAAsB,MAAM3B,4XAAAA,EAAO;gBACvC4B,KAAKH;gBACLI,WAAW;oBAAC;iBAAe;YAC7B;YAEA,IAAIF,qBAAqB;gBACvB,MAAMG,sHAAoBhC,UAAAA,CAAKQ,OAAO,CAACqB;gBAEvC,IACEG,kBAAkBC,UAAU,CAACrB,gBAC7BoB,kBAAkBC,UAAU,CAAC1B,oBAC7B;oBACA,0IAA0I;oBAC1IqB,sBAAsBI;gBACxB;YACF;YAEA,6EAA6E;YAC7E,IAAIJ,qBAAqB;gBACvB,gBAAgB;gBAChB,MAAMM,cAAcC,KAAKC,KAAK,CAAC,MAAMrC,yGAAAA,CAAGsC,QAAQ,CAACT,qBAAqB;gBACtE,MAAMU,UAAUJ,YAAYI,OAAO;gBAEnCpB,YAAYqB,GAAG,CAACf,KAAK;oBACnBxB,MAAM4B;oBACNU;gBACF;YACF,OAAO;gBACL,OAAOlB,gBAAgBoB,IAAI,CAAChB;YAC9B;QACF,EAAE,OAAOiB,GAAG;YACV,OAAOrB,gBAAgBoB,IAAI,CAAChB;QAC9B;IACF;IAGF,OAAO;QACLkB,SAAStB;QACTuB,UAAUzB;IACZ;AACF","ignoreList":[0]}},
    {"offset": {"line": 2799, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2805, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/versionUtils.ts"],"sourcesContent":["import type { CustomVersionParser } from './dependencyChecker.js'\n\nexport function parseVersion(version: string): { parts: number[]; preReleases: string[] } {\n  const [mainVersion, ...preReleases] = version.split('-')\n  const parts = mainVersion.split('.').map(Number)\n  return { parts, preReleases }\n}\n\nfunction extractNumbers(str: string): number[] {\n  const matches = str.match(/\\d+/g) || []\n  return matches.map(Number)\n}\n\nfunction comparePreRelease(v1: string, v2: string): number {\n  const num1 = extractNumbers(v1)\n  const num2 = extractNumbers(v2)\n\n  for (let i = 0; i < Math.max(num1.length, num2.length); i++) {\n    if ((num1[i] || 0) < (num2[i] || 0)) {\n      return -1\n    }\n    if ((num1[i] || 0) > (num2[i] || 0)) {\n      return 1\n    }\n  }\n\n  // If numeric parts are equal, compare the whole string\n  if (v1 < v2) {\n    return -1\n  }\n  if (v1 > v2) {\n    return 1\n  }\n  return 0\n}\n\n/**\n * Compares two semantic version strings, including handling pre-release identifiers.\n *\n * This function first compares the major, minor, and patch components as integers.\n * If these components are equal, it then moves on to compare pre-release versions.\n * Pre-release versions are compared first by extracting and comparing any numerical values.\n * If numerical values are equal, it compares the whole pre-release string lexicographically.\n *\n * @param {string} compare - The first version string to compare.\n * @param {string} to - The second version string to compare.\n * @param {function} [customVersionParser] - An optional function to parse version strings into parts and pre-releases.\n * @returns {string} - Returns greater if compare is greater than to, lower if compare is less than to, and equal if they are equal.\n */\nexport function compareVersions(\n  compare: string,\n  to: string,\n  customVersionParser?: CustomVersionParser,\n): 'equal' | 'greater' | 'lower' {\n  const { parts: parts1, preReleases: preReleases1 } = customVersionParser\n    ? customVersionParser(compare)\n    : parseVersion(compare)\n  const { parts: parts2, preReleases: preReleases2 } = customVersionParser\n    ? customVersionParser(to)\n    : parseVersion(to)\n\n  // Compare main version parts\n  for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {\n    if ((parts1[i] || 0) > (parts2[i] || 0)) {\n      return 'greater'\n    }\n    if ((parts1[i] || 0) < (parts2[i] || 0)) {\n      return 'lower'\n    }\n  }\n\n  // Compare pre-release parts if main versions are equal\n  if (preReleases1?.length || preReleases2?.length) {\n    for (let i = 0; i < Math.max(preReleases1.length, preReleases2.length); i++) {\n      if (!preReleases1[i]) {\n        return 'greater'\n      }\n      if (!preReleases2[i]) {\n        return 'lower'\n      }\n\n      const result = comparePreRelease(preReleases1[i], preReleases2[i])\n      if (result !== 0) {\n        return result === 1 ? 'greater' : 'lower'\n      }\n      // Equal => continue for loop to check for next pre-release part\n    }\n  }\n\n  return 'equal'\n}\n"],"names":["parseVersion","version","mainVersion","preReleases","split","parts","map","Number","extractNumbers","str","matches","match","comparePreRelease","v1","v2","num1","num2","i","Math","max","length","compareVersions","compare","to","customVersionParser","parts1","preReleases1","parts2","preReleases2","result"],"mappings":";;;;AAEO,SAASA,aAAaC,OAAe;IAC1C,MAAM,CAACC,aAAa,GAAGC,YAAY,GAAGF,QAAQG,KAAK,CAAC;IACpD,MAAMC,QAAQH,YAAYE,KAAK,CAAC,KAAKE,GAAG,CAACC;IACzC,OAAO;QAAEF;QAAOF;IAAY;AAC9B;AAEA,SAASK,eAAeC,GAAW;IACjC,MAAMC,UAAUD,IAAIE,KAAK,CAAC,WAAW,EAAE;IACvC,OAAOD,QAAQJ,GAAG,CAACC;AACrB;AAEA,SAASK,kBAAkBC,EAAU,EAAEC,EAAU;IAC/C,MAAMC,OAAOP,eAAeK;IAC5B,MAAMG,OAAOR,eAAeM;IAE5B,IAAK,IAAIG,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACJ,KAAKK,MAAM,EAAEJ,KAAKI,MAAM,GAAGH,IAAK;QAC3D,IAAKF,CAAAA,IAAI,CAACE,EAAE,IAAI,CAAA,IAAMD,CAAAA,IAAI,CAACC,EAAE,IAAI,CAAA,GAAI;YACnC,OAAO,CAAC;QACV;QACA,IAAKF,CAAAA,IAAI,CAACE,EAAE,IAAI,CAAA,IAAMD,CAAAA,IAAI,CAACC,EAAE,IAAI,CAAA,GAAI;YACnC,OAAO;QACT;IACF;IAEA,uDAAuD;IACvD,IAAIJ,KAAKC,IAAI;QACX,OAAO,CAAC;IACV;IACA,IAAID,KAAKC,IAAI;QACX,OAAO;IACT;IACA,OAAO;AACT;AAeO,SAASO,gBACdC,OAAe,EACfC,EAAU,EACVC,mBAAyC;IAEzC,MAAM,EAAEnB,OAAOoB,MAAM,EAAEtB,aAAauB,YAAY,EAAE,GAAGF,sBACjDA,oBAAoBF,WACpBtB,aAAasB;IACjB,MAAM,EAAEjB,OAAOsB,MAAM,EAAExB,aAAayB,YAAY,EAAE,GAAGJ,sBACjDA,oBAAoBD,MACpBvB,aAAauB;IAEjB,6BAA6B;IAC7B,IAAK,IAAIN,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACM,OAAOL,MAAM,EAAEO,OAAOP,MAAM,GAAGH,IAAK;QAC/D,IAAKQ,CAAAA,MAAM,CAACR,EAAE,IAAI,CAAA,IAAMU,CAAAA,MAAM,CAACV,EAAE,IAAI,CAAA,GAAI;YACvC,OAAO;QACT;QACA,IAAKQ,CAAAA,MAAM,CAACR,EAAE,IAAI,CAAA,IAAMU,CAAAA,MAAM,CAACV,EAAE,IAAI,CAAA,GAAI;YACvC,OAAO;QACT;IACF;IAEA,uDAAuD;IACvD,IAAIS,cAAcN,UAAUQ,cAAcR,QAAQ;QAChD,IAAK,IAAIH,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACO,aAAaN,MAAM,EAAEQ,aAAaR,MAAM,GAAGH,IAAK;YAC3E,IAAI,CAACS,YAAY,CAACT,EAAE,EAAE;gBACpB,OAAO;YACT;YACA,IAAI,CAACW,YAAY,CAACX,EAAE,EAAE;gBACpB,OAAO;YACT;YAEA,MAAMY,SAASjB,kBAAkBc,YAAY,CAACT,EAAE,EAAEW,YAAY,CAACX,EAAE;YACjE,IAAIY,WAAW,GAAG;gBAChB,OAAOA,WAAW,IAAI,YAAY;YACpC;QACA,gEAAgE;QAClE;IACF;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 2871, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2877, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/dependencyChecker.ts"],"sourcesContent":["import path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport { getDependencies } from '../../index.js'\nimport { compareVersions } from './versionUtils.js'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nexport type CustomVersionParser = (version: string) => { parts: number[]; preReleases: string[] }\n\nexport type DependencyCheckerArgs = {\n  /**\n   * Define dependency groups to ensure that all dependencies within that group are on the same version, and that no dependencies in that group with different versions are found\n   */\n  dependencyGroups?: {\n    dependencies: string[]\n    /**\n     * Name of the dependency group to be displayed in the error message\n     */\n    name: string\n    targetVersion?: string\n    targetVersionDependency?: string\n  }[]\n  /**\n   * Dependency package names keyed to their required versions. Supports >= (greater or equal than version) as a prefix, or no prefix for the exact version\n   */\n  dependencyVersions?: {\n    [dependency: string]: {\n      customVersionParser?: CustomVersionParser\n      required?: boolean\n      version?: string\n    }\n  }\n}\n\nexport async function checkDependencies({\n  dependencyGroups,\n  dependencyVersions,\n}: DependencyCheckerArgs): Promise<void> {\n  if (dependencyGroups?.length) {\n    for (const dependencyGroup of dependencyGroups) {\n      const resolvedDependencies = await getDependencies(dirname, dependencyGroup.dependencies)\n\n      // Go through each resolved dependency. If any dependency has a mismatching version, throw an error\n      const foundVersions: {\n        [version: string]: string\n      } = {}\n      for (const [_pkg, { version }] of resolvedDependencies.resolved) {\n        if (!Object.keys(foundVersions).includes(version)) {\n          foundVersions[version] = _pkg\n        }\n      }\n      if (Object.keys(foundVersions).length > 1) {\n        const targetVersion =\n          dependencyGroup.targetVersion ??\n          resolvedDependencies.resolved.get(dependencyGroup.targetVersionDependency)?.version\n        if (targetVersion) {\n          const formattedVersionsWithPackageNameString = Object.entries(foundVersions)\n            .filter(([version]) => version !== targetVersion)\n            .map(([version, pkg]) => `${pkg}@${version} (Please change this to ${targetVersion})`)\n            .join(', ')\n          throw new Error(\n            `Mismatching \"${dependencyGroup.name}\" dependency versions found: ${formattedVersionsWithPackageNameString}. All \"${dependencyGroup.name}\" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all \"${dependencyGroup.name}\" packages have the same version.`,\n          )\n        } else {\n          const formattedVersionsWithPackageNameString = Object.entries(foundVersions)\n            .map(([version, pkg]) => `${pkg}@${version}`)\n            .join(', ')\n          throw new Error(\n            `Mismatching \"${dependencyGroup.name}\" dependency versions found: ${formattedVersionsWithPackageNameString}. All \"${dependencyGroup.name}\" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all \"${dependencyGroup.name}\" packages have the same version.`,\n          )\n        }\n      }\n    }\n  }\n\n  if (dependencyVersions && Object.keys(dependencyVersions).length) {\n    const resolvedDependencies = await getDependencies(dirname, Object.keys(dependencyVersions))\n    for (const [dependency, settings] of Object.entries(dependencyVersions)) {\n      const resolvedDependency = resolvedDependencies.resolved.get(dependency)\n      if (!resolvedDependency) {\n        if (!settings.required) {\n          continue\n        }\n        throw new Error(`Dependency ${dependency} not found. Please ensure it is installed.`)\n      }\n\n      if (settings.version) {\n        const settingsVersionToCheck = settings.version.startsWith('>=')\n          ? settings.version.slice(2)\n          : settings.version\n\n        const versionCompareResult = compareVersions(\n          resolvedDependency.version,\n          settingsVersionToCheck,\n          settings.customVersionParser,\n        )\n\n        if (settings.version.startsWith('>=')) {\n          if (versionCompareResult === 'lower') {\n            throw new Error(\n              `Dependency ${dependency} is on version ${resolvedDependency.version}, but ${settings.version} or greater is required. Please update this dependency.`,\n            )\n          }\n        } else if (versionCompareResult === 'lower' || versionCompareResult === 'greater') {\n          throw new Error(\n            `Dependency ${dependency} is on version ${resolvedDependency.version}, but ${settings.version} is required. Please update this dependency.`,\n          )\n        }\n      }\n    }\n  }\n}\n"],"names":["path","fileURLToPath","getDependencies","compareVersions","filename","url","dirname","checkDependencies","dependencyGroups","dependencyVersions","length","dependencyGroup","resolvedDependencies","dependencies","foundVersions","_pkg","version","resolved","Object","keys","includes","targetVersion","get","targetVersionDependency","formattedVersionsWithPackageNameString","entries","filter","map","pkg","join","Error","name","dependency","settings","resolvedDependency","required","settingsVersionToCheck","startsWith","slice","versionCompareResult","customVersionParser"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2942, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2948, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getCollectionIDFieldTypes.ts"],"sourcesContent":["import type { SanitizedConfig } from '../config/types.js'\n\n/**\n *  While the default ID is determined by the db adapter, it can still differ for a collection if they\n *  define a custom ID field. This builds a map of collection slugs to their ID field type.\n * @param defaultIDType as defined by the database adapter\n */\nexport function getCollectionIDFieldTypes({\n  config,\n  defaultIDType,\n}: {\n  config: SanitizedConfig\n  defaultIDType: 'number' | 'text'\n}): { [key: string]: 'number' | 'string' } {\n  return config.collections.reduce((acc, collection) => {\n    const customCollectionIdField = collection.fields.find(\n      (field) => 'name' in field && field.name === 'id',\n    )\n\n    acc[collection.slug] = defaultIDType === 'text' ? 'string' : 'number'\n\n    if (customCollectionIdField) {\n      acc[collection.slug] = customCollectionIdField.type === 'number' ? 'number' : 'string'\n    }\n\n    return acc\n  }, {})\n}\n"],"names":["getCollectionIDFieldTypes","config","defaultIDType","collections","reduce","acc","collection","customCollectionIdField","fields","find","field","name","slug","type"],"mappings":"AAEA;;;;CAIC,GACD;;;AAAO,SAASA,0BAA0B,EACxCC,MAAM,EACNC,aAAa,EAId;IACC,OAAOD,OAAOE,WAAW,CAACC,MAAM,CAAC,CAACC,KAAKC;QACrC,MAAMC,0BAA0BD,WAAWE,MAAM,CAACC,IAAI,CACpD,CAACC,QAAU,UAAUA,SAASA,MAAMC,IAAI,KAAK;QAG/CN,GAAG,CAACC,WAAWM,IAAI,CAAC,GAAGV,kBAAkB,SAAS,WAAW;QAE7D,IAAIK,yBAAyB;YAC3BF,GAAG,CAACC,WAAWM,IAAI,CAAC,GAAGL,wBAAwBM,IAAI,KAAK,WAAW,WAAW;QAChF;QAEA,OAAOR;IACT,GAAG,CAAC;AACN","ignoreList":[0]}},
    {"offset": {"line": 2965, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2971, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/configToJSONSchema.ts"],"sourcesContent":["import type { JSONSchema4, JSONSchema4TypeName } from 'json-schema'\n\nimport pluralize from 'pluralize'\nconst { singular } = pluralize\n\nimport type { I18n } from '@payloadcms/translations'\n\nimport type { Auth } from '../auth/types.js'\nimport type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedConfig } from '../config/types.js'\nimport type { FieldAffectingData, FlattenedField, Option } from '../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\n\nimport { MissingEditorProp } from '../errors/MissingEditorProp.js'\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { generateJobsJSONSchemas } from '../queues/config/generateJobsJSONSchemas.js'\nimport { deepCopyObject } from './deepCopyObject.js'\nimport { toWords } from './formatLabels.js'\nimport { getCollectionIDFieldTypes } from './getCollectionIDFieldTypes.js'\n\nconst fieldIsRequired = (field: FlattenedField) => {\n  const isConditional = Boolean(field?.admin && field?.admin?.condition)\n  if (isConditional) {\n    return false\n  }\n\n  const isMarkedRequired = 'required' in field && field.required === true\n  if (fieldAffectsData(field) && isMarkedRequired) {\n    return true\n  }\n\n  // if any subfields are required, this field is required\n  if ('fields' in field && field.type !== 'array') {\n    return field.flattenedFields.some((subField) => fieldIsRequired(subField))\n  }\n\n  return false\n}\n\nfunction buildOptionEnums(options: Option[]): string[] {\n  return options.map((option) => {\n    if (typeof option === 'object' && 'value' in option) {\n      return option.value\n    }\n\n    return option\n  })\n}\n\nfunction generateEntitySchemas(\n  entities: (SanitizedCollectionConfig | SanitizedGlobalConfig)[],\n): JSONSchema4 {\n  const properties = [...entities].reduce((acc, { slug }) => {\n    acc[slug] = {\n      $ref: `#/definitions/${slug}`,\n    }\n\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateEntitySelectSchemas(\n  entities: (SanitizedCollectionConfig | SanitizedGlobalConfig)[],\n): JSONSchema4 {\n  const properties = [...entities].reduce((acc, { slug }) => {\n    acc[slug] = {\n      $ref: `#/definitions/${slug}_select`,\n    }\n\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateCollectionJoinsSchemas(collections: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties = [...collections].reduce<Record<string, JSONSchema4>>(\n    (acc, { slug, joins }) => {\n      const schema = {\n        type: 'object',\n        additionalProperties: false,\n        properties: {},\n        required: [],\n      } satisfies JSONSchema4\n\n      for (const collectionSlug in joins) {\n        for (const join of joins[collectionSlug]) {\n          schema.properties[join.joinPath] = {\n            type: 'string',\n            enum: [collectionSlug],\n          }\n          schema.required.push(join.joinPath)\n        }\n      }\n\n      if (Object.keys(schema.properties).length > 0) {\n        acc[slug] = schema\n      }\n\n      return acc\n    },\n    {},\n  )\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateLocaleEntitySchemas(localization: SanitizedConfig['localization']): JSONSchema4 {\n  if (localization && 'locales' in localization && localization?.locales) {\n    const localesFromConfig = localization?.locales\n\n    const locales = [...localesFromConfig].map((locale) => {\n      return locale.code\n    }, [])\n\n    return {\n      type: 'string',\n      enum: locales,\n    }\n  }\n\n  return {\n    type: 'null',\n  }\n}\n\nfunction generateAuthEntitySchemas(entities: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties: JSONSchema4[] = [...entities]\n    .filter(({ auth }) => Boolean(auth))\n    .map(({ slug }) => {\n      return {\n        allOf: [\n          { $ref: `#/definitions/${slug}` },\n          {\n            type: 'object',\n            additionalProperties: false,\n            properties: {\n              collection: { type: 'string', enum: [slug] },\n            },\n            required: ['collection'],\n          },\n        ],\n      }\n    }, {})\n\n  return {\n    oneOf: properties,\n  }\n}\n\n/**\n * Generates the JSON Schema for database configuration\n *\n * @example { db: idType: string }\n */\nfunction generateDbEntitySchema(config: SanitizedConfig): JSONSchema4 {\n  const defaultIDType: JSONSchema4 =\n    config.db?.defaultIDType === 'number' ? { type: 'number' } : { type: 'string' }\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties: {\n      defaultIDType,\n    },\n    required: ['defaultIDType'],\n  }\n}\n\n/**\n * Returns a JSON Schema Type with 'null' added if the field is not required.\n */\nexport function withNullableJSONSchemaType(\n  fieldType: JSONSchema4TypeName,\n  isRequired: boolean,\n): JSONSchema4TypeName | JSONSchema4TypeName[] {\n  const fieldTypes = [fieldType]\n  if (isRequired) {\n    return fieldType\n  }\n  fieldTypes.push('null')\n  return fieldTypes\n}\n\nfunction entityOrFieldToJsDocs({\n  entity,\n  i18n,\n}: {\n  entity: FlattenedField | SanitizedCollectionConfig | SanitizedGlobalConfig\n  i18n?: I18n\n}): string | undefined {\n  let description: string | undefined = undefined\n  if (entity?.admin?.description) {\n    if (typeof entity?.admin?.description === 'string') {\n      description = entity?.admin?.description\n    } else if (typeof entity?.admin?.description === 'object') {\n      if (entity?.admin?.description?.en) {\n        description = entity?.admin?.description?.en\n      } else if (entity?.admin?.description?.[i18n.language]) {\n        description = entity?.admin?.description?.[i18n.language]\n      }\n    } else if (typeof entity?.admin?.description === 'function' && i18n) {\n      // do not evaluate description functions for generating JSDocs. The output of\n      // those can differ depending on where and when they are called, creating\n      // inconsistencies in the generated JSDocs.\n    }\n  }\n  return description\n}\nexport function fieldsToJSONSchema(\n  /**\n   * Used for relationship fields, to determine whether to use a string or number type for the ID.\n   * While there is a default ID field type set by the db adapter, they can differ on a collection-level\n   * if they have custom ID fields.\n   */\n  collectionIDFieldTypes: { [key: string]: 'number' | 'string' },\n  fields: FlattenedField[],\n  /**\n   * Allows you to define new top-level interfaces that can be re-used in the output schema.\n   */\n  interfaceNameDefinitions: Map<string, JSONSchema4>,\n  config?: SanitizedConfig,\n  i18n?: I18n,\n): {\n  properties: {\n    [k: string]: JSONSchema4\n  }\n  required: string[]\n} {\n  const requiredFieldNames = new Set<string>()\n\n  return {\n    properties: Object.fromEntries(\n      fields.reduce((fieldSchemas, field, index) => {\n        const isRequired = fieldAffectsData(field) && fieldIsRequired(field)\n        if (isRequired) {\n          requiredFieldNames.add(field.name)\n        }\n\n        const fieldDescription = entityOrFieldToJsDocs({ entity: field, i18n })\n        const baseFieldSchema: JSONSchema4 = {}\n        if (fieldDescription) {\n          baseFieldSchema.description = fieldDescription\n        }\n\n        let fieldSchema: JSONSchema4\n\n        switch (field.type) {\n          case 'array': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: {\n                type: 'object',\n                additionalProperties: false,\n                ...fieldsToJSONSchema(\n                  collectionIDFieldTypes,\n                  field.flattenedFields,\n                  interfaceNameDefinitions,\n                  config,\n                  i18n,\n                ),\n              },\n            }\n\n            if (field.interfaceName) {\n              interfaceNameDefinitions.set(field.interfaceName, fieldSchema)\n\n              fieldSchema = {\n                $ref: `#/definitions/${field.interfaceName}`,\n              }\n            }\n            break\n          }\n          case 'blocks': {\n            // Check for a case where no blocks are provided.\n            // We need to generate an empty array for this case, note that JSON schema 4 doesn't support empty arrays\n            // so the best we can get is `unknown[]`\n            const hasBlocks = Boolean(field.blocks.length)\n\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: hasBlocks\n                ? {\n                    oneOf: field.blocks.map((block) => {\n                      const blockFieldSchemas = fieldsToJSONSchema(\n                        collectionIDFieldTypes,\n                        block.flattenedFields,\n                        interfaceNameDefinitions,\n                        config,\n                        i18n,\n                      )\n\n                      const blockSchema: JSONSchema4 = {\n                        type: 'object',\n                        additionalProperties: false,\n                        properties: {\n                          ...blockFieldSchemas.properties,\n                          blockType: {\n                            const: block.slug,\n                          },\n                        },\n                        required: ['blockType', ...blockFieldSchemas.required],\n                      }\n\n                      if (block.interfaceName) {\n                        interfaceNameDefinitions.set(block.interfaceName, blockSchema)\n\n                        return {\n                          $ref: `#/definitions/${block.interfaceName}`,\n                        }\n                      }\n\n                      return blockSchema\n                    }),\n                  }\n                : {},\n            }\n            break\n          }\n          case 'checkbox': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('boolean', isRequired),\n            }\n            break\n          }\n          case 'code':\n          case 'date':\n          case 'email':\n          case 'textarea': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('string', isRequired),\n            }\n            break\n          }\n\n          case 'group':\n          case 'tab': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: 'object',\n              additionalProperties: false,\n              ...fieldsToJSONSchema(\n                collectionIDFieldTypes,\n                field.flattenedFields,\n                interfaceNameDefinitions,\n                config,\n                i18n,\n              ),\n            }\n\n            if (field.interfaceName) {\n              interfaceNameDefinitions.set(field.interfaceName, fieldSchema)\n\n              fieldSchema = { $ref: `#/definitions/${field.interfaceName}` }\n            }\n            break\n          }\n\n          case 'join': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('object', false),\n              additionalProperties: false,\n              properties: {\n                docs: {\n                  type: withNullableJSONSchemaType('array', false),\n                  items: {\n                    oneOf: [\n                      {\n                        type: collectionIDFieldTypes[field.collection],\n                      },\n                      {\n                        $ref: `#/definitions/${field.collection}`,\n                      },\n                    ],\n                  },\n                },\n                hasNextPage: { type: withNullableJSONSchemaType('boolean', false) },\n              },\n            }\n            break\n          }\n\n          case 'json': {\n            fieldSchema = field.jsonSchema?.schema || {\n              ...baseFieldSchema,\n              type: ['object', 'array', 'string', 'number', 'boolean', 'null'],\n            }\n            break\n          }\n\n          case 'number': {\n            if (field.hasMany === true) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: { type: 'number' },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('number', isRequired),\n              }\n            }\n            break\n          }\n\n          case 'point': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: [\n                {\n                  type: 'number',\n                },\n                {\n                  type: 'number',\n                },\n              ],\n              maxItems: 2,\n              minItems: 2,\n            }\n            break\n          }\n          case 'radio': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('string', isRequired),\n              enum: buildOptionEnums(field.options),\n            }\n\n            break\n          }\n\n          case 'relationship':\n          case 'upload': {\n            if (Array.isArray(field.relationTo)) {\n              if (field.hasMany) {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  type: withNullableJSONSchemaType('array', isRequired),\n                  items: {\n                    oneOf: field.relationTo.map((relation) => {\n                      return {\n                        type: 'object',\n                        additionalProperties: false,\n                        properties: {\n                          relationTo: {\n                            const: relation,\n                          },\n                          value: {\n                            oneOf: [\n                              {\n                                type: collectionIDFieldTypes[relation],\n                              },\n                              {\n                                $ref: `#/definitions/${relation}`,\n                              },\n                            ],\n                          },\n                        },\n                        required: ['value', 'relationTo'],\n                      }\n                    }),\n                  },\n                }\n              } else {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  oneOf: field.relationTo.map((relation) => {\n                    return {\n                      type: withNullableJSONSchemaType('object', isRequired),\n                      additionalProperties: false,\n                      properties: {\n                        relationTo: {\n                          const: relation,\n                        },\n                        value: {\n                          oneOf: [\n                            {\n                              type: collectionIDFieldTypes[relation],\n                            },\n                            {\n                              $ref: `#/definitions/${relation}`,\n                            },\n                          ],\n                        },\n                      },\n                      required: ['value', 'relationTo'],\n                    }\n                  }),\n                }\n              }\n            } else if (field.hasMany) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: {\n                  oneOf: [\n                    {\n                      type: collectionIDFieldTypes[field.relationTo],\n                    },\n                    {\n                      $ref: `#/definitions/${field.relationTo}`,\n                    },\n                  ],\n                },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                oneOf: [\n                  {\n                    type: withNullableJSONSchemaType(\n                      collectionIDFieldTypes[field.relationTo],\n                      isRequired,\n                    ),\n                  },\n                  { $ref: `#/definitions/${field.relationTo}` },\n                ],\n              }\n            }\n\n            break\n          }\n\n          case 'richText': {\n            if (!field?.editor) {\n              throw new MissingEditorProp(field) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n            }\n            if (typeof field.editor === 'function') {\n              throw new Error('Attempted to access unsanitized rich text editor.')\n            }\n            if (field.editor.outputSchema) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                ...field.editor.outputSchema({\n                  collectionIDFieldTypes,\n                  config,\n                  field,\n                  i18n,\n                  interfaceNameDefinitions,\n                  isRequired,\n                }),\n              }\n            } else {\n              // Maintain backwards compatibility with existing rich text editors\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: {\n                  type: 'object',\n                },\n              }\n            }\n\n            break\n          }\n          case 'select': {\n            const optionEnums = buildOptionEnums(field.options)\n            // We get the previous field to check for a date in the case of a timezone select\n            // This works because timezone selects are always inserted right after a date with 'timezone: true'\n            const previousField = fields?.[index - 1]\n            const isTimezoneField =\n              previousField?.type === 'date' && previousField.timezone && field.name.includes('_tz')\n\n            // Timezone selects should reference the supportedTimezones definition\n            if (isTimezoneField) {\n              fieldSchema = {\n                $ref: `#/definitions/supportedTimezones`,\n              }\n            } else {\n              if (field.hasMany) {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  type: withNullableJSONSchemaType('array', isRequired),\n                  items: {\n                    type: 'string',\n                  },\n                }\n                if (optionEnums?.length) {\n                  ;(fieldSchema.items as JSONSchema4).enum = optionEnums\n                }\n              } else {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  type: withNullableJSONSchemaType('string', isRequired),\n                }\n                if (optionEnums?.length) {\n                  fieldSchema.enum = optionEnums\n                }\n              }\n            }\n\n            break\n          }\n\n          case 'text':\n            if (field.hasMany === true) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: { type: 'string' },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('string', isRequired),\n              }\n            }\n            break\n\n          default: {\n            break\n          }\n        }\n\n        if ('typescriptSchema' in field && field?.typescriptSchema?.length) {\n          for (const schema of field.typescriptSchema) {\n            fieldSchema = schema({ jsonSchema: fieldSchema })\n          }\n        }\n\n        if (fieldSchema && fieldAffectsData(field)) {\n          fieldSchemas.set(field.name, fieldSchema)\n        }\n\n        return fieldSchemas\n      }, new Map<string, JSONSchema4>()),\n    ),\n    required: Array.from(requiredFieldNames),\n  }\n}\n\n// This function is part of the public API and is exported through payload/utilities\nexport function entityToJSONSchema(\n  config: SanitizedConfig,\n  incomingEntity: SanitizedCollectionConfig | SanitizedGlobalConfig,\n  interfaceNameDefinitions: Map<string, JSONSchema4>,\n  defaultIDType: 'number' | 'text',\n  collectionIDFieldTypes?: { [key: string]: 'number' | 'string' },\n  i18n?: I18n,\n): JSONSchema4 {\n  if (!collectionIDFieldTypes) {\n    collectionIDFieldTypes = getCollectionIDFieldTypes({ config, defaultIDType })\n  }\n\n  const entity: SanitizedCollectionConfig | SanitizedGlobalConfig = deepCopyObject(incomingEntity)\n  const title = entity.typescript?.interface\n    ? entity.typescript.interface\n    : singular(toWords(entity.slug, true))\n\n  const idField: FieldAffectingData = { name: 'id', type: defaultIDType as 'text', required: true }\n  const customIdField = entity.flattenedFields.find(\n    (field) => field.name === 'id',\n  ) as FieldAffectingData\n\n  if (customIdField && customIdField.type !== 'group' && customIdField.type !== 'tab') {\n    customIdField.required = true\n  } else {\n    entity.flattenedFields.unshift(idField)\n  }\n\n  // mark timestamp fields required\n  if ('timestamps' in entity && entity.timestamps !== false) {\n    entity.flattenedFields = entity.flattenedFields.map((field) => {\n      if (field.name === 'createdAt' || field.name === 'updatedAt') {\n        return {\n          ...field,\n          required: true,\n        }\n      }\n      return field\n    })\n  }\n\n  if (\n    'auth' in entity &&\n    entity.auth &&\n    (!entity.auth?.disableLocalStrategy ||\n      (typeof entity.auth?.disableLocalStrategy === 'object' &&\n        entity.auth.disableLocalStrategy.enableFields))\n  ) {\n    entity.flattenedFields.push({\n      name: 'password',\n      type: 'text',\n    })\n  }\n\n  const jsonSchema: JSONSchema4 = {\n    type: 'object',\n    additionalProperties: false,\n    title,\n    ...fieldsToJSONSchema(\n      collectionIDFieldTypes,\n      entity.flattenedFields,\n      interfaceNameDefinitions,\n      config,\n      i18n,\n    ),\n  }\n\n  const entityDescription = entityOrFieldToJsDocs({ entity, i18n })\n\n  if (entityDescription) {\n    jsonSchema.description = entityDescription\n  }\n\n  return jsonSchema\n}\n\nexport function fieldsToSelectJSONSchema({\n  fields,\n  interfaceNameDefinitions,\n}: {\n  fields: FlattenedField[]\n  interfaceNameDefinitions: Map<string, JSONSchema4>\n}): JSONSchema4 {\n  const schema: JSONSchema4 = {\n    type: 'object',\n    additionalProperties: false,\n    properties: {},\n  }\n\n  for (const field of fields) {\n    switch (field.type) {\n      case 'array':\n      case 'group':\n      case 'tab': {\n        let fieldSchema: JSONSchema4 = fieldsToSelectJSONSchema({\n          fields: field.flattenedFields,\n          interfaceNameDefinitions,\n        })\n\n        if (field.interfaceName) {\n          const definition = `${field.interfaceName}_select`\n          interfaceNameDefinitions.set(definition, fieldSchema)\n\n          fieldSchema = {\n            $ref: `#/definitions/${definition}`,\n          }\n        }\n\n        schema.properties[field.name] = {\n          oneOf: [\n            {\n              type: 'boolean',\n            },\n            fieldSchema,\n          ],\n        }\n\n        break\n      }\n\n      case 'blocks': {\n        const blocksSchema: JSONSchema4 = {\n          type: 'object',\n          additionalProperties: false,\n          properties: {},\n        }\n\n        for (const block of field.blocks) {\n          let blockSchema = fieldsToSelectJSONSchema({\n            fields: block.flattenedFields,\n            interfaceNameDefinitions,\n          })\n\n          if (block.interfaceName) {\n            const definition = `${block.interfaceName}_select`\n            interfaceNameDefinitions.set(definition, blockSchema)\n            blockSchema = {\n              $ref: `#/definitions/${definition}`,\n            }\n          }\n\n          blocksSchema.properties[block.slug] = {\n            oneOf: [\n              {\n                type: 'boolean',\n              },\n              blockSchema,\n            ],\n          }\n        }\n\n        schema.properties[field.name] = {\n          oneOf: [\n            {\n              type: 'boolean',\n            },\n            blocksSchema,\n          ],\n        }\n\n        break\n      }\n\n      default:\n        schema.properties[field.name] = {\n          type: 'boolean',\n        }\n        break\n    }\n  }\n\n  return schema\n}\n\nconst fieldType: JSONSchema4 = {\n  type: 'string',\n  required: false,\n}\nconst generateAuthFieldTypes = ({\n  type,\n  loginWithUsername,\n}: {\n  loginWithUsername: Auth['loginWithUsername']\n  type: 'forgotOrUnlock' | 'login' | 'register'\n}): JSONSchema4 => {\n  if (loginWithUsername) {\n    switch (type) {\n      case 'forgotOrUnlock': {\n        if (loginWithUsername.allowEmailLogin) {\n          // allow email or username for unlock/forgot-password\n          return {\n            additionalProperties: false,\n            oneOf: [\n              {\n                additionalProperties: false,\n                properties: { email: fieldType },\n                required: ['email'],\n              },\n              {\n                additionalProperties: false,\n                properties: { username: fieldType },\n                required: ['username'],\n              },\n            ],\n          }\n        } else {\n          // allow only username for unlock/forgot-password\n          return {\n            additionalProperties: false,\n            properties: { username: fieldType },\n            required: ['username'],\n          }\n        }\n      }\n\n      case 'login': {\n        if (loginWithUsername.allowEmailLogin) {\n          // allow username or email and require password for login\n          return {\n            additionalProperties: false,\n            oneOf: [\n              {\n                additionalProperties: false,\n                properties: { email: fieldType, password: fieldType },\n                required: ['email', 'password'],\n              },\n              {\n                additionalProperties: false,\n                properties: { password: fieldType, username: fieldType },\n                required: ['username', 'password'],\n              },\n            ],\n          }\n        } else {\n          // allow only username and password for login\n          return {\n            additionalProperties: false,\n            properties: {\n              password: fieldType,\n              username: fieldType,\n            },\n            required: ['username', 'password'],\n          }\n        }\n      }\n\n      case 'register': {\n        const requiredFields: ('email' | 'password' | 'username')[] = ['password']\n        const properties: {\n          email?: JSONSchema4['properties']\n          password?: JSONSchema4['properties']\n          username?: JSONSchema4['properties']\n        } = {\n          password: fieldType,\n          username: fieldType,\n        }\n\n        if (loginWithUsername.requireEmail) {\n          requiredFields.push('email')\n        }\n        if (loginWithUsername.requireUsername) {\n          requiredFields.push('username')\n        }\n        if (loginWithUsername.requireEmail || loginWithUsername.allowEmailLogin) {\n          properties.email = fieldType\n        }\n\n        return {\n          additionalProperties: false,\n          properties,\n          required: requiredFields,\n        }\n      }\n    }\n  }\n\n  // default email (and password for login/register)\n  return {\n    additionalProperties: false,\n    properties: { email: fieldType, password: fieldType },\n    required: ['email', 'password'],\n  }\n}\n\nexport function authCollectionToOperationsJSONSchema(\n  config: SanitizedCollectionConfig,\n): JSONSchema4 {\n  const loginWithUsername = config.auth?.loginWithUsername\n  const loginUserFields: JSONSchema4 = generateAuthFieldTypes({ type: 'login', loginWithUsername })\n  const forgotOrUnlockUserFields: JSONSchema4 = generateAuthFieldTypes({\n    type: 'forgotOrUnlock',\n    loginWithUsername,\n  })\n  const registerUserFields: JSONSchema4 = generateAuthFieldTypes({\n    type: 'register',\n    loginWithUsername,\n  })\n\n  const properties: JSONSchema4['properties'] = {\n    forgotPassword: forgotOrUnlockUserFields,\n    login: loginUserFields,\n    registerFirstUser: registerUserFields,\n    unlock: forgotOrUnlockUserFields,\n  }\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n    title: `${singular(toWords(`${config.slug}`, true))}AuthOperations`,\n  }\n}\n\n// Generates the JSON Schema for supported timezones\nexport function timezonesToJSONSchema(\n  supportedTimezones: SanitizedConfig['admin']['timezones']['supportedTimezones'],\n): JSONSchema4 {\n  return {\n    description: 'Supported timezones in IANA format.',\n    enum: supportedTimezones.map((timezone) =>\n      typeof timezone === 'string' ? timezone : timezone.value,\n    ),\n  }\n}\n\nfunction generateAuthOperationSchemas(collections: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties = collections.reduce((acc, collection) => {\n    if (collection.auth) {\n      acc[collection.slug] = {\n        $ref: `#/definitions/auth/${collection.slug}`,\n      }\n    }\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\n/**\n * This is used for generating the TypeScript types (payload-types.ts) with the payload generate:types command.\n */\nexport function configToJSONSchema(\n  config: SanitizedConfig,\n  defaultIDType?: 'number' | 'text',\n  i18n?: I18n,\n): JSONSchema4 {\n  // a mutable Map to store custom top-level `interfaceName` types. Fields with an `interfaceName` property will be moved to the top-level definitions here\n  const interfaceNameDefinitions: Map<string, JSONSchema4> = new Map()\n\n  //  Used for relationship fields, to determine whether to use a string or number type for the ID.\n  const collectionIDFieldTypes = getCollectionIDFieldTypes({ config, defaultIDType })\n\n  // Collections and Globals have to be moved to the top-level definitions as well. Reason: The top-level type will be the `Config` type - we don't want all collection and global\n  // types to be inlined inside the `Config` type\n\n  const entities: {\n    entity: SanitizedCollectionConfig | SanitizedGlobalConfig\n    type: 'collection' | 'global'\n  }[] = [\n    ...config.globals.map((global) => ({ type: 'global' as const, entity: global })),\n    ...config.collections.map((collection) => ({\n      type: 'collection' as const,\n      entity: collection,\n    })),\n  ]\n\n  const entityDefinitions: { [k: string]: JSONSchema4 } = entities.reduce(\n    (acc, { type, entity }) => {\n      acc[entity.slug] = entityToJSONSchema(\n        config,\n        entity,\n        interfaceNameDefinitions,\n        defaultIDType,\n        collectionIDFieldTypes,\n        i18n,\n      )\n      const select = fieldsToSelectJSONSchema({\n        fields: entity.flattenedFields,\n        interfaceNameDefinitions,\n      })\n\n      if (type === 'global') {\n        select.properties.globalType = {\n          type: 'boolean',\n        }\n      }\n\n      acc[`${entity.slug}_select`] = {\n        type: 'object',\n        additionalProperties: false,\n        ...select,\n      }\n\n      return acc\n    },\n    {},\n  )\n\n  const timezoneDefinitions = timezonesToJSONSchema(config.admin.timezones.supportedTimezones)\n\n  const authOperationDefinitions = [...config.collections]\n    .filter(({ auth }) => Boolean(auth))\n    .reduce(\n      (acc, authCollection) => {\n        acc.auth[authCollection.slug] = authCollectionToOperationsJSONSchema(authCollection)\n        return acc\n      },\n      { auth: {} },\n    )\n\n  const jobsSchemas = config.jobs\n    ? generateJobsJSONSchemas(\n        config,\n        config.jobs,\n        interfaceNameDefinitions,\n        collectionIDFieldTypes,\n        i18n,\n      )\n    : {}\n\n  let jsonSchema: JSONSchema4 = {\n    additionalProperties: false,\n    definitions: {\n      supportedTimezones: timezoneDefinitions,\n      ...entityDefinitions,\n      ...Object.fromEntries(interfaceNameDefinitions),\n      ...authOperationDefinitions,\n    },\n    // These properties here will be very simple, as all the complexity is in the definitions. These are just the properties for the top-level `Config` type\n    type: 'object',\n    properties: {\n      auth: generateAuthOperationSchemas(config.collections),\n      collections: generateEntitySchemas(config.collections || []),\n      collectionsJoins: generateCollectionJoinsSchemas(config.collections || []),\n      collectionsSelect: generateEntitySelectSchemas(config.collections || []),\n      db: generateDbEntitySchema(config),\n      globals: generateEntitySchemas(config.globals || []),\n      globalsSelect: generateEntitySelectSchemas(config.globals || []),\n      locale: generateLocaleEntitySchemas(config.localization),\n      user: generateAuthEntitySchemas(config.collections),\n    },\n    required: [\n      'user',\n      'locale',\n      'collections',\n      'collectionsSelect',\n      'collectionsJoins',\n      'globalsSelect',\n      'globals',\n      'auth',\n      'db',\n      'jobs',\n    ],\n    title: 'Config',\n  }\n  if (jobsSchemas.definitions?.size) {\n    for (const [key, value] of jobsSchemas.definitions) {\n      jsonSchema.definitions[key] = value\n    }\n  }\n  if (jobsSchemas.properties) {\n    jsonSchema.properties.jobs = {\n      type: 'object',\n      additionalProperties: false,\n      properties: jobsSchemas.properties,\n      required: ['tasks', 'workflows'],\n    }\n  }\n\n  if (config?.typescript?.schema?.length) {\n    for (const schema of config.typescript.schema) {\n      jsonSchema = schema({ collectionIDFieldTypes, config, i18n, jsonSchema })\n    }\n  }\n\n  return jsonSchema\n}\n"],"names":["pluralize","singular","MissingEditorProp","fieldAffectsData","generateJobsJSONSchemas","deepCopyObject","toWords","getCollectionIDFieldTypes","fieldIsRequired","field","isConditional","Boolean","admin","condition","isMarkedRequired","required","type","flattenedFields","some","subField","buildOptionEnums","options","map","option","value","generateEntitySchemas","entities","properties","reduce","acc","slug","$ref","additionalProperties","Object","keys","generateEntitySelectSchemas","generateCollectionJoinsSchemas","collections","joins","schema","collectionSlug","join","joinPath","enum","push","length","generateLocaleEntitySchemas","localization","locales","localesFromConfig","locale","code","generateAuthEntitySchemas","filter","auth","allOf","collection","oneOf","generateDbEntitySchema","config","defaultIDType","db","withNullableJSONSchemaType","fieldType","isRequired","fieldTypes","entityOrFieldToJsDocs","entity","i18n","description","undefined","en","language","fieldsToJSONSchema","collectionIDFieldTypes","fields","interfaceNameDefinitions","requiredFieldNames","Set","fromEntries","fieldSchemas","index","add","name","fieldDescription","baseFieldSchema","fieldSchema","items","interfaceName","set","hasBlocks","blocks","block","blockFieldSchemas","blockSchema","blockType","const","docs","hasNextPage","jsonSchema","hasMany","maxItems","minItems","Array","isArray","relationTo","relation","editor","Error","outputSchema","optionEnums","previousField","isTimezoneField","timezone","includes","typescriptSchema","Map","from","entityToJSONSchema","incomingEntity","title","typescript","interface","idField","customIdField","find","unshift","timestamps","disableLocalStrategy","enableFields","entityDescription","fieldsToSelectJSONSchema","definition","blocksSchema","generateAuthFieldTypes","loginWithUsername","allowEmailLogin","email","username","password","requiredFields","requireEmail","requireUsername","authCollectionToOperationsJSONSchema","loginUserFields","forgotOrUnlockUserFields","registerUserFields","forgotPassword","login","registerFirstUser","unlock","timezonesToJSONSchema","supportedTimezones","generateAuthOperationSchemas","configToJSONSchema","globals","global","entityDefinitions","select","globalType","timezoneDefinitions","timezones","authOperationDefinitions","authCollection","jobsSchemas","jobs","definitions","collectionsJoins","collectionsSelect","globalsSelect","user","size","key"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4013, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4039, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/logError.ts"],"sourcesContent":["import type pino from 'pino'\n\nimport type { Payload } from '../types/index.js'\n\nexport const logError = ({ err, payload }: { err: unknown; payload: Payload }): void => {\n  let level: false | pino.Level = 'error'\n\n  if (\n    err &&\n    typeof err === 'object' &&\n    'name' in err &&\n    typeof err.name === 'string' &&\n    typeof payload.config.loggingLevels[err.name] !== 'undefined'\n  ) {\n    level = payload.config.loggingLevels[err.name]\n  }\n\n  if (level) {\n    const logObject: { err?: unknown; msg?: unknown } = {}\n\n    if (level === 'info') {\n      logObject.msg = typeof err === 'object' && 'message' in err ? err.message : 'Error'\n    } else {\n      logObject.err = err\n    }\n\n    payload.logger[level](logObject)\n  }\n}\n"],"names":["logError","err","payload","level","name","config","loggingLevels","logObject","msg","message","logger"],"mappings":";;;AAIO,MAAMA,WAAW,CAAC,EAAEC,GAAG,EAAEC,OAAO,EAAsC;IAC3E,IAAIC,QAA4B;IAEhC,IACEF,OACA,OAAOA,QAAQ,YACf,UAAUA,OACV,OAAOA,IAAIG,IAAI,KAAK,YACpB,OAAOF,QAAQG,MAAM,CAACC,aAAa,CAACL,IAAIG,IAAI,CAAC,KAAK,aAClD;QACAD,QAAQD,QAAQG,MAAM,CAACC,aAAa,CAACL,IAAIG,IAAI,CAAC;IAChD;IAEA,IAAID,OAAO;QACT,MAAMI,YAA8C,CAAC;QAErD,IAAIJ,UAAU,QAAQ;YACpBI,UAAUC,GAAG,GAAG,OAAOP,QAAQ,YAAY,aAAaA,MAAMA,IAAIQ,OAAO,GAAG;QAC9E,OAAO;YACLF,UAAUN,GAAG,GAAGA;QAClB;QAEAC,QAAQQ,MAAM,CAACP,MAAM,CAACI;IACxB;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4057, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4063, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/logger.ts"],"sourcesContent":["import { type Logger, pino } from 'pino'\nimport { build, type PinoPretty, type PrettyOptions } from 'pino-pretty'\n\nimport type { Config } from '../config/types.js'\n\n/**\n * Payload internal logger. Uses Pino.\n * This allows you to bring your own logger instance and let payload use it\n */\nexport type PayloadLogger = Logger\n\nconst prettyOptions: PrettyOptions = {\n  colorize: true,\n  ignore: 'pid,hostname',\n  translateTime: 'SYS:HH:MM:ss',\n}\n\nexport const prettySyncLoggerDestination: PinoPretty.PrettyStream = build({\n  ...prettyOptions,\n  destination: 1, // stdout\n  sync: true,\n})\n\nexport const defaultLoggerOptions: PinoPretty.PrettyStream = build(prettyOptions)\n\nexport const getLogger = (name = 'payload', logger?: Config['logger']): PayloadLogger => {\n  if (!logger) {\n    return pino(defaultLoggerOptions)\n  }\n\n  // Synchronous logger used by bin scripts\n  if (logger === 'sync') {\n    return pino(prettySyncLoggerDestination)\n  }\n\n  // Check if logger is an object\n  if ('options' in logger) {\n    const { destination, options } = logger\n\n    if (!options.name) {\n      options.name = name\n    }\n\n    if (!options.enabled) {\n      options.enabled = process.env.DISABLE_LOGGING !== 'true'\n    }\n\n    return pino(options, destination)\n  } else {\n    // Instantiated logger\n    return logger\n  }\n}\n"],"names":["pino","build","prettyOptions","colorize","ignore","translateTime","prettySyncLoggerDestination","destination","sync","defaultLoggerOptions","getLogger","name","logger","options","enabled","process","env","DISABLE_LOGGING"],"mappings":";;;;;AAAA,SAAsBA,IAAI,QAAQ,OAAM;AACxC,SAASC,KAAK,QAA6C,cAAa;;;AAUxE,MAAMC,gBAA+B;IACnCC,UAAU;IACVC,QAAQ;IACRC,eAAe;AACjB;AAEO,MAAMC,wOAAuDL,QAAAA,EAAM;IACxE,GAAGC,aAAa;IAChBK,aAAa;IACbC,MAAM;AACR,GAAE;AAEK,MAAMC,iOAAgDR,QAAAA,EAAMC,eAAc;AAE1E,MAAMQ,YAAY,CAACC,OAAO,SAAS,EAAEC;IAC1C,IAAI,CAACA,QAAQ;QACX,2LAAOZ,OAAAA,EAAKS;IACd;IAEA,yCAAyC;IACzC,IAAIG,WAAW,QAAQ;QACrB,2LAAOZ,OAAAA,EAAKM;IACd;IAEA,+BAA+B;IAC/B,IAAI,aAAaM,QAAQ;QACvB,MAAM,EAAEL,WAAW,EAAEM,OAAO,EAAE,GAAGD;QAEjC,IAAI,CAACC,QAAQF,IAAI,EAAE;YACjBE,QAAQF,IAAI,GAAGA;QACjB;QAEA,IAAI,CAACE,QAAQC,OAAO,EAAE;YACpBD,QAAQC,OAAO,GAAGC,QAAQC,GAAG,CAACC,eAAe,KAAK;QACpD;QAEA,2LAAOjB,OAAAA,EAAKa,SAASN;IACvB,OAAO;QACL,sBAAsB;QACtB,OAAOK;IACT;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4106, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4112, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/events/serverInit.ts"],"sourcesContent":["import type { Payload } from '../../../index.js'\n\nimport { sendEvent } from '../index.js'\n\nexport type ServerInitEvent = {\n  type: 'server-init'\n}\n\nexport const serverInit = (payload: Payload): void => {\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  sendEvent({\n    event: {\n      type: 'server-init',\n    },\n    payload,\n  })\n}\n"],"names":["sendEvent","serverInit","payload","event","type"],"mappings":";;;AAEA,SAASA,SAAS,QAAQ,cAAa;;AAMhC,MAAMC,aAAa,CAACC;IACzB,mEAAmE;mYACnEF,YAAAA,EAAU;QACRG,OAAO;YACLC,MAAM;QACR;QACAF;IACF;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4126, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4132, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isNextBuild.ts"],"sourcesContent":["/**\n * Utility function to determine if the code is being executed during the Next.js build process.\n */\nexport function isNextBuild() {\n  return (\n    process.env.NEXT_PHASE === 'phase-production-build' ||\n    process.env.npm_lifecycle_event === 'build'\n  )\n}\n"],"names":["isNextBuild","process","env","NEXT_PHASE","npm_lifecycle_event"],"mappings":"AAAA;;CAEC,GACD;;;AAAO,SAASA;IACd,OACEC,QAAQC,GAAG,CAACC,UAAU,KAAK,4BAC3BF,QAAQC,GAAG,CAACE,mBAAmB,KAAK;AAExC","ignoreList":[0]}},
    {"offset": {"line": 4140, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4146, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getRequestLanguage.ts"],"sourcesContent":["import type { AcceptedLanguages } from '@payloadcms/translations'\nimport type { ReadonlyRequestCookies } from 'next/dist/server/web/spec-extension/adapters/request-cookies.js'\n\nimport { extractHeaderLanguage } from '@payloadcms/translations'\n\nimport type { SanitizedConfig } from '../config/types.js'\n\ntype GetRequestLanguageArgs = {\n  config: SanitizedConfig\n  cookies: Map<string, string> | ReadonlyRequestCookies\n  defaultLanguage?: AcceptedLanguages\n  headers: Request['headers']\n}\n\nexport const getRequestLanguage = ({\n  config,\n  cookies,\n  headers,\n}: GetRequestLanguageArgs): AcceptedLanguages => {\n  const supportedLanguageKeys = <AcceptedLanguages[]>Object.keys(config.i18n.supportedLanguages)\n  const langCookie = cookies.get(`${config.cookiePrefix || 'payload'}-lng`)\n\n  const languageFromCookie: AcceptedLanguages = (\n    typeof langCookie === 'string' ? langCookie : langCookie?.value\n  ) as AcceptedLanguages\n\n  if (languageFromCookie && supportedLanguageKeys.includes(languageFromCookie)) {\n    return languageFromCookie\n  }\n\n  const languageFromHeader = headers.get('Accept-Language')\n    ? extractHeaderLanguage(headers.get('Accept-Language'))\n    : undefined\n\n  if (languageFromHeader && supportedLanguageKeys.includes(languageFromHeader)) {\n    return languageFromHeader\n  }\n\n  return config.i18n.fallbackLanguage\n}\n"],"names":["extractHeaderLanguage","getRequestLanguage","config","cookies","headers","supportedLanguageKeys","Object","keys","i18n","supportedLanguages","langCookie","get","cookiePrefix","languageFromCookie","value","includes","languageFromHeader","undefined","fallbackLanguage"],"mappings":";;;AAGA,SAASA,qBAAqB,QAAQ,2BAA0B;;;AAWzD,MAAMC,qBAAqB,CAAC,EACjCC,MAAM,EACNC,OAAO,EACPC,OAAO,EACgB;IACvB,MAAMC,wBAA6CC,OAAOC,IAAI,CAACL,OAAOM,IAAI,CAACC,kBAAkB;IAC7F,MAAMC,aAAaP,QAAQQ,GAAG,CAAC,GAAGT,OAAOU,YAAY,IAAI,UAAU,IAAI,CAAC;IAExE,MAAMC,qBACJ,OAAOH,eAAe,WAAWA,aAAaA,YAAYI;IAG5D,IAAID,sBAAsBR,sBAAsBU,QAAQ,CAACF,qBAAqB;QAC5E,OAAOA;IACT;IAEA,MAAMG,qBAAqBZ,QAAQO,GAAG,CAAC,oRACnCX,wBAAAA,EAAsBI,QAAQO,GAAG,CAAC,sBAClCM;IAEJ,IAAID,sBAAsBX,sBAAsBU,QAAQ,CAACC,qBAAqB;QAC5E,OAAOA;IACT;IAEA,OAAOd,OAAOM,IAAI,CAACU,gBAAgB;AACrC,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4165, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4171, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/createPayloadRequest.ts"],"sourcesContent":["import { initI18n } from '@payloadcms/translations'\nimport * as qs from 'qs-esm'\n\nimport type { SanitizedConfig } from '../config/types.js'\nimport type { CustomPayloadRequestProperties, PayloadRequest } from '../types/index.js'\n\nimport { executeAuthStrategies } from '../auth/executeAuthStrategies.js'\nimport { getDataLoader } from '../collections/dataloader.js'\nimport { getPayload } from '../index.js'\nimport { sanitizeLocales } from './addLocalesToRequest.js'\nimport { getRequestLanguage } from './getRequestLanguage.js'\nimport { parseCookies } from './parseCookies.js'\nimport { sanitizeFallbackLocale } from './sanitizeFallbackLocale.js'\n\ntype Args = {\n  config: Promise<SanitizedConfig> | SanitizedConfig\n  params?: {\n    collection: string\n  }\n  request: Request\n}\n\nexport const createPayloadRequest = async ({\n  config: configPromise,\n  params,\n  request,\n}: Args): Promise<PayloadRequest> => {\n  const cookies = parseCookies(request.headers)\n  const payload = await getPayload({ config: configPromise })\n\n  const { config } = payload\n  const localization = config.localization\n\n  const urlProperties = new URL(request.url)\n  const { pathname, searchParams } = urlProperties\n\n  const isGraphQL =\n    !config.graphQL.disable && pathname === `${config.routes.api}${config.routes.graphQL}`\n\n  const language = getRequestLanguage({\n    config,\n    cookies,\n    headers: request.headers,\n  })\n\n  const i18n = await initI18n({\n    config: config.i18n,\n    context: 'api',\n    language,\n  })\n\n  const fallbackFromRequest =\n    searchParams.get('fallback-locale') || searchParams.get('fallbackLocale')\n  let locale = searchParams.get('locale')\n  let fallbackLocale = fallbackFromRequest\n\n  const { search: queryToParse } = urlProperties\n\n  const query = queryToParse\n    ? qs.parse(queryToParse, {\n        arrayLimit: 1000,\n        depth: 10,\n        ignoreQueryPrefix: true,\n      })\n    : {}\n\n  if (localization) {\n    fallbackLocale = sanitizeFallbackLocale({\n      fallbackLocale,\n      locale,\n      localization,\n    })\n\n    const locales = sanitizeLocales({\n      fallbackLocale,\n      locale,\n      localization,\n    })\n\n    locale = locales.locale\n  }\n\n  const customRequest: CustomPayloadRequestProperties = {\n    context: {},\n    fallbackLocale,\n    hash: urlProperties.hash,\n    host: urlProperties.host,\n    href: urlProperties.href,\n    i18n,\n    locale,\n    origin: urlProperties.origin,\n    pathname: urlProperties.pathname,\n    payload,\n    payloadAPI: isGraphQL ? 'GraphQL' : 'REST',\n    payloadDataLoader: undefined,\n    payloadUploadSizes: {},\n    port: urlProperties.port,\n    protocol: urlProperties.protocol,\n    query,\n    routeParams: params || {},\n    search: urlProperties.search,\n    searchParams: urlProperties.searchParams,\n    t: i18n.t,\n    transactionID: undefined,\n    user: null,\n  }\n\n  const req: PayloadRequest = Object.assign(request, customRequest)\n\n  req.payloadDataLoader = getDataLoader(req)\n\n  const { responseHeaders, user } = await executeAuthStrategies({\n    headers: req.headers,\n    isGraphQL,\n    payload,\n  })\n\n  req.user = user\n\n  if (responseHeaders) {\n    req.responseHeaders = responseHeaders\n  }\n\n  return req\n}\n"],"names":["initI18n","qs","executeAuthStrategies","getDataLoader","getPayload","sanitizeLocales","getRequestLanguage","parseCookies","sanitizeFallbackLocale","createPayloadRequest","config","configPromise","params","request","cookies","headers","payload","localization","urlProperties","URL","url","pathname","searchParams","isGraphQL","graphQL","disable","routes","api","language","i18n","context","fallbackFromRequest","get","locale","fallbackLocale","search","queryToParse","query","parse","arrayLimit","depth","ignoreQueryPrefix","locales","customRequest","hash","host","href","origin","payloadAPI","payloadDataLoader","undefined","payloadUploadSizes","port","protocol","routeParams","t","transactionID","user","req","Object","assign","responseHeaders"],"mappings":";;;AAAA,SAASA,QAAQ,QAAQ,2BAA0B;AAWnD,SAASO,YAAY,QAAQ,oBAAmB;AAHhD,SAASH,UAAU,QAAQ,cAAa;AAExC,SAASE,kBAAkB,QAAQ,0BAAyB;;AAT5D,YAAYL,QAAQ,SAAQ;AAW5B,SAASO,sBAAsB,QAAQ,8BAA6B;AAHpE,SAASH,eAAe,QAAQ,2BAA0B;AAF1D,SAASF,aAAa,QAAQ,+BAA8B;AAD5D,SAASD,qBAAqB,QAAQ,mCAAkC;;;;;;;;;;AAgBjE,MAAMO,uBAAuB,OAAO,EACzCC,QAAQC,aAAa,EACrBC,MAAM,EACNC,OAAO,EACF;IACL,MAAMC,UAAUP,wYAAAA,EAAaM,QAAQE,OAAO;IAC5C,MAAMC,UAAU,2XAAMZ,aAAAA,EAAW;QAAEM,QAAQC;IAAc;IAEzD,MAAM,EAAED,MAAM,EAAE,GAAGM;IACnB,MAAMC,eAAeP,OAAOO,YAAY;IAExC,MAAMC,gBAAgB,IAAIC,IAAIN,QAAQO,GAAG;IACzC,MAAM,EAAEC,QAAQ,EAAEC,YAAY,EAAE,GAAGJ;IAEnC,MAAMK,YACJ,CAACb,OAAOc,OAAO,CAACC,OAAO,IAAIJ,aAAa,GAAGX,OAAOgB,MAAM,CAACC,GAAG,GAAGjB,OAAOgB,MAAM,CAACF,OAAO,EAAE;IAExF,MAAMI,YAAWtB,mZAAAA,EAAmB;QAClCI;QACAI;QACAC,SAASF,QAAQE,OAAO;IAC1B;IAEA,MAAMc,OAAO,gQAAM7B,WAAAA,EAAS;QAC1BU,QAAQA,OAAOmB,IAAI;QACnBC,SAAS;QACTF;IACF;IAEA,MAAMG,sBACJT,aAAaU,GAAG,CAAC,sBAAsBV,aAAaU,GAAG,CAAC;IAC1D,IAAIC,SAASX,aAAaU,GAAG,CAAC;IAC9B,IAAIE,iBAAiBH;IAErB,MAAM,EAAEI,QAAQC,YAAY,EAAE,GAAGlB;IAEjC,MAAMmB,QAAQD,eACVnC,kMAAGqC,KAAK,CAACF,cAAc;QACrBG,YAAY;QACZC,OAAO;QACPC,mBAAmB;IACrB,KACA,CAAC;IAEL,IAAIxB,cAAc;QAChBiB,oZAAiB1B,yBAAAA,EAAuB;YACtC0B;YACAD;YACAhB;QACF;QAEA,MAAMyB,0YAAUrC,kBAAAA,EAAgB;YAC9B6B;YACAD;YACAhB;QACF;QAEAgB,SAASS,QAAQT,MAAM;IACzB;IAEA,MAAMU,gBAAgD;QACpDb,SAAS,CAAC;QACVI;QACAU,MAAM1B,cAAc0B,IAAI;QACxBC,MAAM3B,cAAc2B,IAAI;QACxBC,MAAM5B,cAAc4B,IAAI;QACxBjB;QACAI;QACAc,QAAQ7B,cAAc6B,MAAM;QAC5B1B,UAAUH,cAAcG,QAAQ;QAChCL;QACAgC,YAAYzB,YAAY,YAAY;QACpC0B,mBAAmBC;QACnBC,oBAAoB,CAAC;QACrBC,MAAMlC,cAAckC,IAAI;QACxBC,UAAUnC,cAAcmC,QAAQ;QAChChB;QACAiB,aAAa1C,UAAU,CAAC;QACxBuB,QAAQjB,cAAciB,MAAM;QAC5Bb,cAAcJ,cAAcI,YAAY;QACxCiC,GAAG1B,KAAK0B,CAAC;QACTC,eAAeN;QACfO,MAAM;IACR;IAEA,MAAMC,MAAsBC,OAAOC,MAAM,CAAC/C,SAAS8B;IAEnDe,IAAIT,iBAAiB,GAAG9C,yYAAAA,EAAcuD;IAEtC,MAAM,EAAEG,eAAe,EAAEJ,IAAI,EAAE,GAAG,mYAAMvD,wBAAAA,EAAsB;QAC5Da,SAAS2C,IAAI3C,OAAO;QACpBQ;QACAP;IACF;IAEA0C,IAAID,IAAI,GAAGA;IAEX,IAAII,iBAAiB;QACnBH,IAAIG,eAAe,GAAGA;IACxB;IAEA,OAAOH;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4272, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4278, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/mergeHeaders.ts"],"sourcesContent":["export const mergeHeaders = (sourceHeaders: Headers, destinationHeaders: Headers): Headers => {\n  // Create a new Headers object\n  const combinedHeaders = new Headers(destinationHeaders)\n\n  // Append sourceHeaders to combinedHeaders\n  sourceHeaders.forEach((value, key) => {\n    combinedHeaders.append(key, value)\n  })\n\n  return combinedHeaders\n}\n"],"names":["mergeHeaders","sourceHeaders","destinationHeaders","combinedHeaders","Headers","forEach","value","key","append"],"mappings":";;;AAAO,MAAMA,eAAe,CAACC,eAAwBC;IACnD,8BAA8B;IAC9B,MAAMC,kBAAkB,IAAIC,QAAQF;IAEpC,0CAA0C;IAC1CD,cAAcI,OAAO,CAAC,CAACC,OAAOC;QAC5BJ,gBAAgBK,MAAM,CAACD,KAAKD;IAC9B;IAEA,OAAOH;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4290, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4296, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/formatErrors.ts"],"sourcesContent":["import type { ErrorResult } from '../config/types.js'\nimport type { APIError } from '../errors/APIError.js'\n\nimport { APIErrorName } from '../errors/APIError.js'\nimport { ValidationErrorName } from '../errors/ValidationError.js'\n\nexport const formatErrors = (incoming: { [key: string]: unknown } | APIError): ErrorResult => {\n  if (incoming) {\n    // Cannot use `instanceof` to check error type: https://github.com/microsoft/TypeScript/issues/13965\n    // Instead, get the prototype of the incoming error and check its constructor name\n    const proto = Object.getPrototypeOf(incoming)\n\n    // Payload 'ValidationError' and 'APIError'\n    if (\n      (proto.constructor.name === ValidationErrorName || proto.constructor.name === APIErrorName) &&\n      incoming.data\n    ) {\n      return {\n        errors: [\n          {\n            name: incoming.name,\n            data: incoming.data,\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n\n    // Mongoose 'ValidationError': https://mongoosejs.com/docs/api/error.html#Error.ValidationError\n    if (proto.constructor.name === ValidationErrorName && 'errors' in incoming && incoming.errors) {\n      return {\n        errors: Object.keys(incoming.errors).reduce((acc, key) => {\n          acc.push({\n            field: incoming.errors[key].path,\n            message: incoming.errors[key].message,\n          })\n          return acc\n        }, []),\n      }\n    }\n\n    if (Array.isArray(incoming.message)) {\n      return {\n        errors: incoming.message,\n      }\n    }\n\n    if (incoming.name) {\n      return {\n        errors: [\n          {\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n  }\n\n  return {\n    errors: [\n      {\n        message: 'An unknown error occurred.',\n      },\n    ],\n  }\n}\n"],"names":["APIErrorName","ValidationErrorName","formatErrors","incoming","proto","Object","getPrototypeOf","constructor","name","data","errors","message","keys","reduce","acc","key","push","field","path","Array","isArray"],"mappings":";;;AAIA,SAASC,mBAAmB,QAAQ,+BAA8B;AADlE,SAASD,YAAY,QAAQ,wBAAuB;;;AAG7C,MAAME,eAAe,CAACC;IAC3B,IAAIA,UAAU;QACZ,oGAAoG;QACpG,kFAAkF;QAClF,MAAMC,QAAQC,OAAOC,cAAc,CAACH;QAEpC,2CAA2C;QAC3C,IACGC,CAAAA,MAAMG,WAAW,CAACC,IAAI,KAAKP,2YAAAA,IAAuBG,MAAMG,WAAW,CAACC,IAAI,mXAAKR,eAAW,KACzFG,SAASM,IAAI,EACb;YACA,OAAO;gBACLC,QAAQ;oBACN;wBACEF,MAAML,SAASK,IAAI;wBACnBC,MAAMN,SAASM,IAAI;wBACnBE,SAASR,SAASQ,OAAO;oBAC3B;iBACD;YACH;QACF;QAEA,+FAA+F;QAC/F,IAAIP,MAAMG,WAAW,CAACC,IAAI,0XAAKP,sBAAAA,IAAuB,YAAYE,YAAYA,SAASO,MAAM,EAAE;YAC7F,OAAO;gBACLA,QAAQL,OAAOO,IAAI,CAACT,SAASO,MAAM,EAAEG,MAAM,CAAC,CAACC,KAAKC;oBAChDD,IAAIE,IAAI,CAAC;wBACPC,OAAOd,SAASO,MAAM,CAACK,IAAI,CAACG,IAAI;wBAChCP,SAASR,SAASO,MAAM,CAACK,IAAI,CAACJ,OAAO;oBACvC;oBACA,OAAOG;gBACT,GAAG,EAAE;YACP;QACF;QAEA,IAAIK,MAAMC,OAAO,CAACjB,SAASQ,OAAO,GAAG;YACnC,OAAO;gBACLD,QAAQP,SAASQ,OAAO;YAC1B;QACF;QAEA,IAAIR,SAASK,IAAI,EAAE;YACjB,OAAO;gBACLE,QAAQ;oBACN;wBACEC,SAASR,SAASQ,OAAO;oBAC3B;iBACD;YACH;QACF;IACF;IAEA,OAAO;QACLD,QAAQ;YACN;gBACEC,SAAS;YACX;SACD;IACH;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4355, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4361, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/routeError.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { Collection } from '../collections/config/types.js'\nimport type { ErrorResult, SanitizedConfig } from '../config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from '../errors/APIError.js'\nimport { getPayload } from '../index.js'\nimport { formatErrors } from './formatErrors.js'\nimport { headersWithCors } from './headersWithCors.js'\nimport { logError } from './logError.js'\nimport { mergeHeaders } from './mergeHeaders.js'\n\nexport const routeError = async ({\n  collection,\n  config: configArg,\n  err,\n  req: incomingReq,\n}: {\n  collection?: Collection\n  config: Promise<SanitizedConfig> | SanitizedConfig\n  err: APIError\n  req: PayloadRequest | Request\n}) => {\n  if ('payloadInitError' in err && err.payloadInitError === true) {\n    // do not attempt initializing Payload if the error is due to a failed initialization. Otherwise,\n    // it will cause an infinite loop of initialization attempts and endless error responses, without\n    // actually logging the error, as the error logging code will never be reached.\n    console.error(err)\n    return Response.json(\n      {\n        message: 'There was an error initializing Payload',\n      },\n      { status: httpStatus.INTERNAL_SERVER_ERROR },\n    )\n  }\n\n  let payload = incomingReq && 'payload' in incomingReq && incomingReq?.payload\n\n  if (!payload) {\n    try {\n      payload = await getPayload({ config: configArg })\n    } catch (e) {\n      return Response.json(\n        {\n          message: 'There was an error initializing Payload',\n        },\n        { status: httpStatus.INTERNAL_SERVER_ERROR },\n      )\n    }\n  }\n\n  let response = formatErrors(err)\n\n  let status = err.status || httpStatus.INTERNAL_SERVER_ERROR\n\n  logError({ err, payload })\n\n  const req = incomingReq as PayloadRequest\n\n  req.payload = payload\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  const { config } = payload\n\n  // Internal server errors can contain anything, including potentially sensitive data.\n  // Therefore, error details will be hidden from the response unless `config.debug` is `true`\n  if (!config.debug && !err.isPublic && status === httpStatus.INTERNAL_SERVER_ERROR) {\n    response = formatErrors(new APIError('Something went wrong.'))\n  }\n\n  if (config.debug && config.debug === true) {\n    response.stack = err.stack\n  }\n\n  if (collection) {\n    await collection.config.hooks.afterError?.reduce(async (promise, hook) => {\n      await promise\n\n      const result = await hook({\n        collection: collection.config,\n        context: req.context,\n        error: err,\n        req,\n        result: response,\n      })\n\n      if (result) {\n        response = (result.response as ErrorResult) || response\n        status = result.status || status\n      }\n    }, Promise.resolve())\n  }\n\n  await config.hooks.afterError?.reduce(async (promise, hook) => {\n    await promise\n\n    const result = await hook({\n      collection: collection?.config,\n      context: req.context,\n      error: err,\n      req,\n      result: response,\n    })\n\n    if (result) {\n      response = (result.response as ErrorResult) || response\n      status = result.status || status\n    }\n  }, Promise.resolve())\n\n  return Response.json(response, {\n    headers: req.responseHeaders ? mergeHeaders(req.responseHeaders, headers) : headers,\n    status,\n  })\n}\n"],"names":["status","httpStatus","APIError","getPayload","formatErrors","headersWithCors","logError","mergeHeaders","routeError","collection","config","configArg","err","req","incomingReq","payloadInitError","console","error","Response","json","message","INTERNAL_SERVER_ERROR","payload","e","response","headers","Headers","debug","isPublic","stack","hooks","afterError","reduce","promise","hook","result","context","Promise","resolve","responseHeaders"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4461, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4467, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/apps/payload/node_modules/.pnpm/payload%403.23.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/handleEndpoints.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\nimport { match } from 'path-to-regexp'\n\nimport type { Collection } from '../collections/config/types.js'\nimport type { Endpoint, PayloadHandler, SanitizedConfig } from '../config/types.js'\nimport type { GlobalConfig } from '../globals/config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { createPayloadRequest } from './createPayloadRequest.js'\nimport { headersWithCors } from './headersWithCors.js'\nimport { mergeHeaders } from './mergeHeaders.js'\nimport { routeError } from './routeError.js'\n\nconst notFoundResponse = (req: PayloadRequest, pathname?: string) => {\n  return Response.json(\n    {\n      message: `Route not found \"${pathname ?? new URL(req.url).pathname}\"`,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.NOT_FOUND,\n    },\n  )\n}\n\n/**\n * Attaches the Payload REST API to any backend framework that uses Fetch Request/Response\n * like Next.js (app router), Remix, Bun, Hono.\n *\n * ### Example: Using Hono\n * ```ts\n * import { handleEndpoints } from 'payload';\n * import { serve } from '@hono/node-server';\n * import { loadEnv } from 'payload/node';\n *\n * const port = 3001;\n * loadEnv();\n *\n * const { default: config } = await import('@payload-config');\n *\n * const server = serve({\n *   fetch: async (request) => {\n *     const response = await handleEndpoints({\n *       config,\n *       request: request.clone(),\n *     });\n *\n *     return response;\n *   },\n *   port,\n * });\n *\n * server.on('listening', () => {\n *   console.log(`API server is listening on http://localhost:${port}/api`);\n * });\n * ```\n */\nexport const handleEndpoints = async ({\n  basePath = '',\n  config: incomingConfig,\n  path,\n  request,\n}: {\n  basePath?: string\n  config: Promise<SanitizedConfig> | SanitizedConfig\n  /** Override path from the request */\n  path?: string\n  request: Request\n}): Promise<Response> => {\n  let handler: PayloadHandler\n  let req: PayloadRequest\n  let collection: Collection\n\n  // This can be used against GET request search params size limit.\n  // Instead you can do POST request with a text body as search params.\n  // We use this interally for relationships querying on the frontend\n  // packages/ui/src/fields/Relationship/index.tsx\n  if (\n    request.method.toLowerCase() === 'post' &&\n    request.headers.get('X-HTTP-Method-Override') === 'GET'\n  ) {\n    const search = await request.text()\n\n    const url = `${request.url}?${new URLSearchParams(search).toString()}`\n    const response = await handleEndpoints({\n      basePath,\n      config: incomingConfig,\n      path,\n      request: new Request(url, {\n        cache: request.cache,\n        credentials: request.credentials,\n        headers: request.headers,\n        method: 'GET',\n        signal: request.signal,\n      }),\n    })\n\n    return response\n  }\n\n  try {\n    req = await createPayloadRequest({ config: incomingConfig, request })\n\n    if (req.method.toLowerCase() === 'options') {\n      return Response.json(\n        {},\n        {\n          headers: headersWithCors({\n            headers: new Headers(),\n            req,\n          }),\n          status: 200,\n        },\n      )\n    }\n\n    const { payload } = req\n    const { config } = payload\n\n    const pathname = `${basePath}${path ?? new URL(req.url).pathname}`\n\n    if (!pathname.startsWith(config.routes.api)) {\n      return notFoundResponse(req, pathname)\n    }\n\n    // /api/posts/route -> /posts/route\n    let adjustedPathname = pathname.replace(config.routes.api, '')\n\n    let isGlobals = false\n\n    // /globals/header/route -> /header/route\n    if (adjustedPathname.startsWith('/globals')) {\n      isGlobals = true\n      adjustedPathname = adjustedPathname.replace('/globals', '')\n    }\n\n    const segments = adjustedPathname.split('/')\n    // remove empty string first element\n    segments.shift()\n\n    const firstParam = segments[0]\n\n    let globalConfig: GlobalConfig\n\n    // first param can be a global slug or collection slug, find the relevant config\n    if (firstParam) {\n      if (isGlobals) {\n        globalConfig = payload.globals.config.find((each) => each.slug === firstParam)\n      } else if (payload.collections[firstParam]) {\n        collection = payload.collections[firstParam]\n      }\n    }\n\n    let endpoints: Endpoint[] | false = config.endpoints\n\n    if (collection) {\n      endpoints = collection.config.endpoints\n      // /posts/route -> /route\n      adjustedPathname = adjustedPathname.replace(`/${collection.config.slug}`, '')\n    } else if (globalConfig) {\n      // /header/route -> /route\n      adjustedPathname = adjustedPathname.replace(`/${globalConfig.slug}`, '')\n      endpoints = globalConfig.endpoints\n    }\n\n    // sanitize when endpoint.path is '/'\n    if (adjustedPathname === '') {\n      adjustedPathname = '/'\n    }\n\n    if (endpoints === false) {\n      return Response.json(\n        {\n          message: `Cannot ${req.method.toUpperCase()} ${req.url}`,\n        },\n        {\n          headers: headersWithCors({\n            headers: new Headers(),\n            req,\n          }),\n          status: httpStatus.NOT_IMPLEMENTED,\n        },\n      )\n    }\n\n    // Find the relevant endpoint configuration\n    const endpoint = endpoints?.find((endpoint) => {\n      if (endpoint.method !== req.method.toLowerCase()) {\n        return false\n      }\n\n      const pathMatchFn = match(endpoint.path, { decode: decodeURIComponent })\n\n      const matchResult = pathMatchFn(adjustedPathname)\n\n      if (!matchResult) {\n        return false\n      }\n\n      req.routeParams = matchResult.params as Record<string, unknown>\n\n      // Inject to routeParams the slug as well so it can be used later\n      if (collection) {\n        req.routeParams.collection = collection.config.slug\n      } else if (globalConfig) {\n        req.routeParams.global = globalConfig.slug\n      }\n\n      return true\n    })\n\n    if (endpoint) {\n      handler = endpoint.handler\n    }\n\n    if (!handler) {\n      return notFoundResponse(req, pathname)\n    }\n\n    const response = await handler(req)\n    return new Response(response.body, {\n      headers: mergeHeaders(req.responseHeaders ?? new Headers(), response.headers),\n      status: response.status,\n      statusText: response.statusText,\n    })\n  } catch (err) {\n    return routeError({\n      collection,\n      config: incomingConfig,\n      err,\n      req,\n    })\n  }\n}\n"],"names":["status","httpStatus","match","createPayloadRequest","headersWithCors","mergeHeaders","routeError","notFoundResponse","req","pathname","Response","json","message","URL","url","headers","Headers","NOT_FOUND","handleEndpoints","basePath","config","incomingConfig","path","request","handler","collection","method","toLowerCase","get","search","text","URLSearchParams","toString","response","Request","cache","credentials","signal","payload","startsWith","routes","api","adjustedPathname","replace","isGlobals","segments","split","shift","firstParam","globalConfig","globals","find","each","slug","collections","endpoints","toUpperCase","NOT_IMPLEMENTED","endpoint","pathMatchFn","decode","decodeURIComponent","matchResult","routeParams","params","global","body","responseHeaders","statusText","err"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4627, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}