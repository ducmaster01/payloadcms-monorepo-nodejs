{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/createArrayFromCommaDelineated.ts"],"sourcesContent":["export function createArrayFromCommaDelineated(input: string): string[] {\n  if (Array.isArray(input)) {\n    return input\n  }\n  if (input.indexOf(',') > -1) {\n    return input.split(',')\n  }\n  return [input]\n}\n"],"names":["createArrayFromCommaDelineated","input","Array","isArray","indexOf","split"],"mappings":";;;AAAO,SAASA,+BAA+BC,KAAa;IAC1D,IAAIC,MAAMC,OAAO,CAACF,QAAQ;QACxB,OAAOA;IACT;IACA,IAAIA,MAAMG,OAAO,CAAC,OAAO,CAAC,GAAG;QAC3B,OAAOH,MAAMI,KAAK,CAAC;IACrB;IACA,OAAO;QAACJ;KAAM;AAChB","ignoreList":[0]}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/deepCopyObject.ts"],"sourcesContent":["import type { JsonValue } from '../types/index.js'\n\n/*\nMain deepCopyObject handling - from rfdc: https://github.com/davidmarkclements/rfdc/blob/master/index.js\n\nCopyright 2019 \"David Mark Clements <david.mark.clements@gmail.com>\"\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\ndocumentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\nto permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions\nof the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\nTO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\nTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\nCONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE.\n*/\n\nfunction copyBuffer(cur) {\n  if (cur instanceof Buffer) {\n    return Buffer.from(cur)\n  }\n\n  return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length)\n}\n\nconst constructorHandlers = new Map()\nconstructorHandlers.set(Date, (o) => new Date(o))\nconstructorHandlers.set(Map, (o, fn) => new Map(cloneArray<any>(Array.from(o), fn)))\nconstructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\nconstructorHandlers.set(RegExp, (regex: RegExp) => new RegExp(regex.source, regex.flags))\n\nlet handler = null\n\nfunction cloneArray<T>(a: T, fn): T {\n  const keys = Object.keys(a)\n  const a2 = new Array(keys.length)\n  for (let i = 0; i < keys.length; i++) {\n    const k = keys[i]\n    const cur = a[k]\n    if (typeof cur !== 'object' || cur === null) {\n      a2[k] = cur\n    } else if (cur instanceof RegExp) {\n      a2[k] = new RegExp(cur.source, cur.flags)\n    } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n      a2[k] = handler(cur, fn)\n    } else if (ArrayBuffer.isView(cur)) {\n      a2[k] = copyBuffer(cur)\n    } else {\n      a2[k] = fn(cur)\n    }\n  }\n  return a2 as T\n}\n\nexport const deepCopyObject = <T>(o: T): T => {\n  if (typeof o !== 'object' || o === null) {\n    return o\n  }\n  if (Array.isArray(o)) {\n    return cloneArray(o, deepCopyObject)\n  }\n  if (o instanceof RegExp) {\n    return new RegExp(o.source, o.flags) as T\n  }\n\n  if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n    return handler(o, deepCopyObject)\n  }\n  const o2 = {}\n  for (const k in o) {\n    if (Object.hasOwnProperty.call(o, k) === false) {\n      continue\n    }\n    const cur = o[k]\n    if (typeof cur !== 'object' || cur === null) {\n      o2[k as string] = cur\n    } else if (cur instanceof RegExp) {\n      o2[k as string] = new RegExp(cur.source, cur.flags)\n    } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n      o2[k as string] = handler(cur, deepCopyObject)\n    } else if (ArrayBuffer.isView(cur)) {\n      o2[k as string] = copyBuffer(cur)\n    } else {\n      o2[k as string] = deepCopyObject(cur)\n    }\n  }\n  return o2 as T\n}\n\n/*\nFast deepCopyObjectSimple handling - from fast-json-clone: https://github.com/rhysd/fast-json-clone\n\nBenchmark: https://github.com/AlessioGr/fastest-deep-clone-json/blob/main/test/benchmark.js\n*/\n\n/**\n * A deepCopyObject implementation which only works for JSON objects and arrays, and is faster than\n * JSON.parse(JSON.stringify(obj))\n *\n * @param value The JSON value to be cloned. There are two invariants. 1) It must not contain circles\n *              as JSON does not allow it. This function will cause infinite loop for such values by\n *              design. 2) It must contain JSON values only. Other values like `Date`, `Regexp`, `Map`,\n *              `Set`, `Buffer`, ... are not allowed.\n * @returns The cloned JSON value.\n */\nexport function deepCopyObjectSimple<T extends JsonValue>(value: T, filterUndefined = false): T {\n  if (typeof value !== 'object' || value === null) {\n    return value\n  } else if (Array.isArray(value)) {\n    return value.map((e) =>\n      typeof e !== 'object' || e === null ? e : deepCopyObjectSimple(e, filterUndefined),\n    ) as T\n  } else {\n    if (value instanceof Date) {\n      return new Date(value) as unknown as T\n    }\n    const ret: { [key: string]: T } = {}\n    for (const k in value) {\n      const v = value[k]\n      if (filterUndefined && v === undefined) {\n        continue\n      }\n      ret[k] =\n        typeof v !== 'object' || v === null\n          ? v\n          : (deepCopyObjectSimple(v as T, filterUndefined) as any)\n    }\n    return ret as unknown as T\n  }\n}\n\nexport function deepCopyObjectSimpleWithoutReactComponents<T extends JsonValue>(value: T): T {\n  if (\n    typeof value === 'object' &&\n    value !== null &&\n    '$$typeof' in value &&\n    typeof value.$$typeof === 'symbol'\n  ) {\n    return undefined\n  } else if (typeof value !== 'object' || value === null) {\n    return value\n  } else if (Array.isArray(value)) {\n    return value.map((e) =>\n      typeof e !== 'object' || e === null ? e : deepCopyObjectSimpleWithoutReactComponents(e),\n    ) as T\n  } else {\n    if (value instanceof Date) {\n      return new Date(value) as unknown as T\n    }\n    const ret: { [key: string]: T } = {}\n    for (const k in value) {\n      const v = value[k]\n      ret[k] =\n        typeof v !== 'object' || v === null\n          ? v\n          : (deepCopyObjectSimpleWithoutReactComponents(v as T) as any)\n    }\n    return ret as unknown as T\n  }\n}\n\n/**\n * A deepCopyObject implementation which is slower than deepCopyObject, but more correct.\n * Can be used if correctness is more important than speed. Supports circular dependencies\n */\nexport function deepCopyObjectComplex<T>(object: T, cache: WeakMap<any, any> = new WeakMap()): T {\n  if (object === null) {\n    return null\n  }\n\n  if (cache.has(object)) {\n    return cache.get(object)\n  }\n\n  // Handle File\n  if (object instanceof File) {\n    return object as unknown as T\n  }\n\n  // Handle Date\n  if (object instanceof Date) {\n    return new Date(object.getTime()) as unknown as T\n  }\n\n  // Handle RegExp\n  if (object instanceof RegExp) {\n    return new RegExp(object.source, object.flags) as unknown as T\n  }\n\n  // Handle Map\n  if (object instanceof Map) {\n    const clonedMap = new Map()\n    cache.set(object, clonedMap)\n    for (const [key, value] of object.entries()) {\n      clonedMap.set(key, deepCopyObjectComplex(value, cache))\n    }\n    return clonedMap as unknown as T\n  }\n\n  // Handle Set\n  if (object instanceof Set) {\n    const clonedSet = new Set()\n    cache.set(object, clonedSet)\n    for (const value of object.values()) {\n      clonedSet.add(deepCopyObjectComplex(value, cache))\n    }\n    return clonedSet as unknown as T\n  }\n\n  // Handle Array and Object\n  if (typeof object === 'object' && object !== null) {\n    if ('$$typeof' in object && typeof object.$$typeof === 'symbol') {\n      return object\n    }\n\n    const clonedObject: any = Array.isArray(object)\n      ? []\n      : Object.create(Object.getPrototypeOf(object))\n    cache.set(object, clonedObject)\n\n    for (const key in object) {\n      if (\n        Object.prototype.hasOwnProperty.call(object, key) ||\n        Object.getOwnPropertySymbols(object).includes(key as any)\n      ) {\n        clonedObject[key] = deepCopyObjectComplex(object[key], cache)\n      }\n    }\n\n    return clonedObject as T\n  }\n\n  // Handle all other cases\n  return object\n}\n"],"names":["copyBuffer","cur","Buffer","from","constructor","buffer","slice","byteOffset","length","constructorHandlers","Map","set","Date","o","fn","cloneArray","Array","Set","RegExp","regex","source","flags","handler","a","keys","Object","a2","i","k","get","ArrayBuffer","isView","deepCopyObject","isArray","o2","hasOwnProperty","call","deepCopyObjectSimple","value","filterUndefined","map","e","ret","v","undefined","deepCopyObjectSimpleWithoutReactComponents","$$typeof","deepCopyObjectComplex","object","cache","WeakMap","has","File","getTime","clonedMap","key","entries","clonedSet","values","add","clonedObject","create","getPrototypeOf","prototype","getOwnPropertySymbols","includes"],"mappings":"AAEA;;;;;;;;;;;;;;;;;;AAkBA;;;;;;AAEA,SAASA,WAAWC,GAAG;IACrB,IAAIA,eAAeC,QAAQ;QACzB,OAAOA,OAAOC,IAAI,CAACF;IACrB;IAEA,OAAO,IAAIA,IAAIG,WAAW,CAACH,IAAII,MAAM,CAACC,KAAK,IAAIL,IAAIM,UAAU,EAAEN,IAAIO,MAAM;AAC3E;AAEA,MAAMC,sBAAsB,IAAIC;AAChCD,oBAAoBE,GAAG,CAACC,MAAM,CAACC,IAAM,IAAID,KAAKC;AAC9CJ,oBAAoBE,GAAG,CAACD,KAAK,CAACG,GAAGC,KAAO,IAAIJ,IAAIK,WAAgBC,MAAMb,IAAI,CAACU,IAAIC;AAC/EL,oBAAoBE,GAAG,CAACM,KAAK,CAACJ,GAAGC,KAAO,IAAIG,IAAIF,WAAWC,MAAMb,IAAI,CAACU,IAAIC;AAC1EL,oBAAoBE,GAAG,CAACO,QAAQ,CAACC,QAAkB,IAAID,OAAOC,MAAMC,MAAM,EAAED,MAAME,KAAK;AAEvF,IAAIC,UAAU;AAEd,SAASP,WAAcQ,CAAI,EAAET,EAAE;IAC7B,MAAMU,OAAOC,OAAOD,IAAI,CAACD;IACzB,MAAMG,KAAK,IAAIV,MAAMQ,KAAKhB,MAAM;IAChC,IAAK,IAAImB,IAAI,GAAGA,IAAIH,KAAKhB,MAAM,EAAEmB,IAAK;QACpC,MAAMC,IAAIJ,IAAI,CAACG,EAAE;QACjB,MAAM1B,MAAMsB,CAAC,CAACK,EAAE;QAChB,IAAI,OAAO3B,QAAQ,YAAYA,QAAQ,MAAM;YAC3CyB,EAAE,CAACE,EAAE,GAAG3B;QACV,OAAO,IAAIA,eAAeiB,QAAQ;YAChCQ,EAAE,CAACE,EAAE,GAAG,IAAIV,OAAOjB,IAAImB,MAAM,EAAEnB,IAAIoB,KAAK;QAC1C,OAAO,IAAIpB,IAAIG,WAAW,KAAKqB,UAAWH,CAAAA,UAAUb,oBAAoBoB,GAAG,CAAC5B,IAAIG,WAAW,CAAA,GAAI;YAC7FsB,EAAE,CAACE,EAAE,GAAGN,QAAQrB,KAAKa;QACvB,OAAO,IAAIgB,YAAYC,MAAM,CAAC9B,MAAM;YAClCyB,EAAE,CAACE,EAAE,GAAG5B,WAAWC;QACrB,OAAO;YACLyB,EAAE,CAACE,EAAE,GAAGd,GAAGb;QACb;IACF;IACA,OAAOyB;AACT;AAEO,MAAMM,iBAAiB,CAAInB;IAChC,IAAI,OAAOA,MAAM,YAAYA,MAAM,MAAM;QACvC,OAAOA;IACT;IACA,IAAIG,MAAMiB,OAAO,CAACpB,IAAI;QACpB,OAAOE,WAAWF,GAAGmB;IACvB;IACA,IAAInB,aAAaK,QAAQ;QACvB,OAAO,IAAIA,OAAOL,EAAEO,MAAM,EAAEP,EAAEQ,KAAK;IACrC;IAEA,IAAIR,EAAET,WAAW,KAAKqB,UAAWH,CAAAA,UAAUb,oBAAoBoB,GAAG,CAAChB,EAAET,WAAW,CAAA,GAAI;QAClF,OAAOkB,QAAQT,GAAGmB;IACpB;IACA,MAAME,KAAK,CAAC;IACZ,IAAK,MAAMN,KAAKf,EAAG;QACjB,IAAIY,OAAOU,cAAc,CAACC,IAAI,CAACvB,GAAGe,OAAO,OAAO;YAC9C;QACF;QACA,MAAM3B,MAAMY,CAAC,CAACe,EAAE;QAChB,IAAI,OAAO3B,QAAQ,YAAYA,QAAQ,MAAM;YAC3CiC,EAAE,CAACN,EAAY,GAAG3B;QACpB,OAAO,IAAIA,eAAeiB,QAAQ;YAChCgB,EAAE,CAACN,EAAY,GAAG,IAAIV,OAAOjB,IAAImB,MAAM,EAAEnB,IAAIoB,KAAK;QACpD,OAAO,IAAIpB,IAAIG,WAAW,KAAKqB,UAAWH,CAAAA,UAAUb,oBAAoBoB,GAAG,CAAC5B,IAAIG,WAAW,CAAA,GAAI;YAC7F8B,EAAE,CAACN,EAAY,GAAGN,QAAQrB,KAAK+B;QACjC,OAAO,IAAIF,YAAYC,MAAM,CAAC9B,MAAM;YAClCiC,EAAE,CAACN,EAAY,GAAG5B,WAAWC;QAC/B,OAAO;YACLiC,EAAE,CAACN,EAAY,GAAGI,eAAe/B;QACnC;IACF;IACA,OAAOiC;AACT,EAAC;AAkBM,SAASG,qBAA0CC,KAAQ,EAAEC,kBAAkB,KAAK;IACzF,IAAI,OAAOD,UAAU,YAAYA,UAAU,MAAM;QAC/C,OAAOA;IACT,OAAO,IAAItB,MAAMiB,OAAO,CAACK,QAAQ;QAC/B,OAAOA,MAAME,GAAG,CAAC,CAACC,IAChB,OAAOA,MAAM,YAAYA,MAAM,OAAOA,IAAIJ,qBAAqBI,GAAGF;IAEtE,OAAO;QACL,IAAID,iBAAiB1B,MAAM;YACzB,OAAO,IAAIA,KAAK0B;QAClB;QACA,MAAMI,MAA4B,CAAC;QACnC,IAAK,MAAMd,KAAKU,MAAO;YACrB,MAAMK,IAAIL,KAAK,CAACV,EAAE;YAClB,IAAIW,mBAAmBI,MAAMC,WAAW;gBACtC;YACF;YACAF,GAAG,CAACd,EAAE,GACJ,OAAOe,MAAM,YAAYA,MAAM,OAC3BA,IACCN,qBAAqBM,GAAQJ;QACtC;QACA,OAAOG;IACT;AACF;AAEO,SAASG,2CAAgEP,KAAQ;IACtF,IACE,OAAOA,UAAU,YACjBA,UAAU,QACV,cAAcA,SACd,OAAOA,MAAMQ,QAAQ,KAAK,UAC1B;QACA,OAAOF;IACT,OAAO,IAAI,OAAON,UAAU,YAAYA,UAAU,MAAM;QACtD,OAAOA;IACT,OAAO,IAAItB,MAAMiB,OAAO,CAACK,QAAQ;QAC/B,OAAOA,MAAME,GAAG,CAAC,CAACC,IAChB,OAAOA,MAAM,YAAYA,MAAM,OAAOA,IAAII,2CAA2CJ;IAEzF,OAAO;QACL,IAAIH,iBAAiB1B,MAAM;YACzB,OAAO,IAAIA,KAAK0B;QAClB;QACA,MAAMI,MAA4B,CAAC;QACnC,IAAK,MAAMd,KAAKU,MAAO;YACrB,MAAMK,IAAIL,KAAK,CAACV,EAAE;YAClBc,GAAG,CAACd,EAAE,GACJ,OAAOe,MAAM,YAAYA,MAAM,OAC3BA,IACCE,2CAA2CF;QACpD;QACA,OAAOD;IACT;AACF;AAMO,SAASK,sBAAyBC,MAAS,EAAEC,QAA2B,IAAIC,SAAS;IAC1F,IAAIF,WAAW,MAAM;QACnB,OAAO;IACT;IAEA,IAAIC,MAAME,GAAG,CAACH,SAAS;QACrB,OAAOC,MAAMpB,GAAG,CAACmB;IACnB;IAEA,cAAc;IACd,IAAIA,kBAAkBI,MAAM;QAC1B,OAAOJ;IACT;IAEA,cAAc;IACd,IAAIA,kBAAkBpC,MAAM;QAC1B,OAAO,IAAIA,KAAKoC,OAAOK,OAAO;IAChC;IAEA,gBAAgB;IAChB,IAAIL,kBAAkB9B,QAAQ;QAC5B,OAAO,IAAIA,OAAO8B,OAAO5B,MAAM,EAAE4B,OAAO3B,KAAK;IAC/C;IAEA,aAAa;IACb,IAAI2B,kBAAkBtC,KAAK;QACzB,MAAM4C,YAAY,IAAI5C;QACtBuC,MAAMtC,GAAG,CAACqC,QAAQM;QAClB,KAAK,MAAM,CAACC,KAAKjB,MAAM,IAAIU,OAAOQ,OAAO,GAAI;YAC3CF,UAAU3C,GAAG,CAAC4C,KAAKR,sBAAsBT,OAAOW;QAClD;QACA,OAAOK;IACT;IAEA,aAAa;IACb,IAAIN,kBAAkB/B,KAAK;QACzB,MAAMwC,YAAY,IAAIxC;QACtBgC,MAAMtC,GAAG,CAACqC,QAAQS;QAClB,KAAK,MAAMnB,SAASU,OAAOU,MAAM,GAAI;YACnCD,UAAUE,GAAG,CAACZ,sBAAsBT,OAAOW;QAC7C;QACA,OAAOQ;IACT;IAEA,0BAA0B;IAC1B,IAAI,OAAOT,WAAW,YAAYA,WAAW,MAAM;QACjD,IAAI,cAAcA,UAAU,OAAOA,OAAOF,QAAQ,KAAK,UAAU;YAC/D,OAAOE;QACT;QAEA,MAAMY,eAAoB5C,MAAMiB,OAAO,CAACe,UACpC,EAAE,GACFvB,OAAOoC,MAAM,CAACpC,OAAOqC,cAAc,CAACd;QACxCC,MAAMtC,GAAG,CAACqC,QAAQY;QAElB,IAAK,MAAML,OAAOP,OAAQ;YACxB,IACEvB,OAAOsC,SAAS,CAAC5B,cAAc,CAACC,IAAI,CAACY,QAAQO,QAC7C9B,OAAOuC,qBAAqB,CAAChB,QAAQiB,QAAQ,CAACV,MAC9C;gBACAK,YAAY,CAACL,IAAI,GAAGR,sBAAsBC,MAAM,CAACO,IAAI,EAAEN;YACzD;QACF;QAEA,OAAOW;IACT;IAEA,yBAAyB;IACzB,OAAOZ;AACT","ignoreList":[0]}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isReactComponent.ts"],"sourcesContent":["import type React from 'react'\n\nconst clientRefSymbol = Symbol.for('react.client.reference')\n\nexport function isReactServerComponentOrFunction<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  if (component === null || component === undefined) {\n    return false\n  }\n  const hasClientComponentSymbol = component.$$typeof == clientRefSymbol\n\n  const isFunctionalComponent = typeof component === 'function'\n  // Anonymous functions are Client Components in Turbopack. RSCs should have a name\n  const isAnonymousFunction = typeof component === 'function' && component.name === ''\n\n  const isRSC = isFunctionalComponent && !isAnonymousFunction && !hasClientComponentSymbol\n\n  return isRSC\n}\n\nexport function isReactClientComponent<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  if (component === null || component === undefined) {\n    return false\n  }\n  return !isReactServerComponentOrFunction(component) && component.$$typeof == clientRefSymbol\n}\n\nexport function isReactComponentOrFunction<T extends any>(\n  component: any | React.ComponentType,\n): component is T {\n  return isReactServerComponentOrFunction(component) || isReactClientComponent(component)\n}\n"],"names":["clientRefSymbol","Symbol","for","isReactServerComponentOrFunction","component","undefined","hasClientComponentSymbol","$$typeof","isFunctionalComponent","isAnonymousFunction","name","isRSC","isReactClientComponent","isReactComponentOrFunction"],"mappings":";;;;;AAEA,MAAMA,kBAAkBC,OAAOC,GAAG,CAAC;AAE5B,SAASC,iCACdC,SAAoC;IAEpC,IAAIA,cAAc,QAAQA,cAAcC,WAAW;QACjD,OAAO;IACT;IACA,MAAMC,2BAA2BF,UAAUG,QAAQ,IAAIP;IAEvD,MAAMQ,wBAAwB,OAAOJ,cAAc;IACnD,kFAAkF;IAClF,MAAMK,sBAAsB,OAAOL,cAAc,cAAcA,UAAUM,IAAI,KAAK;IAElF,MAAMC,QAAQH,yBAAyB,CAACC,uBAAuB,CAACH;IAEhE,OAAOK;AACT;AAEO,SAASC,uBACdR,SAAoC;IAEpC,IAAIA,cAAc,QAAQA,cAAcC,WAAW;QACjD,OAAO;IACT;IACA,OAAO,CAACF,iCAAiCC,cAAcA,UAAUG,QAAQ,IAAIP;AAC/E;AAEO,SAASa,2BACdT,SAAoC;IAEpC,OAAOD,iCAAiCC,cAAcQ,uBAAuBR;AAC/E","ignoreList":[0]}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isPlainObject.ts"],"sourcesContent":["import { isReactComponentOrFunction } from './isReactComponent.js'\n\nexport function isPlainObject(o: any): boolean {\n  // Is this a React component?\n  if (isReactComponentOrFunction(o)) {\n    return false\n  }\n\n  // from https://github.com/fastify/deepmerge/blob/master/index.js#L77\n  return typeof o === 'object' && o !== null && !(o instanceof RegExp) && !(o instanceof Date)\n}\n"],"names":["isReactComponentOrFunction","isPlainObject","o","RegExp","Date"],"mappings":";;;AAAA,SAASA,0BAA0B,QAAQ,wBAAuB;;AAE3D,SAASC,cAAcC,CAAM;IAClC,6BAA6B;IAC7B,+XAAIF,6BAAAA,EAA2BE,IAAI;QACjC,OAAO;IACT;IAEA,qEAAqE;IACrE,OAAO,OAAOA,MAAM,YAAYA,MAAM,QAAQ,CAAEA,CAAAA,aAAaC,MAAK,KAAM,CAAED,CAAAA,aAAaE,IAAG;AAC5F","ignoreList":[0]}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/deepMerge.ts"],"sourcesContent":["import deepMerge from 'deepmerge'\n\nimport { isPlainObject } from './isPlainObject.js'\n\nexport { deepMerge }\n/**\n * Fully-featured deepMerge.\n *\n * Array handling: Arrays in the target object are combined with the source object's arrays.\n */\nexport function deepMergeWithCombinedArrays<T extends object>(\n  obj1: object,\n  obj2: object,\n  options: deepMerge.Options = {},\n): T {\n  return deepMerge<T>(obj1, obj2, {\n    arrayMerge: (target, source, options) => {\n      const destination = target.slice()\n\n      source.forEach((item, index) => {\n        if (typeof destination[index] === 'undefined') {\n          destination[index] = options.cloneUnlessOtherwiseSpecified(item, options)\n        } else if (options.isMergeableObject(item)) {\n          destination[index] = deepMerge(target[index], item, options)\n        } else if (target.indexOf(item) === -1) {\n          destination.push(item)\n        }\n      })\n      return destination\n    },\n    ...options,\n  })\n}\n\n/**\n * Fully-featured deepMerge.\n *\n * Array handling: Arrays in the target object are replaced by the source object's arrays.\n */\nexport function deepMergeWithSourceArrays<T extends object>(obj1: object, obj2: object): T {\n  return deepMerge<T>(obj1, obj2, { arrayMerge: (_, source) => source })\n}\n\n/**\n * Fully-featured deepMerge. Does not clone React components by default.\n */\nexport function deepMergeWithReactComponents<T extends object>(obj1: object, obj2: object): T {\n  return deepMerge<T>(obj1, obj2, {\n    isMergeableObject: isPlainObject,\n  })\n}\n"],"names":["deepMerge","isPlainObject","deepMergeWithCombinedArrays","obj1","obj2","options","arrayMerge","target","source","destination","slice","forEach","item","index","cloneUnlessOtherwiseSpecified","isMergeableObject","indexOf","push","deepMergeWithSourceArrays","_","deepMergeWithReactComponents"],"mappings":";;;;;AAAA,OAAOA,eAAe,YAAW;AAEjC,SAASC,aAAa,QAAQ,qBAAoB;;;;AAQ3C,SAASC,4BACdC,IAAY,EACZC,IAAY,EACZC,UAA6B,CAAC,CAAC;IAE/B,0MAAOL,UAAAA,EAAaG,MAAMC,MAAM;QAC9BE,YAAY,CAACC,QAAQC,QAAQH;YAC3B,MAAMI,cAAcF,OAAOG,KAAK;YAEhCF,OAAOG,OAAO,CAAC,CAACC,MAAMC;gBACpB,IAAI,OAAOJ,WAAW,CAACI,MAAM,KAAK,aAAa;oBAC7CJ,WAAW,CAACI,MAAM,GAAGR,QAAQS,6BAA6B,CAACF,MAAMP;gBACnE,OAAO,IAAIA,QAAQU,iBAAiB,CAACH,OAAO;oBAC1CH,WAAW,CAACI,MAAM,sMAAGb,UAAAA,EAAUO,MAAM,CAACM,MAAM,EAAED,MAAMP;gBACtD,OAAO,IAAIE,OAAOS,OAAO,CAACJ,UAAU,CAAC,GAAG;oBACtCH,YAAYQ,IAAI,CAACL;gBACnB;YACF;YACA,OAAOH;QACT;QACA,GAAGJ,OAAO;IACZ;AACF;AAOO,SAASa,0BAA4Cf,IAAY,EAAEC,IAAY;IACpF,0MAAOJ,UAAAA,EAAaG,MAAMC,MAAM;QAAEE,YAAY,CAACa,GAAGX,SAAWA;IAAO;AACtE;AAKO,SAASY,6BAA+CjB,IAAY,EAAEC,IAAY;IACvF,0MAAOJ,UAAAA,EAAaG,MAAMC,MAAM;QAC9BW,uYAAmBd,gBAAAA;IACrB;AACF","ignoreList":[0]}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/fieldSchemaToJSON.ts"],"sourcesContent":["import type { ClientField } from '../fields/config/client.js'\nimport type { FieldTypes } from '../fields/config/types.js'\n\nexport type FieldSchemaJSON = {\n  blocks?: FieldSchemaJSON // TODO: conditionally add based on `type`\n  fields?: FieldSchemaJSON // TODO: conditionally add based on `type`\n  hasMany?: boolean // TODO: conditionally add based on `type`\n  name: string\n  relationTo?: string // TODO: conditionally add based on `type`\n  slug?: string // TODO: conditionally add based on `type`\n  type: FieldTypes\n}[]\n\nexport const fieldSchemaToJSON = (fields: ClientField[]): FieldSchemaJSON => {\n  return fields.reduce((acc, field) => {\n    let result = acc\n\n    switch (field.type) {\n      case 'array':\n        acc.push({\n          name: field.name,\n          type: field.type,\n          fields: fieldSchemaToJSON([\n            ...field.fields,\n            {\n              name: 'id',\n              type: 'text',\n            },\n          ]),\n        })\n\n        break\n\n      case 'blocks':\n        acc.push({\n          name: field.name,\n          type: field.type,\n          blocks: field.blocks.reduce((acc, block) => {\n            acc[block.slug] = {\n              fields: fieldSchemaToJSON([\n                ...block.fields,\n                {\n                  name: 'id',\n                  type: 'text',\n                },\n              ]),\n            }\n\n            return acc\n          }, {}),\n        })\n\n        break\n\n      case 'collapsible': // eslint-disable no-fallthrough\n      case 'row':\n        result = result.concat(fieldSchemaToJSON(field.fields))\n        break\n\n      case 'group':\n        acc.push({\n          name: field.name,\n          type: field.type,\n          fields: fieldSchemaToJSON(field.fields),\n        })\n\n        break\n\n      case 'relationship': // eslint-disable no-fallthrough\n      case 'upload':\n        acc.push({\n          name: field.name,\n          type: field.type,\n          hasMany: 'hasMany' in field ? Boolean(field.hasMany) : false, // TODO: type this\n          relationTo: field.relationTo,\n        })\n\n        break\n\n      case 'tabs': {\n        let tabFields = []\n\n        field.tabs.forEach((tab) => {\n          if ('name' in tab) {\n            tabFields.push({\n              name: tab.name,\n              type: field.type,\n              fields: fieldSchemaToJSON(tab.fields),\n            })\n            return\n          }\n\n          tabFields = tabFields.concat(fieldSchemaToJSON(tab.fields))\n        })\n\n        result = result.concat(tabFields)\n\n        break\n      }\n\n      default:\n        if ('name' in field) {\n          acc.push({\n            name: field.name,\n            type: field.type,\n          })\n        }\n    }\n\n    return result\n  }, [])\n}\n"],"names":["fieldSchemaToJSON","fields","reduce","acc","field","result","type","push","name","blocks","block","slug","concat","hasMany","Boolean","relationTo","tabFields","tabs","forEach","tab"],"mappings":";;;AAaO,MAAMA,oBAAoB,CAACC;IAChC,OAAOA,OAAOC,MAAM,CAAC,CAACC,KAAKC;QACzB,IAAIC,SAASF;QAEb,OAAQC,MAAME,IAAI;YAChB,KAAK;gBACHH,IAAII,IAAI,CAAC;oBACPC,MAAMJ,MAAMI,IAAI;oBAChBF,MAAMF,MAAME,IAAI;oBAChBL,QAAQD,kBAAkB;2BACrBI,MAAMH,MAAM;wBACf;4BACEO,MAAM;4BACNF,MAAM;wBACR;qBACD;gBACH;gBAEA;YAEF,KAAK;gBACHH,IAAII,IAAI,CAAC;oBACPC,MAAMJ,MAAMI,IAAI;oBAChBF,MAAMF,MAAME,IAAI;oBAChBG,QAAQL,MAAMK,MAAM,CAACP,MAAM,CAAC,CAACC,KAAKO;wBAChCP,GAAG,CAACO,MAAMC,IAAI,CAAC,GAAG;4BAChBV,QAAQD,kBAAkB;mCACrBU,MAAMT,MAAM;gCACf;oCACEO,MAAM;oCACNF,MAAM;gCACR;6BACD;wBACH;wBAEA,OAAOH;oBACT,GAAG,CAAC;gBACN;gBAEA;YAEF,KAAK;YACL,KAAK;gBACHE,SAASA,OAAOO,MAAM,CAACZ,kBAAkBI,MAAMH,MAAM;gBACrD;YAEF,KAAK;gBACHE,IAAII,IAAI,CAAC;oBACPC,MAAMJ,MAAMI,IAAI;oBAChBF,MAAMF,MAAME,IAAI;oBAChBL,QAAQD,kBAAkBI,MAAMH,MAAM;gBACxC;gBAEA;YAEF,KAAK;YACL,KAAK;gBACHE,IAAII,IAAI,CAAC;oBACPC,MAAMJ,MAAMI,IAAI;oBAChBF,MAAMF,MAAME,IAAI;oBAChBO,SAAS,aAAaT,QAAQU,QAAQV,MAAMS,OAAO,IAAI;oBACvDE,YAAYX,MAAMW,UAAU;gBAC9B;gBAEA;YAEF,KAAK;gBAAQ;oBACX,IAAIC,YAAY,EAAE;oBAElBZ,MAAMa,IAAI,CAACC,OAAO,CAAC,CAACC;wBAClB,IAAI,UAAUA,KAAK;4BACjBH,UAAUT,IAAI,CAAC;gCACbC,MAAMW,IAAIX,IAAI;gCACdF,MAAMF,MAAME,IAAI;gCAChBL,QAAQD,kBAAkBmB,IAAIlB,MAAM;4BACtC;4BACA;wBACF;wBAEAe,YAAYA,UAAUJ,MAAM,CAACZ,kBAAkBmB,IAAIlB,MAAM;oBAC3D;oBAEAI,SAASA,OAAOO,MAAM,CAACI;oBAEvB;gBACF;YAEA;gBACE,IAAI,UAAUZ,OAAO;oBACnBD,IAAII,IAAI,CAAC;wBACPC,MAAMJ,MAAMI,IAAI;wBAChBF,MAAMF,MAAME,IAAI;oBAClB;gBACF;QACJ;QAEA,OAAOD;IACT,GAAG,EAAE;AACP,EAAC","ignoreList":[0]}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/flattenAllFields.ts"],"sourcesContent":["import type { Field, FlattenedField, FlattenedJoinField } from '../fields/config/types.js'\n\nimport { tabHasName } from '../fields/config/types.js'\n\nexport const flattenAllFields = ({ fields }: { fields: Field[] }): FlattenedField[] => {\n  const result: FlattenedField[] = []\n\n  for (const field of fields) {\n    switch (field.type) {\n      case 'array':\n      case 'group': {\n        result.push({ ...field, flattenedFields: flattenAllFields({ fields: field.fields }) })\n        break\n      }\n\n      case 'blocks': {\n        const blocks = []\n        for (const block of field.blocks) {\n          blocks.push({\n            ...block,\n            flattenedFields: flattenAllFields({ fields: block.fields }),\n          })\n        }\n        result.push({\n          ...field,\n          blocks,\n        })\n        break\n      }\n\n      case 'collapsible':\n      case 'row': {\n        for (const nestedField of flattenAllFields({ fields: field.fields })) {\n          result.push(nestedField)\n        }\n        break\n      }\n\n      case 'join': {\n        result.push(field as FlattenedJoinField)\n        break\n      }\n\n      case 'tabs': {\n        for (const tab of field.tabs) {\n          if (!tabHasName(tab)) {\n            for (const nestedField of flattenAllFields({ fields: tab.fields })) {\n              result.push(nestedField)\n            }\n          } else {\n            result.push({\n              ...tab,\n              type: 'tab',\n              flattenedFields: flattenAllFields({ fields: tab.fields }),\n            })\n          }\n        }\n        break\n      }\n\n      default: {\n        if (field.type !== 'ui') {\n          result.push(field)\n        }\n      }\n    }\n  }\n\n  return result\n}\n"],"names":["tabHasName","flattenAllFields","fields","result","field","type","push","flattenedFields","blocks","block","nestedField","tab","tabs"],"mappings":";;;AAEA,SAASA,UAAU,QAAQ,4BAA2B;;AAE/C,MAAMC,mBAAmB,CAAC,EAAEC,MAAM,EAAuB;IAC9D,MAAMC,SAA2B,EAAE;IAEnC,KAAK,MAAMC,SAASF,OAAQ;QAC1B,OAAQE,MAAMC,IAAI;YAChB,KAAK;YACL,KAAK;gBAAS;oBACZF,OAAOG,IAAI,CAAC;wBAAE,GAAGF,KAAK;wBAAEG,iBAAiBN,iBAAiB;4BAAEC,QAAQE,MAAMF,MAAM;wBAAC;oBAAG;oBACpF;gBACF;YAEA,KAAK;gBAAU;oBACb,MAAMM,SAAS,EAAE;oBACjB,KAAK,MAAMC,SAASL,MAAMI,MAAM,CAAE;wBAChCA,OAAOF,IAAI,CAAC;4BACV,GAAGG,KAAK;4BACRF,iBAAiBN,iBAAiB;gCAAEC,QAAQO,MAAMP,MAAM;4BAAC;wBAC3D;oBACF;oBACAC,OAAOG,IAAI,CAAC;wBACV,GAAGF,KAAK;wBACRI;oBACF;oBACA;gBACF;YAEA,KAAK;YACL,KAAK;gBAAO;oBACV,KAAK,MAAME,eAAeT,iBAAiB;wBAAEC,QAAQE,MAAMF,MAAM;oBAAC,GAAI;wBACpEC,OAAOG,IAAI,CAACI;oBACd;oBACA;gBACF;YAEA,KAAK;gBAAQ;oBACXP,OAAOG,IAAI,CAACF;oBACZ;gBACF;YAEA,KAAK;gBAAQ;oBACX,KAAK,MAAMO,OAAOP,MAAMQ,IAAI,CAAE;wBAC5B,IAAI,EAACZ,mYAAAA,EAAWW,MAAM;4BACpB,KAAK,MAAMD,eAAeT,iBAAiB;gCAAEC,QAAQS,IAAIT,MAAM;4BAAC,GAAI;gCAClEC,OAAOG,IAAI,CAACI;4BACd;wBACF,OAAO;4BACLP,OAAOG,IAAI,CAAC;gCACV,GAAGK,GAAG;gCACNN,MAAM;gCACNE,iBAAiBN,iBAAiB;oCAAEC,QAAQS,IAAIT,MAAM;gCAAC;4BACzD;wBACF;oBACF;oBACA;gBACF;YAEA;gBAAS;oBACP,IAAIE,MAAMC,IAAI,KAAK,MAAM;wBACvBF,OAAOG,IAAI,CAACF;oBACd;gBACF;QACF;IACF;IAEA,OAAOD;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/flattenTopLevelFields.ts"],"sourcesContent":["import type { ClientTab } from '../admin/fields/Tabs.js'\nimport type { ClientField } from '../fields/config/client.js'\nimport type {\n  Field,\n  FieldAffectingData,\n  FieldAffectingDataClient,\n  FieldPresentationalOnly,\n  FieldPresentationalOnlyClient,\n  Tab,\n} from '../fields/config/types.js'\n\nimport {\n  fieldAffectsData,\n  fieldHasSubFields,\n  fieldIsPresentationalOnly,\n  tabHasName,\n} from '../fields/config/types.js'\n\ntype FlattenedField<TField> = TField extends ClientField\n  ? FieldAffectingDataClient | FieldPresentationalOnlyClient\n  : FieldAffectingData | FieldPresentationalOnly\n\ntype TabType<TField> = TField extends ClientField ? ClientTab : Tab\n\n/**\n * Flattens a collection's fields into a single array of fields, as long\n * as the fields do not affect data.\n *\n * @param fields\n * @param keepPresentationalFields if true, will skip flattening fields that are presentational only\n */\nfunction flattenFields<TField extends ClientField | Field>(\n  fields: TField[],\n  keepPresentationalFields?: boolean,\n): FlattenedField<TField>[] {\n  return fields.reduce<FlattenedField<TField>[]>((acc, field) => {\n    if (fieldAffectsData(field) || (keepPresentationalFields && fieldIsPresentationalOnly(field))) {\n      acc.push(field as FlattenedField<TField>)\n    } else if (fieldHasSubFields(field)) {\n      acc.push(...flattenFields(field.fields as TField[], keepPresentationalFields))\n    } else if (field.type === 'tabs' && 'tabs' in field) {\n      return [\n        ...acc,\n        ...field.tabs.reduce<FlattenedField<TField>[]>((tabFields, tab: TabType<TField>) => {\n          if (tabHasName(tab)) {\n            return [...tabFields, { ...tab, type: 'tab' } as unknown as FlattenedField<TField>]\n          } else {\n            return [\n              ...tabFields,\n              ...flattenFields(tab.fields as TField[], keepPresentationalFields),\n            ]\n          }\n        }, []),\n      ]\n    }\n\n    return acc\n  }, [])\n}\n\nexport default flattenFields\n"],"names":["fieldAffectsData","fieldHasSubFields","fieldIsPresentationalOnly","tabHasName","flattenFields","fields","keepPresentationalFields","reduce","acc","field","push","type","tabs","tabFields","tab"],"mappings":";;;AAWA,SACEA,gBAAgB,EAChBC,iBAAiB,EACjBC,yBAAyB,EACzBC,UAAU,QACL,4BAA2B;;AAQlC;;;;;;CAMC,GACD,SAASC,cACPC,MAAgB,EAChBC,wBAAkC;IAElC,OAAOD,OAAOE,MAAM,CAA2B,CAACC,KAAKC;QACnD,QAAIT,sYAAAA,EAAiBS,UAAWH,mZAA4BJ,4BAAAA,EAA0BO,QAAS;YAC7FD,IAAIE,IAAI,CAACD;QACX,OAAO,2XAAIR,oBAAAA,EAAkBQ,QAAQ;YACnCD,IAAIE,IAAI,IAAIN,cAAcK,MAAMJ,MAAM,EAAcC;QACtD,OAAO,IAAIG,MAAME,IAAI,KAAK,UAAU,UAAUF,OAAO;YACnD,OAAO;mBACFD;mBACAC,MAAMG,IAAI,CAACL,MAAM,CAA2B,CAACM,WAAWC;oBACzD,2XAAIX,aAAAA,EAAWW,MAAM;wBACnB,OAAO;+BAAID;4BAAW;gCAAE,GAAGC,GAAG;gCAAEH,MAAM;4BAAM;yBAAuC;oBACrF,OAAO;wBACL,OAAO;+BACFE;+BACAT,cAAcU,IAAIT,MAAM,EAAcC;yBAC1C;oBACH;gBACF,GAAG,EAAE;aACN;QACH;QAEA,OAAOE;IACT,GAAG,EAAE;AACP;uCAEeJ,cAAa","ignoreList":[0]}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/unflatten.ts"],"sourcesContent":["/*\n * Copyright (c) 2014, Hugh Kennedy\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n * 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n * 3. Neither the name of the nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*\n * Copyright (c) 2020, Feross Aboukhadijeh <https://feross.org>\n * Reference: https://www.npmjs.com/package/is-buffer\n * All rights reserved.\n */\nfunction isBuffer(obj) {\n  return (\n    obj != null &&\n    obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' &&\n    obj.constructor.isBuffer(obj)\n  )\n}\n\ninterface Opts {\n  delimiter?: string\n  object?: any\n  overwrite?: boolean\n  recursive?: boolean\n}\n\nexport const unflatten = (target, opts?: Opts) => {\n  opts = opts || {}\n\n  const delimiter = opts.delimiter || '.'\n  const overwrite = opts.overwrite || false\n  const recursive = opts.recursive || false\n  const result = {}\n\n  const isbuffer = isBuffer(target)\n\n  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\n    return target\n  }\n\n  // safely ensure that the key is an integer.\n  const getkey = (key) => {\n    const parsedKey = Number(key)\n    return isNaN(parsedKey) || key.indexOf('.') !== -1 || opts.object ? key : parsedKey\n  }\n\n  const sortedKeys = Object.keys(target).sort((keyA, keyB) => keyA.length - keyB.length)\n\n  sortedKeys.forEach((key) => {\n    const split = key.split(delimiter)\n    let key1 = getkey(split.shift())\n    let key2 = getkey(split[0])\n    let recipient = result\n\n    while (key2 !== undefined) {\n      if (key1 === '__proto__') {\n        return\n      }\n\n      const type = Object.prototype.toString.call(recipient[key1])\n      const isobject = type === '[object Object]' || type === '[object Array]'\n\n      // do not write over falsey, non-undefined values if overwrite is false\n      if (!overwrite && !isobject && typeof recipient[key1] !== 'undefined') {\n        return\n      }\n\n      if ((overwrite && !isobject) || (!overwrite && recipient[key1] == null)) {\n        recipient[key1] = typeof key2 === 'number' && !opts.object ? [] : {}\n      }\n\n      recipient = recipient[key1]\n\n      if (split.length > 0) {\n        key1 = getkey(split.shift())\n        key2 = getkey(split[0])\n      }\n    }\n\n    // unflatten again for 'messy objects'\n    recipient[key1] = recursive ? unflatten(target[key], opts) : target[key]\n  })\n\n  return result\n}\n"],"names":["isBuffer","obj","constructor","unflatten","target","opts","delimiter","overwrite","recursive","result","isbuffer","Object","prototype","toString","call","getkey","key","parsedKey","Number","isNaN","indexOf","object","sortedKeys","keys","sort","keyA","keyB","length","forEach","split","key1","shift","key2","recipient","undefined","type","isobject"],"mappings":"AAAA;;;;;;;;;;CAUC,GAED;;;;CAIC;;;AACD,SAASA,SAASC,GAAG;IACnB,OACEA,OAAO,QACPA,IAAIC,WAAW,IAAI,QACnB,OAAOD,IAAIC,WAAW,CAACF,QAAQ,KAAK,cACpCC,IAAIC,WAAW,CAACF,QAAQ,CAACC;AAE7B;AASO,MAAME,YAAY,CAACC,QAAQC;IAChCA,OAAOA,QAAQ,CAAC;IAEhB,MAAMC,YAAYD,KAAKC,SAAS,IAAI;IACpC,MAAMC,YAAYF,KAAKE,SAAS,IAAI;IACpC,MAAMC,YAAYH,KAAKG,SAAS,IAAI;IACpC,MAAMC,SAAS,CAAC;IAEhB,MAAMC,WAAWV,SAASI;IAE1B,IAAIM,YAAYC,OAAOC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACV,YAAY,mBAAmB;QAC5E,OAAOA;IACT;IAEA,4CAA4C;IAC5C,MAAMW,SAAS,CAACC;QACd,MAAMC,YAAYC,OAAOF;QACzB,OAAOG,MAAMF,cAAcD,IAAII,OAAO,CAAC,SAAS,CAAC,KAAKf,KAAKgB,MAAM,GAAGL,MAAMC;IAC5E;IAEA,MAAMK,aAAaX,OAAOY,IAAI,CAACnB,QAAQoB,IAAI,CAAC,CAACC,MAAMC,OAASD,KAAKE,MAAM,GAAGD,KAAKC,MAAM;IAErFL,WAAWM,OAAO,CAAC,CAACZ;QAClB,MAAMa,QAAQb,IAAIa,KAAK,CAACvB;QACxB,IAAIwB,OAAOf,OAAOc,MAAME,KAAK;QAC7B,IAAIC,OAAOjB,OAAOc,KAAK,CAAC,EAAE;QAC1B,IAAII,YAAYxB;QAEhB,MAAOuB,SAASE,UAAW;YACzB,IAAIJ,SAAS,aAAa;gBACxB;YACF;YAEA,MAAMK,OAAOxB,OAAOC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACmB,SAAS,CAACH,KAAK;YAC3D,MAAMM,WAAWD,SAAS,qBAAqBA,SAAS;YAExD,uEAAuE;YACvE,IAAI,CAAC5B,aAAa,CAAC6B,YAAY,OAAOH,SAAS,CAACH,KAAK,KAAK,aAAa;gBACrE;YACF;YAEA,IAAKvB,aAAa,CAAC6B,YAAc,CAAC7B,aAAa0B,SAAS,CAACH,KAAK,IAAI,MAAO;gBACvEG,SAAS,CAACH,KAAK,GAAG,OAAOE,SAAS,YAAY,CAAC3B,KAAKgB,MAAM,GAAG,EAAE,GAAG,CAAC;YACrE;YAEAY,YAAYA,SAAS,CAACH,KAAK;YAE3B,IAAID,MAAMF,MAAM,GAAG,GAAG;gBACpBG,OAAOf,OAAOc,MAAME,KAAK;gBACzBC,OAAOjB,OAAOc,KAAK,CAAC,EAAE;YACxB;QACF;QAEA,sCAAsC;QACtCI,SAAS,CAACH,KAAK,GAAGtB,YAAYL,UAAUC,MAAM,CAACY,IAAI,EAAEX,QAAQD,MAAM,CAACY,IAAI;IAC1E;IAEA,OAAOP;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 605, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getDataByPath.ts"],"sourcesContent":["import type { FormState } from '../admin/types.js'\n\nimport { unflatten } from './unflatten.js'\n\nexport const getDataByPath = <T = unknown>(fields: FormState, path: string): T => {\n  const pathPrefixToRemove = path.substring(0, path.lastIndexOf('.') + 1)\n  const name = path.split('.').pop()\n\n  const data = {}\n  Object.keys(fields).forEach((key) => {\n    if (!fields[key].disableFormData && (key.indexOf(`${path}.`) === 0 || key === path)) {\n      data[key.replace(pathPrefixToRemove, '')] = fields[key].value\n\n      if (fields[key]?.rows && fields[key].rows.length === 0) {\n        data[key.replace(pathPrefixToRemove, '')] = []\n      }\n    }\n  })\n\n  const unflattenedData = unflatten(data)\n\n  return unflattenedData?.[name]\n}\n"],"names":["unflatten","getDataByPath","fields","path","pathPrefixToRemove","substring","lastIndexOf","name","split","pop","data","Object","keys","forEach","key","disableFormData","indexOf","replace","value","rows","length","unflattenedData"],"mappings":";;;AAEA,SAASA,SAAS,QAAQ,iBAAgB;;AAEnC,MAAMC,gBAAgB,CAAcC,QAAmBC;IAC5D,MAAMC,qBAAqBD,KAAKE,SAAS,CAAC,GAAGF,KAAKG,WAAW,CAAC,OAAO;IACrE,MAAMC,OAAOJ,KAAKK,KAAK,CAAC,KAAKC,GAAG;IAEhC,MAAMC,OAAO,CAAC;IACdC,OAAOC,IAAI,CAACV,QAAQW,OAAO,CAAC,CAACC;QAC3B,IAAI,CAACZ,MAAM,CAACY,IAAI,CAACC,eAAe,IAAKD,CAAAA,IAAIE,OAAO,CAAC,GAAGb,KAAK,CAAC,CAAC,MAAM,KAAKW,QAAQX,IAAG,GAAI;YACnFO,IAAI,CAACI,IAAIG,OAAO,CAACb,oBAAoB,IAAI,GAAGF,MAAM,CAACY,IAAI,CAACI,KAAK;YAE7D,IAAIhB,MAAM,CAACY,IAAI,EAAEK,QAAQjB,MAAM,CAACY,IAAI,CAACK,IAAI,CAACC,MAAM,KAAK,GAAG;gBACtDV,IAAI,CAACI,IAAIG,OAAO,CAACb,oBAAoB,IAAI,GAAG,EAAE;YAChD;QACF;IACF;IAEA,MAAMiB,sYAAkBrB,YAAAA,EAAUU;IAElC,OAAOW,iBAAiB,CAACd,KAAK;AAChC,EAAC","ignoreList":[0]}},
    {"offset": {"line": 631, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getSelectMode.ts"],"sourcesContent":["import type { SelectMode, SelectType } from '../types/index.js'\n\nexport const getSelectMode = (select: SelectType): SelectMode => {\n  for (const key in select) {\n    const selectValue = select[key]\n    if (selectValue === false) {\n      return 'exclude'\n    }\n\n    if (typeof selectValue === 'object') {\n      return getSelectMode(selectValue)\n    }\n  }\n\n  return 'include'\n}\n"],"names":["getSelectMode","select","key","selectValue"],"mappings":";;;AAEO,MAAMA,gBAAgB,CAACC;IAC5B,IAAK,MAAMC,OAAOD,OAAQ;QACxB,MAAME,cAAcF,MAAM,CAACC,IAAI;QAC/B,IAAIC,gBAAgB,OAAO;YACzB,OAAO;QACT;QAEA,IAAI,OAAOA,gBAAgB,UAAU;YACnC,OAAOH,cAAcG;QACvB;IACF;IAEA,OAAO;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 652, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 658, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/reduceFieldsToValues.ts"],"sourcesContent":["import type { Data, FormState } from '../admin/types.js'\n\nimport { unflatten as flatleyUnflatten } from './unflatten.js'\n/**\n * Reduce flattened form fields (Fields) to just map to the respective values instead of the full FormField object\n *\n * @param unflatten This also unflattens the data if `unflatten` is true. The unflattened data should match the original data structure\n * @param ignoreDisableFormData - if true, will include fields that have `disableFormData` set to true, for example, blocks or arrays fields.\n *\n */\nexport const reduceFieldsToValues = (\n  fields: FormState,\n  unflatten?: boolean,\n  ignoreDisableFormData?: boolean,\n): Data => {\n  let data = {}\n\n  if (!fields) {\n    return data\n  }\n\n  Object.keys(fields).forEach((key) => {\n    if (ignoreDisableFormData === true || !fields[key]?.disableFormData) {\n      data[key] = fields[key]?.value\n    }\n  })\n\n  if (unflatten) {\n    data = flatleyUnflatten(data)\n  }\n\n  return data\n}\n"],"names":["unflatten","flatleyUnflatten","reduceFieldsToValues","fields","ignoreDisableFormData","data","Object","keys","forEach","key","disableFormData","value"],"mappings":";;;AAEA,SAASA,aAAaC,gBAAgB,QAAQ,iBAAgB;;AAQvD,MAAMC,uBAAuB,CAClCC,QACAH,WACAI;IAEA,IAAIC,OAAO,CAAC;IAEZ,IAAI,CAACF,QAAQ;QACX,OAAOE;IACT;IAEAC,OAAOC,IAAI,CAACJ,QAAQK,OAAO,CAAC,CAACC;QAC3B,IAAIL,0BAA0B,QAAQ,CAACD,MAAM,CAACM,IAAI,EAAEC,iBAAiB;YACnEL,IAAI,CAACI,IAAI,GAAGN,MAAM,CAACM,IAAI,EAAEE;QAC3B;IACF;IAEA,IAAIX,WAAW;QACbK,2XAAOJ,YAAAA,EAAiBI;IAC1B;IAEA,OAAOA;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 684, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getSiblingData.ts"],"sourcesContent":["import type { Data, FormState } from '../admin/types.js'\n\nimport { reduceFieldsToValues } from './reduceFieldsToValues.js'\nimport { unflatten } from './unflatten.js'\n\nexport const getSiblingData = (fields: FormState, path: string): Data => {\n  if (!fields) {\n    return null\n  }\n\n  if (path.indexOf('.') === -1) {\n    return reduceFieldsToValues(fields, true)\n  }\n\n  const siblingFields = {}\n\n  // Determine if the last segment of the path is an array-based row\n  const pathSegments = path.split('.')\n  const lastSegment = pathSegments[pathSegments.length - 1]\n  const lastSegmentIsRowIndex = !Number.isNaN(Number(lastSegment))\n\n  let parentFieldPath: string\n\n  if (lastSegmentIsRowIndex) {\n    // If the last segment is a row index,\n    // the sibling data is that row's contents\n    // so create a parent field path that will\n    // retrieve all contents of that row index only\n    parentFieldPath = `${path}.`\n  } else {\n    // Otherwise, the last path segment is a field name\n    // and it should be removed\n    parentFieldPath = path.substring(0, path.lastIndexOf('.') + 1)\n  }\n\n  Object.keys(fields).forEach((fieldKey) => {\n    if (!fields[fieldKey].disableFormData && fieldKey.indexOf(parentFieldPath) === 0) {\n      siblingFields[fieldKey.replace(parentFieldPath, '')] = fields[fieldKey].value\n    }\n  })\n\n  return unflatten(siblingFields)\n}\n"],"names":["reduceFieldsToValues","unflatten","getSiblingData","fields","path","indexOf","siblingFields","pathSegments","split","lastSegment","length","lastSegmentIsRowIndex","Number","isNaN","parentFieldPath","substring","lastIndexOf","Object","keys","forEach","fieldKey","disableFormData","replace","value"],"mappings":";;;AAGA,SAASC,SAAS,QAAQ,iBAAgB;AAD1C,SAASD,oBAAoB,QAAQ,4BAA2B;;;AAGzD,MAAME,iBAAiB,CAACC,QAAmBC;IAChD,IAAI,CAACD,QAAQ;QACX,OAAO;IACT;IAEA,IAAIC,KAAKC,OAAO,CAAC,SAAS,CAAC,GAAG;QAC5B,QAAOL,qZAAAA,EAAqBG,QAAQ;IACtC;IAEA,MAAMG,gBAAgB,CAAC;IAEvB,kEAAkE;IAClE,MAAMC,eAAeH,KAAKI,KAAK,CAAC;IAChC,MAAMC,cAAcF,YAAY,CAACA,aAAaG,MAAM,GAAG,EAAE;IACzD,MAAMC,wBAAwB,CAACC,OAAOC,KAAK,CAACD,OAAOH;IAEnD,IAAIK;IAEJ,IAAIH,uBAAuB;QACzB,sCAAsC;QACtC,0CAA0C;QAC1C,0CAA0C;QAC1C,+CAA+C;QAC/CG,kBAAkB,GAAGV,KAAK,CAAC,CAAC;IAC9B,OAAO;QACL,mDAAmD;QACnD,2BAA2B;QAC3BU,kBAAkBV,KAAKW,SAAS,CAAC,GAAGX,KAAKY,WAAW,CAAC,OAAO;IAC9D;IAEAC,OAAOC,IAAI,CAACf,QAAQgB,OAAO,CAAC,CAACC;QAC3B,IAAI,CAACjB,MAAM,CAACiB,SAAS,CAACC,eAAe,IAAID,SAASf,OAAO,CAACS,qBAAqB,GAAG;YAChFR,aAAa,CAACc,SAASE,OAAO,CAACR,iBAAiB,IAAI,GAAGX,MAAM,CAACiB,SAAS,CAACG,KAAK;QAC/E;IACF;IAEA,2XAAOtB,YAAAA,EAAUK;AACnB,EAAC","ignoreList":[0]}},
    {"offset": {"line": 722, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getUniqueListBy.ts"],"sourcesContent":["export function getUniqueListBy<T>(arr: T[], key: string): T[] {\n  return [...new Map(arr.map((item) => [item[key], item])).values()]\n}\n"],"names":["getUniqueListBy","arr","key","Map","map","item","values"],"mappings":";;;AAAO,SAASA,gBAAmBC,GAAQ,EAAEC,GAAW;IACtD,OAAO;WAAI,IAAIC,IAAIF,IAAIG,GAAG,CAAC,CAACC,OAAS;gBAACA,IAAI,CAACH,IAAI;gBAAEG;aAAK,GAAGC,MAAM;KAAG;AACpE","ignoreList":[0]}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isNumber.ts"],"sourcesContent":["export function isNumber(value: unknown): value is number {\n  if (value === null || value === undefined || (typeof value === 'string' && value.trim() === '')) {\n    return false\n  }\n\n  return !Number.isNaN(Number(value))\n}\n"],"names":["isNumber","value","undefined","trim","Number","isNaN"],"mappings":";;;AAAO,SAASA,SAASC,KAAc;IACrC,IAAIA,UAAU,QAAQA,UAAUC,aAAc,OAAOD,UAAU,YAAYA,MAAME,IAAI,OAAO,IAAK;QAC/F,OAAO;IACT;IAEA,OAAO,CAACC,OAAOC,KAAK,CAACD,OAAOH;AAC9B","ignoreList":[0]}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/setsAreEqual.ts"],"sourcesContent":["export const setsAreEqual = (xs: Set<unknown>, ys: Set<unknown>) =>\n  xs.size === ys.size && [...xs].every((x) => ys.has(x))\n"],"names":["setsAreEqual","xs","ys","size","every","x","has"],"mappings":";;;AAAO,MAAMA,eAAe,CAACC,IAAkBC,KAC7CD,GAAGE,IAAI,KAAKD,GAAGC,IAAI,IAAI;WAAIF;KAAG,CAACG,KAAK,CAAC,CAACC,IAAMH,GAAGI,GAAG,CAACD,IAAG","ignoreList":[0]}},
    {"offset": {"line": 766, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/toKebabCase.ts"],"sourcesContent":["const toKebabCase = (string) =>\n  string\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\n    .replace(/\\s+/g, '-')\n    .toLowerCase()\n\nexport default toKebabCase\n"],"names":["toKebabCase","string","replace","toLowerCase"],"mappings":";;;AAAA,MAAMA,cAAc,CAACC,SACnBA,OACGC,OAAO,CAAC,mBAAmB,SAC3BA,OAAO,CAAC,QAAQ,KAChBC,WAAW;uCAEDH,YAAW","ignoreList":[0]}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/validateMimeType.ts"],"sourcesContent":["export const validateMimeType = (mimeType: string, allowedMimeTypes: string[]): boolean => {\n  const cleanedMimeTypes = allowedMimeTypes.map((v) => v.replace('*', ''))\n  return cleanedMimeTypes.some((cleanedMimeType) => mimeType.startsWith(cleanedMimeType))\n}\n"],"names":["validateMimeType","mimeType","allowedMimeTypes","cleanedMimeTypes","map","v","replace","some","cleanedMimeType","startsWith"],"mappings":";;;AAAO,MAAMA,mBAAmB,CAACC,UAAkBC;IACjD,MAAMC,mBAAmBD,iBAAiBE,GAAG,CAAC,CAACC,IAAMA,EAAEC,OAAO,CAAC,KAAK;IACpE,OAAOH,iBAAiBI,IAAI,CAAC,CAACC,kBAAoBP,SAASQ,UAAU,CAACD;AACxE,EAAC","ignoreList":[0]}},
    {"offset": {"line": 791, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 797, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/wait.ts"],"sourcesContent":["export async function wait(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n"],"names":["wait","ms","Promise","resolve","setTimeout"],"mappings":";;;AAAO,eAAeA,KAAKC,EAAE;IAC3B,OAAO,IAAIC,QAAQ,CAACC;QAClBC,WAAWD,SAASF;IACtB;AACF","ignoreList":[0]}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/wordBoundariesRegex.ts"],"sourcesContent":["export default (input: string): RegExp => {\n  const words = input.split(' ')\n\n  // Regex word boundaries that work for cyrillic characters - https://stackoverflow.com/a/47062016/1717697\n  const wordBoundaryBefore = '(?:(?:[^\\\\p{L}\\\\p{N}])|^)' // Converted to a non-matching group instead of positive lookbehind for Safari\n  const wordBoundaryAfter = '(?=[^\\\\p{L}\\\\p{N}]|$)'\n  const regex = words.reduce((pattern, word, i) => {\n    const escapedWord = word.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    return `${pattern}(?=.*${wordBoundaryBefore}.*${escapedWord}.*${wordBoundaryAfter})${\n      i + 1 === words.length ? '.+' : ''\n    }`\n  }, '')\n  return new RegExp(regex, 'i')\n}\n"],"names":["input","words","split","wordBoundaryBefore","wordBoundaryAfter","regex","reduce","pattern","word","i","escapedWord","replace","length","RegExp"],"mappings":";;;uCAAe,CAACA;IACd,MAAMC,QAAQD,MAAME,KAAK,CAAC;IAE1B,yGAAyG;IACzG,MAAMC,qBAAqB,4BAA4B,8EAA8E;;IACrI,MAAMC,oBAAoB;IAC1B,MAAMC,QAAQJ,MAAMK,MAAM,CAAC,CAACC,SAASC,MAAMC;QACzC,MAAMC,cAAcF,KAAKG,OAAO,CAAC,uBAAuB;QACxD,OAAO,GAAGJ,QAAQ,KAAK,EAAEJ,mBAAmB,EAAE,EAAEO,YAAY,EAAE,EAAEN,kBAAkB,CAAC,EACjFK,IAAI,MAAMR,MAAMW,MAAM,GAAG,OAAO,IAChC;IACJ,GAAG;IACH,OAAO,IAAIC,OAAOR,OAAO;AAC3B,CAAA,EAAC","ignoreList":[0]}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 833, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isValidID.ts"],"sourcesContent":["import ObjectIdImport from 'bson-objectid'\n\nconst ObjectId = (ObjectIdImport.default ||\n  ObjectIdImport) as unknown as typeof ObjectIdImport.default\n\nexport const isValidID = (\n  value: number | string,\n  type: 'number' | 'ObjectID' | 'text',\n): boolean => {\n  if (type === 'text' && value) {\n    if (['object', 'string'].includes(typeof value)) {\n      const isObjectID = ObjectId.isValid(value as string)\n      return typeof value === 'string' || isObjectID\n    }\n    return false\n  }\n\n  if (typeof value === 'number' && !Number.isNaN(value)) {\n    return true\n  }\n\n  if (type === 'ObjectID') {\n    return ObjectId.isValid(String(value))\n  }\n}\n"],"names":["ObjectIdImport","ObjectId","default","isValidID","value","type","includes","isObjectID","isValid","Number","isNaN","String"],"mappings":";;;AAAA,OAAOA,oBAAoB,gBAAe;;AAE1C,MAAMC,qNAAYD,UAAAA,CAAeE,OAAO,8MACtCF,UAAAA;AAEK,MAAMG,YAAY,CACvBC,OACAC;IAEA,IAAIA,SAAS,UAAUD,OAAO;QAC5B,IAAI;YAAC;YAAU;SAAS,CAACE,QAAQ,CAAC,OAAOF,QAAQ;YAC/C,MAAMG,aAAaN,SAASO,OAAO,CAACJ;YACpC,OAAO,OAAOA,UAAU,YAAYG;QACtC;QACA,OAAO;IACT;IAEA,IAAI,OAAOH,UAAU,YAAY,CAACK,OAAOC,KAAK,CAACN,QAAQ;QACrD,OAAO;IACT;IAEA,IAAIC,SAAS,YAAY;QACvB,OAAOJ,SAASO,OAAO,CAACG,OAAOP;IACjC;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 863, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeFallbackLocale.ts"],"sourcesContent":["import type { SanitizedLocalizationConfig } from '../config/types.js'\nimport type { TypedLocale } from '../index.js'\n\ninterface Args {\n  fallbackLocale: false | TypedLocale\n  locale: string\n  localization: SanitizedLocalizationConfig\n}\n\n/**\n * Sanitizes fallbackLocale based on a provided fallbackLocale, locale and localization config\n *\n * Handles the following scenarios:\n * - determines if a fallback locale should be used\n * - determines if a locale specific fallback should be used in place of the default locale\n * - sets the fallbackLocale to 'null' if no fallback locale should be used\n */\nexport const sanitizeFallbackLocale = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: Args): null | string => {\n  const hasFallbackLocale =\n    fallbackLocale === undefined || fallbackLocale === null\n      ? localization && localization.fallback\n      : fallbackLocale\n        ? !['false', 'none', 'null'].includes(fallbackLocale)\n        : false\n\n  if (hasFallbackLocale) {\n    if (!fallbackLocale) {\n      // Check for locale specific fallback\n      const localeSpecificFallback =\n        localization && localization?.locales?.length\n          ? localization.locales.find((localeConfig) => localeConfig.code === locale)\n              ?.fallbackLocale\n          : undefined\n\n      if (localeSpecificFallback) {\n        fallbackLocale = localeSpecificFallback\n      } else {\n        // Use defaultLocale as fallback otherwise\n        if (localization && 'fallback' in localization && localization.fallback) {\n          fallbackLocale = localization.defaultLocale\n        }\n      }\n    }\n  } else {\n    fallbackLocale = null\n  }\n\n  return fallbackLocale as null | string\n}\n"],"names":["sanitizeFallbackLocale","fallbackLocale","locale","localization","hasFallbackLocale","undefined","fallback","includes","localeSpecificFallback","locales","length","find","localeConfig","code","defaultLocale"],"mappings":"AASA;;;;;;;CAOC,GACD;;;AAAO,MAAMA,yBAAyB,CAAC,EACrCC,cAAc,EACdC,MAAM,EACNC,YAAY,EACP;IACL,MAAMC,oBACJH,mBAAmBI,aAAaJ,mBAAmB,OAC/CE,gBAAgBA,aAAaG,QAAQ,GACrCL,iBACE,CAAC;QAAC;QAAS;QAAQ;KAAO,CAACM,QAAQ,CAACN,kBACpC;IAER,IAAIG,mBAAmB;QACrB,IAAI,CAACH,gBAAgB;YACnB,qCAAqC;YACrC,MAAMO,yBACJL,gBAAgBA,cAAcM,SAASC,SACnCP,aAAaM,OAAO,CAACE,IAAI,CAAC,CAACC,eAAiBA,aAAaC,IAAI,KAAKX,SAC9DD,iBACJI;YAEN,IAAIG,wBAAwB;gBAC1BP,iBAAiBO;YACnB,OAAO;gBACL,0CAA0C;gBAC1C,IAAIL,gBAAgB,cAAcA,gBAAgBA,aAAaG,QAAQ,EAAE;oBACvEL,iBAAiBE,aAAaW,aAAa;gBAC7C;YACF;QACF;IACF,OAAO;QACLb,iBAAiB;IACnB;IAEA,OAAOA;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 897, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 903, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/createLocalReq.ts"],"sourcesContent":["import type { User } from '../auth/types.js'\nimport type { Payload, RequestContext, TypedLocale } from '../index.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { getDataLoader } from '../collections/dataloader.js'\nimport { getLocalI18n } from '../translations/getLocalI18n.js'\nimport { sanitizeFallbackLocale } from '../utilities/sanitizeFallbackLocale.js'\n\nfunction getRequestContext(\n  req: Partial<PayloadRequest> = { context: null } as PayloadRequest,\n  context: RequestContext = {},\n): RequestContext {\n  if (req.context) {\n    if (Object.keys(req.context).length === 0 && req.context.constructor === Object) {\n      // if req.context is `{}` avoid unnecessary spread\n      return context\n    } else {\n      return { ...req.context, ...context }\n    }\n  } else {\n    return context\n  }\n}\n\nconst attachFakeURLProperties = (req: Partial<PayloadRequest>) => {\n  /**\n   * *NOTE*\n   * If no URL is provided, the local API was called directly outside\n   * the context of a request. Therefore we create a fake URL object.\n   * `ts-expect-error` is used below for properties that are 'read-only'\n   * since they do not exist yet we can safely ignore the error.\n   */\n  let urlObject\n\n  function getURLObject() {\n    if (urlObject) {\n      return urlObject\n    }\n    const urlToUse = req?.url || req.payload.config?.serverURL || 'http://localhost'\n    try {\n      urlObject = new URL(urlToUse)\n    } catch (error) {\n      urlObject = new URL('http://localhost')\n    }\n\n    return urlObject\n  }\n\n  if (!req.host) {\n    req.host = getURLObject().host\n  }\n  if (!req.protocol) {\n    req.protocol = getURLObject().protocol\n  }\n  if (!req.pathname) {\n    req.pathname = getURLObject().pathname\n  }\n  if (!req.searchParams) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.searchParams = getURLObject().searchParams\n  }\n  if (!req.origin) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.origin = getURLObject().origin\n  }\n  if (!req?.url) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.url = getURLObject().href\n  }\n}\n\ntype CreateLocalReq = (\n  options: {\n    context?: RequestContext\n    fallbackLocale?: false | TypedLocale\n    locale?: string\n    req?: Partial<PayloadRequest>\n    user?: User\n  },\n  payload: Payload,\n) => Promise<PayloadRequest>\n\nexport const createLocalReq: CreateLocalReq = async (\n  { context, fallbackLocale, locale: localeArg, req = {} as PayloadRequest, user },\n  payload,\n) => {\n  const localization = payload.config?.localization\n  if (localization) {\n    const locale = localeArg === '*' ? 'all' : localeArg\n    const defaultLocale = localization.defaultLocale\n    const localeCandidate = locale || req?.locale || req?.query?.locale\n\n    req.locale =\n      localeCandidate && typeof localeCandidate === 'string' ? localeCandidate : defaultLocale\n\n    const sanitizedFallback = sanitizeFallbackLocale({\n      fallbackLocale,\n      locale: req.locale,\n      localization,\n    })\n\n    req.fallbackLocale = sanitizedFallback\n  }\n\n  const i18n =\n    req?.i18n ||\n    (await getLocalI18n({ config: payload.config, language: payload.config.i18n.fallbackLanguage }))\n\n  if (!req.headers) {\n    // @ts-expect-error eslint-disable-next-line no-param-reassign\n    req.headers = new Headers()\n  }\n\n  req.context = getRequestContext(req, context)\n  req.payloadAPI = req?.payloadAPI || 'local'\n  req.payload = payload\n  req.i18n = i18n\n  req.t = i18n.t\n  req.user = user || req?.user || null\n  req.payloadDataLoader = req?.payloadDataLoader || getDataLoader(req as PayloadRequest)\n  req.routeParams = req?.routeParams || {}\n  req.query = req?.query || {}\n\n  attachFakeURLProperties(req)\n\n  return req as PayloadRequest\n}\n"],"names":["getDataLoader","getLocalI18n","sanitizeFallbackLocale","getRequestContext","req","context","Object","keys","length","constructor","attachFakeURLProperties","urlObject","getURLObject","urlToUse","url","payload","config","serverURL","URL","error","host","protocol","pathname","searchParams","origin","href","createLocalReq","fallbackLocale","locale","localeArg","user","localization","defaultLocale","localeCandidate","query","sanitizedFallback","i18n","language","fallbackLanguage","headers","Headers","payloadAPI","t","payloadDataLoader","routeParams"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1005, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/initTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * Starts a new transaction using the db adapter with a random id and then assigns it to the req.transaction\n * @returns true if beginning a transaction and false when req already has a transaction to use\n */\nexport async function initTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<boolean> {\n  const { payload, transactionID } = req\n  if (transactionID instanceof Promise) {\n    // wait for whoever else is already creating the transaction\n    await transactionID\n    return false\n  }\n\n  if (transactionID) {\n    // we already have a transaction, we're not in charge of committing it\n    return false\n  }\n  if (typeof payload.db.beginTransaction === 'function') {\n    // create a new transaction\n    req.transactionID = payload.db.beginTransaction().then((transactionID) => {\n      if (transactionID) {\n        req.transactionID = transactionID\n      }\n\n      return transactionID\n    })\n    return !!(await req.transactionID)\n  }\n  return false\n}\n"],"names":["initTransaction","req","payload","transactionID","Promise","db","beginTransaction","then"],"mappings":"AAIA;;;CAGC,GACD;;;AAAO,eAAeA,gBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IACnC,IAAIE,yBAAyBC,SAAS;QACpC,4DAA4D;QAC5D,MAAMD;QACN,OAAO;IACT;IAEA,IAAIA,eAAe;QACjB,sEAAsE;QACtE,OAAO;IACT;IACA,IAAI,OAAOD,QAAQG,EAAE,CAACC,gBAAgB,KAAK,YAAY;QACrD,2BAA2B;QAC3BL,IAAIE,aAAa,GAAGD,QAAQG,EAAE,CAACC,gBAAgB,GAAGC,IAAI,CAAC,CAACJ;YACtD,IAAIA,eAAe;gBACjBF,IAAIE,aAAa,GAAGA;YACtB;YAEA,OAAOA;QACT;QACA,OAAO,CAAC,CAAE,MAAMF,IAAIE,aAAa;IACnC;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1046, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/commitTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * complete a transaction calling adapter db.commitTransaction and delete the transactionID from req\n */\nexport async function commitTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<void> {\n  const { payload, transactionID } = req\n\n  await payload.db.commitTransaction(transactionID)\n  delete req.transactionID\n}\n"],"names":["commitTransaction","req","payload","transactionID","db"],"mappings":"AAIA;;CAEC,GACD;;;AAAO,eAAeA,kBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IAEnC,MAAMC,QAAQE,EAAE,CAACJ,iBAAiB,CAACG;IACnC,OAAOF,IAAIE,aAAa;AAC1B","ignoreList":[0]}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/killTransaction.ts"],"sourcesContent":["import type { MarkRequired } from 'ts-essentials'\n\nimport type { PayloadRequest } from '../types/index.js'\n\n/**\n * Rollback the transaction from the req using the db adapter and removes it from the req\n */\nexport async function killTransaction(\n  req: MarkRequired<Partial<PayloadRequest>, 'payload'>,\n): Promise<void> {\n  const { payload, transactionID } = req\n  if (transactionID && !(transactionID instanceof Promise)) {\n    try {\n      await payload.db.rollbackTransaction(req.transactionID)\n    } catch (error) {\n      // swallow any errors while attempting to rollback\n    }\n    delete req.transactionID\n  }\n}\n"],"names":["killTransaction","req","payload","transactionID","Promise","db","rollbackTransaction","error"],"mappings":"AAIA;;CAEC,GACD;;;AAAO,eAAeA,gBACpBC,GAAqD;IAErD,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAAGF;IACnC,IAAIE,iBAAiB,CAAEA,CAAAA,yBAAyBC,OAAM,GAAI;QACxD,IAAI;YACF,MAAMF,QAAQG,EAAE,CAACC,mBAAmB,CAACL,IAAIE,aAAa;QACxD,EAAE,OAAOI,OAAO;QACd,kDAAkD;QACpD;QACA,OAAON,IAAIE,aAAa;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 1078, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1084, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isolateObjectProperty.ts"],"sourcesContent":["/* eslint-disable no-restricted-exports */\n/**\n * Creates a proxy for the given object that has its own property\n */\nexport default function isolateObjectProperty<T extends object>(\n  object: T,\n  key: (keyof T)[] | keyof T,\n): T {\n  const keys = Array.isArray(key) ? key : [key]\n  const delegate = {} as T\n\n  // Initialize delegate with the keys, if they exist in the original object\n  for (const k of keys) {\n    if (k in object) {\n      delegate[k] = object[k]\n    }\n  }\n\n  const handler: ProxyHandler<T> = {\n    deleteProperty(target, p): boolean {\n      return Reflect.deleteProperty(keys.includes(p as keyof T) ? delegate : target, p)\n    },\n    get(target, p, receiver) {\n      return Reflect.get(keys.includes(p as keyof T) ? delegate : target, p, receiver)\n    },\n    has(target, p) {\n      return Reflect.has(keys.includes(p as keyof T) ? delegate : target, p)\n    },\n    set(target, p, newValue, receiver) {\n      if (keys.includes(p as keyof T)) {\n        // in case of transactionID we must ignore any receiver, because\n        // \"If provided and target does not have a setter for propertyKey, the property will be set on receiver instead.\"\n        return Reflect.set(delegate, p, newValue)\n      } else {\n        return Reflect.set(target, p, newValue, receiver)\n      }\n    },\n  }\n  return new Proxy(object, handler)\n}\n"],"names":["isolateObjectProperty","object","key","keys","Array","isArray","delegate","k","handler","deleteProperty","target","p","Reflect","includes","get","receiver","has","set","newValue","Proxy"],"mappings":"AAAA,wCAAwC,GACxC;;CAEC,GACD;;;AAAe,SAASA,sBACtBC,MAAS,EACTC,GAA0B;IAE1B,MAAMC,OAAOC,MAAMC,OAAO,CAACH,OAAOA,MAAM;QAACA;KAAI;IAC7C,MAAMI,WAAW,CAAC;IAElB,0EAA0E;IAC1E,KAAK,MAAMC,KAAKJ,KAAM;QACpB,IAAII,KAAKN,QAAQ;YACfK,QAAQ,CAACC,EAAE,GAAGN,MAAM,CAACM,EAAE;QACzB;IACF;IAEA,MAAMC,UAA2B;QAC/BC,gBAAeC,MAAM,EAAEC,CAAC;YACtB,OAAOC,QAAQH,cAAc,CAACN,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC;QACjF;QACAG,KAAIJ,MAAM,EAAEC,CAAC,EAAEI,QAAQ;YACrB,OAAOH,QAAQE,GAAG,CAACX,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC,GAAGI;QACzE;QACAC,KAAIN,MAAM,EAAEC,CAAC;YACX,OAAOC,QAAQI,GAAG,CAACb,KAAKU,QAAQ,CAACF,KAAgBL,WAAWI,QAAQC;QACtE;QACAM,KAAIP,MAAM,EAAEC,CAAC,EAAEO,QAAQ,EAAEH,QAAQ;YAC/B,IAAIZ,KAAKU,QAAQ,CAACF,IAAe;gBAC/B,gEAAgE;gBAChE,iHAAiH;gBACjH,OAAOC,QAAQK,GAAG,CAACX,UAAUK,GAAGO;YAClC,OAAO;gBACL,OAAON,QAAQK,GAAG,CAACP,QAAQC,GAAGO,UAAUH;YAC1C;QACF;IACF;IACA,OAAO,IAAII,MAAMlB,QAAQO;AAC3B","ignoreList":[0]}},
    {"offset": {"line": 1122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1128, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/formatLabels.ts"],"sourcesContent":["import pluralize from 'pluralize'\nconst { isPlural, singular } = pluralize\n\nconst capitalizeFirstLetter = (string: string): string =>\n  string.charAt(0).toUpperCase() + string.slice(1)\n\nconst toWords = (inputString: string, joinWords = false): string => {\n  const notNullString = inputString || ''\n  const trimmedString = notNullString.trim()\n  const arrayOfStrings = trimmedString.split(/[\\s-]/)\n\n  const splitStringsArray = []\n  arrayOfStrings.forEach((tempString) => {\n    if (tempString !== '') {\n      const splitWords = tempString.split(/(?=[A-Z])/).join(' ')\n      splitStringsArray.push(capitalizeFirstLetter(splitWords))\n    }\n  })\n\n  return joinWords ? splitStringsArray.join('').replace(/\\s/g, '') : splitStringsArray.join(' ')\n}\n\nconst formatLabels = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug)\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nconst formatNames = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug, true)\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nexport { formatLabels, formatNames, toWords }\n"],"names":["pluralize","isPlural","singular","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toWords","inputString","joinWords","notNullString","trimmedString","trim","arrayOfStrings","split","splitStringsArray","forEach","tempString","splitWords","join","push","replace","formatLabels","slug","words","plural","formatNames"],"mappings":";;;;;AAAA,OAAOA,eAAe,YAAW;;AACjC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE,gMAAGF,UAAAA;AAE/B,MAAMG,wBAAwB,CAACC,SAC7BA,OAAOC,MAAM,CAAC,GAAGC,WAAW,KAAKF,OAAOG,KAAK,CAAC;AAEhD,MAAMC,UAAU,CAACC,aAAqBC,YAAY,KAAK;IACrD,MAAMC,gBAAgBF,eAAe;IACrC,MAAMG,gBAAgBD,cAAcE,IAAI;IACxC,MAAMC,iBAAiBF,cAAcG,KAAK,CAAC;IAE3C,MAAMC,oBAAoB,EAAE;IAC5BF,eAAeG,OAAO,CAAC,CAACC;QACtB,IAAIA,eAAe,IAAI;YACrB,MAAMC,aAAaD,WAAWH,KAAK,CAAC,aAAaK,IAAI,CAAC;YACtDJ,kBAAkBK,IAAI,CAAClB,sBAAsBgB;QAC/C;IACF;IAEA,OAAOT,YAAYM,kBAAkBI,IAAI,CAAC,IAAIE,OAAO,CAAC,OAAO,MAAMN,kBAAkBI,IAAI,CAAC;AAC5F;AAEA,MAAMG,eAAe,CAACC;IACpB,MAAMC,QAAQjB,QAAQgB;IACtB,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,yMAAQ1B,UAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN;AAEA,MAAME,cAAc,CAACH;IACnB,MAAMC,QAAQjB,QAAQgB,MAAM;IAC5B,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,yMAAQ1B,UAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN","ignoreList":[0]}},
    {"offset": {"line": 1172, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/traverseFields.ts"],"sourcesContent":["import type { ArrayField, BlocksField, Field, TabAsField } from '../fields/config/types.js'\n\nimport { fieldHasSubFields } from '../fields/config/types.js'\n\nconst traverseArrayOrBlocksField = ({\n  callback,\n  data,\n  field,\n  fillEmpty,\n  parentRef,\n}: {\n  callback: TraverseFieldsCallback\n  data: Record<string, unknown>[]\n  field: ArrayField | BlocksField\n  fillEmpty: boolean\n  parentRef?: unknown\n}) => {\n  if (fillEmpty) {\n    if (field.type === 'array') {\n      traverseFields({ callback, fields: field.fields, parentRef })\n    }\n    if (field.type === 'blocks') {\n      field.blocks.forEach((block) => {\n        traverseFields({ callback, fields: block.fields, parentRef })\n      })\n    }\n    return\n  }\n  for (const ref of data) {\n    let fields: Field[]\n    if (field.type === 'blocks' && typeof ref?.blockType === 'string') {\n      const block = field.blocks.find((block) => block.slug === ref.blockType)\n      fields = block?.fields\n    } else if (field.type === 'array') {\n      fields = field.fields\n    }\n\n    if (fields) {\n      traverseFields({ callback, fields, fillEmpty, parentRef, ref })\n    }\n  }\n}\n\nexport type TraverseFieldsCallback = (args: {\n  /**\n   * The current field\n   */\n  field: Field | TabAsField\n  /**\n   * Function that when called will skip the current field and continue to the next\n   */\n  next?: () => void\n  /**\n   * The parent reference object\n   */\n  parentRef?: Record<string, unknown> | unknown\n  /**\n   * The current reference object\n   */\n  ref?: Record<string, unknown> | unknown\n}) => boolean | void\n\ntype TraverseFieldsArgs = {\n  callback: TraverseFieldsCallback\n  fields: (Field | TabAsField)[]\n  fillEmpty?: boolean\n  parentRef?: Record<string, unknown> | unknown\n  ref?: Record<string, unknown> | unknown\n}\n\n/**\n * Iterate a recurse an array of fields, calling a callback for each field\n *\n * @param fields\n * @param callback callback called for each field, discontinue looping if callback returns truthy\n * @param fillEmpty fill empty properties to use this without data\n * @param ref the data or any artifacts assigned in the callback during field recursion\n * @param parentRef the data or any artifacts assigned in the callback during field recursion one level up\n */\nexport const traverseFields = ({\n  callback,\n  fields,\n  fillEmpty = true,\n  parentRef = {},\n  ref = {},\n}: TraverseFieldsArgs): void => {\n  fields.some((field) => {\n    let skip = false\n    const next = () => {\n      skip = true\n    }\n\n    if (!ref || typeof ref !== 'object') {\n      return\n    }\n\n    if (callback && callback({ field, next, parentRef, ref })) {\n      return true\n    }\n\n    if (skip) {\n      return false\n    }\n\n    // avoid mutation of ref for all fields\n    let currentRef = ref\n    let currentParentRef = parentRef\n\n    if (field.type === 'tabs' && 'tabs' in field) {\n      for (const tab of field.tabs) {\n        let tabRef = ref\n        if ('name' in tab && tab.name) {\n          if (!ref[tab.name] || typeof ref[tab.name] !== 'object') {\n            if (fillEmpty) {\n              ref[tab.name] = {}\n            } else {\n              continue\n            }\n          }\n\n          tabRef = tabRef[tab.name]\n\n          if (tab.localized) {\n            for (const key in tabRef as Record<string, unknown>) {\n              if (tabRef[key] && typeof tabRef[key] === 'object') {\n                traverseFields({\n                  callback,\n                  fields: tab.fields,\n                  fillEmpty,\n                  parentRef: currentParentRef,\n                  ref: tabRef[key],\n                })\n              }\n            }\n            continue\n          }\n        }\n\n        if (\n          callback &&\n          callback({\n            field: { ...tab, type: 'tab' },\n            next,\n            parentRef: currentParentRef,\n            ref: tabRef,\n          })\n        ) {\n          return true\n        }\n\n        traverseFields({\n          callback,\n          fields: tab.fields,\n          fillEmpty,\n          parentRef: currentParentRef,\n          ref: tabRef,\n        })\n      }\n\n      return\n    }\n\n    if (field.type !== 'tab' && (fieldHasSubFields(field) || field.type === 'blocks')) {\n      if ('name' in field && field.name) {\n        currentParentRef = currentRef\n        if (!ref[field.name]) {\n          if (fillEmpty) {\n            if (field.type === 'group') {\n              ref[field.name] = {}\n            } else if (field.type === 'array' || field.type === 'blocks') {\n              if (field.localized) {\n                ref[field.name] = {}\n              } else {\n                ref[field.name] = []\n              }\n            }\n          } else {\n            return\n          }\n        }\n        currentRef = ref[field.name]\n      }\n\n      if (\n        field.type === 'group' &&\n        field.localized &&\n        currentRef &&\n        typeof currentRef === 'object'\n      ) {\n        for (const key in currentRef as Record<string, unknown>) {\n          if (currentRef[key]) {\n            traverseFields({\n              callback,\n              fields: field.fields,\n              fillEmpty,\n              parentRef: currentParentRef,\n              ref: currentRef[key],\n            })\n          }\n        }\n        return\n      }\n\n      if (\n        (field.type === 'blocks' || field.type === 'array') &&\n        currentRef &&\n        typeof currentRef === 'object'\n      ) {\n        if (field.localized) {\n          if (Array.isArray(currentRef)) {\n            return\n          }\n\n          for (const key in currentRef as Record<string, unknown>) {\n            const localeData = currentRef[key]\n            if (!Array.isArray(localeData)) {\n              continue\n            }\n\n            traverseArrayOrBlocksField({\n              callback,\n              data: localeData,\n              field,\n              fillEmpty,\n              parentRef: currentParentRef,\n            })\n          }\n        } else if (Array.isArray(currentRef)) {\n          traverseArrayOrBlocksField({\n            callback,\n            data: currentRef as Record<string, unknown>[],\n            field,\n            fillEmpty,\n            parentRef: currentParentRef,\n          })\n        }\n      } else if (currentRef && typeof currentRef === 'object' && 'fields' in field) {\n        traverseFields({\n          callback,\n          fields: field.fields,\n          fillEmpty,\n          parentRef: currentParentRef,\n          ref: currentRef,\n        })\n      }\n    }\n  })\n}\n"],"names":["fieldHasSubFields","traverseArrayOrBlocksField","callback","data","field","fillEmpty","parentRef","type","traverseFields","fields","blocks","forEach","block","ref","blockType","find","slug","some","skip","next","currentRef","currentParentRef","tab","tabs","tabRef","name","localized","key","Array","isArray","localeData"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/checkDuplicateCollections.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\n\nimport { DuplicateCollection } from '../errors/DuplicateCollection.js'\n\nconst getDuplicates = (arr: string[]) => arr.filter((item, index) => arr.indexOf(item) !== index)\n\nconst checkDuplicateCollections = (collections: SanitizedCollectionConfig[]): void => {\n  const duplicateSlugs = getDuplicates(collections.map((c) => c.slug))\n  if (duplicateSlugs.length > 0) {\n    throw new DuplicateCollection('slug', duplicateSlugs)\n  }\n}\n\nexport default checkDuplicateCollections\n"],"names":["DuplicateCollection","getDuplicates","arr","filter","item","index","indexOf","checkDuplicateCollections","collections","duplicateSlugs","map","c","slug","length"],"mappings":";;;AAEA,SAASA,mBAAmB,QAAQ,mCAAkC;;AAEtE,MAAMC,gBAAgB,CAACC,MAAkBA,IAAIC,MAAM,CAAC,CAACC,MAAMC,QAAUH,IAAII,OAAO,CAACF,UAAUC;AAE3F,MAAME,4BAA4B,CAACC;IACjC,MAAMC,iBAAiBR,cAAcO,YAAYE,GAAG,CAAC,CAACC,IAAMA,EAAEC,IAAI;IAClE,IAAIH,eAAeI,MAAM,GAAG,GAAG;QAC7B,MAAM,2XAAIb,sBAAAA,CAAoB,QAAQS;IACxC;AACF;uCAEeF,0BAAyB","ignoreList":[0]}},
    {"offset": {"line": 1386, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1392, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/realPath.ts"],"sourcesContent":["/*\n  This source code has been taken from https://github.com/vercel/next.js/blob/39498d604c3b25d92a483153fe648a7ee456fbda/packages/next/src/lib/realpath.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\nimport fs from 'fs'\n\nconst isWindows = process.platform === 'win32'\n\n// Interesting learning from this, that fs.realpathSync is 70x slower than fs.realpathSync.native:\n// https://sun0day.github.io/blog/vite/why-vite4_3-is-faster.html#fs-realpathsync-issue\n// https://github.com/nodejs/node/issues/2680\n// However, we can't use fs.realpathSync.native on Windows due to behavior differences.\nexport const realpathSync = isWindows ? fs.realpathSync : fs.realpathSync.native\n"],"names":["fs","isWindows","process","platform","realpathSync","native"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA;;;AACA,OAAOA,QAAQ,KAAI;;AAEnB,MAAMC,YAAYC,QAAQC,QAAQ,KAAK;AAMhC,MAAMC,eAAeH,YAAYD,GAAGI,YAAY,gJAAGJ,UAAAA,CAAGI,YAAY,CAACC,MAAM,CAAA","ignoreList":[0]}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1419, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/isError.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/be87132327ea28acd4bf7af09a401bac2374cb64/packages/next/src/lib/is-error.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport interface ErrorWithCode extends Error {\n  code?: number | string\n}\n\nexport function isError(err: unknown): err is ErrorWithCode {\n  return typeof err === 'object' && err !== null && 'name' in err && 'message' in err\n}\n"],"names":["isError","err"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA,GAMA;;;AAAO,SAASA,QAAQC,GAAY;IAClC,OAAO,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,UAAUA,OAAO,aAAaA;AAClF","ignoreList":[0]}},
    {"offset": {"line": 1439, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1445, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/resolveFrom.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/39498d604c3b25d92a483153fe648a7ee456fbda/packages/next/src/lib/resolve-from.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// source: https://github.com/sindresorhus/resolve-from\nimport { createRequire } from 'module'\nimport path from 'path'\n\nimport { isError } from './isError.js'\nimport { realpathSync } from './realPath.js'\n\nexport const resolveFrom = (fromDirectory: string, moduleId: string, silent?: boolean) => {\n  if (typeof fromDirectory !== 'string') {\n    throw new TypeError(\n      `Expected \\`fromDir\\` to be of type \\`string\\`, got \\`${typeof fromDirectory}\\``,\n    )\n  }\n\n  if (typeof moduleId !== 'string') {\n    throw new TypeError(\n      `Expected \\`moduleId\\` to be of type \\`string\\`, got \\`${typeof moduleId}\\``,\n    )\n  }\n\n  try {\n    fromDirectory = realpathSync(fromDirectory)\n  } catch (error: unknown) {\n    if (isError(error) && error.code === 'ENOENT') {\n      fromDirectory = path.resolve(fromDirectory)\n    } else if (silent) {\n      return\n    } else {\n      throw error\n    }\n  }\n\n  const fromFile = path.join(fromDirectory, 'noop.js')\n\n  const require = createRequire(import.meta.url)\n\n  const Module = require('module')\n\n  const resolveFileName = () => {\n    return Module._resolveFilename(moduleId, {\n      id: fromFile,\n      filename: fromFile,\n      paths: Module._nodeModulePaths(fromDirectory),\n    })\n  }\n\n  if (silent) {\n    try {\n      return resolveFileName()\n    } catch (error) {\n      return\n    }\n  }\n\n  return resolveFileName()\n}\n"],"names":["createRequire","path","isError","realpathSync","resolveFrom","fromDirectory","moduleId","silent","TypeError","error","code","resolve","fromFile","join","require","url","Module","resolveFileName","_resolveFilename","id","filename","paths","_nodeModulePaths"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA,GAEA,uDAAuD;;;;AACvD,SAASA,aAAa,QAAQ,SAAQ;AACtC,OAAOC,UAAU,OAAM;AAGvB,SAASE,YAAY,QAAQ,gBAAe;AAD5C,SAASD,OAAO,QAAQ,eAAc;;;;;;;;;;AAG/B,MAAME,cAAc,CAACC,eAAuBC,UAAkBC;IACnE,IAAI,OAAOF,kBAAkB,UAAU;QACrC,MAAM,IAAIG,UACR,CAAC,qDAAqD,EAAE,OAAOH,cAAc,EAAE,CAAC;IAEpF;IAEA,IAAI,OAAOC,aAAa,UAAU;QAChC,MAAM,IAAIE,UACR,CAAC,sDAAsD,EAAE,OAAOF,SAAS,EAAE,CAAC;IAEhF;IAEA,IAAI;QACFD,gBAAgBF,kZAAAA,EAAaE;IAC/B,EAAE,OAAOI,OAAgB;QACvB,KAAIP,2YAAAA,EAAQO,UAAUA,MAAMC,IAAI,KAAK,UAAU;YAC7CL,kHAAgBJ,UAAAA,CAAKU,OAAO,CAACN;QAC/B,OAAO,IAAIE,QAAQ;YACjB;QACF,OAAO;YACL,MAAME;QACR;IACF;IAEA,MAAMG,6GAAWX,UAAAA,CAAKY,IAAI,CAACR,eAAe;IAE1C,MAAMS,WAAUd,yHAAAA,EAAc,8BAAYe,GAAG;IAE7C,MAAMC,SAASF,QAAQ;IAEvB,MAAMG,kBAAkB;QACtB,OAAOD,OAAOE,gBAAgB,CAACZ,UAAU;YACvCa,IAAIP;YACJQ,UAAUR;YACVS,OAAOL,OAAOM,gBAAgB,CAACjB;QACjC;IACF;IAEA,IAAIE,QAAQ;QACV,IAAI;YACF,OAAOU;QACT,EAAE,OAAOR,OAAO;YACd;QACF;IACF;IAEA,OAAOQ;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 1513, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1519, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/findUp.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\n/**\n * Synchronously walks up parent directories until a condition is met and/or one of the file names within the fileNames array is found.\n */\nexport function findUpSync({\n  condition,\n  dir,\n  fileNames,\n}: {\n  condition?: (dir: string) => boolean | Promise<boolean | string> | string\n  dir: string\n  fileNames?: string[]\n}): null | string {\n  const { root } = path.parse(dir)\n\n  while (true) {\n    if (fileNames?.length) {\n      let found = false\n      for (const fileName of fileNames) {\n        const filePath = path.join(dir, fileName)\n        const exists = pathExistsAndIsAccessibleSync(filePath)\n        if (exists) {\n          if (!condition) {\n            return filePath\n          }\n          found = true\n          break\n        }\n      }\n      if (!found) {\n        dir = path.dirname(dir) // Move up one directory level.\n        continue\n      }\n    }\n    const result = condition(dir)\n    if (result === true) {\n      return dir\n    }\n    if (typeof result === 'string' && result?.length) {\n      return result\n    }\n    if (dir === root) {\n      return null // Reached the root directory without a match.\n    }\n    dir = path.dirname(dir) // Move up one directory level.\n  }\n}\n\n/**\n * Asynchronously walks up parent directories until a condition is met and/or one of the file names within the fileNames array is found.\n */\nexport async function findUp({\n  condition,\n  dir,\n  fileNames,\n}: {\n  condition?: (dir: string) => boolean | Promise<boolean | string> | string\n  dir: string\n  fileNames?: string[]\n}): Promise<null | string> {\n  const { root } = path.parse(dir)\n\n  while (true) {\n    if (fileNames?.length) {\n      let found = false\n      for (const fileName of fileNames) {\n        const filePath = path.resolve(dir, fileName)\n        const exists = await pathExistsAndIsAccessible(filePath)\n        if (exists) {\n          if (!condition) {\n            return filePath\n          }\n          found = true\n          break\n        }\n      }\n      if (!found) {\n        dir = path.dirname(dir) // Move up one directory level.\n        continue\n      }\n    }\n    const result = await condition(dir)\n    if (result === true) {\n      return dir\n    }\n    if (typeof result === 'string' && result?.length) {\n      return result\n    }\n    if (dir === root) {\n      return null // Reached the root directory without a match.\n    }\n    dir = path.dirname(dir) // Move up one directory level.\n  }\n}\n\n// From https://github.com/sindresorhus/path-exists/blob/main/index.js\n// fs.accessSync is preferred over fs.existsSync as it's usually a good idea\n// to check if the process has permission to read/write to a file before doing so.\n// Also see https://github.com/nodejs/node/issues/39960\nexport function pathExistsAndIsAccessibleSync(path: string) {\n  try {\n    fs.accessSync(path)\n    return true\n  } catch {\n    return false\n  }\n}\n\nexport async function pathExistsAndIsAccessible(path: string) {\n  try {\n    await fs.promises.access(path)\n    return true\n  } catch {\n    return false\n  }\n}\n"],"names":["fs","path","findUpSync","condition","dir","fileNames","root","parse","length","found","fileName","filePath","join","exists","pathExistsAndIsAccessibleSync","dirname","result","findUp","resolve","pathExistsAndIsAccessible","accessSync","promises","access"],"mappings":";;;;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;;;AAKhB,SAASC,WAAW,EACzBC,SAAS,EACTC,GAAG,EACHC,SAAS,EAKV;IACC,MAAM,EAAEC,IAAI,EAAE,qGAAGL,UAAAA,CAAKM,KAAK,CAACH;IAE5B,MAAO,KAAM;QACX,IAAIC,WAAWG,QAAQ;YACrB,IAAIC,QAAQ;YACZ,KAAK,MAAMC,YAAYL,UAAW;gBAChC,MAAMM,6GAAWV,UAAAA,CAAKW,IAAI,CAACR,KAAKM;gBAChC,MAAMG,SAASC,8BAA8BH;gBAC7C,IAAIE,QAAQ;oBACV,IAAI,CAACV,WAAW;wBACd,OAAOQ;oBACT;oBACAF,QAAQ;oBACR;gBACF;YACF;YACA,IAAI,CAACA,OAAO;gBACVL,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;gBACvD;YACF;QACF;QACA,MAAMY,SAASb,UAAUC;QACzB,IAAIY,WAAW,MAAM;YACnB,OAAOZ;QACT;QACA,IAAI,OAAOY,WAAW,YAAYA,QAAQR,QAAQ;YAChD,OAAOQ;QACT;QACA,IAAIZ,QAAQE,MAAM;YAChB,OAAO,KAAK,8CAA8C;;QAC5D;QACAF,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;IACzD;AACF;AAKO,eAAea,OAAO,EAC3Bd,SAAS,EACTC,GAAG,EACHC,SAAS,EAKV;IACC,MAAM,EAAEC,IAAI,EAAE,qGAAGL,UAAAA,CAAKM,KAAK,CAACH;IAE5B,MAAO,KAAM;QACX,IAAIC,WAAWG,QAAQ;YACrB,IAAIC,QAAQ;YACZ,KAAK,MAAMC,YAAYL,UAAW;gBAChC,MAAMM,6GAAWV,UAAAA,CAAKiB,OAAO,CAACd,KAAKM;gBACnC,MAAMG,SAAS,MAAMM,0BAA0BR;gBAC/C,IAAIE,QAAQ;oBACV,IAAI,CAACV,WAAW;wBACd,OAAOQ;oBACT;oBACAF,QAAQ;oBACR;gBACF;YACF;YACA,IAAI,CAACA,OAAO;gBACVL,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;gBACvD;YACF;QACF;QACA,MAAMY,SAAS,MAAMb,UAAUC;QAC/B,IAAIY,WAAW,MAAM;YACnB,OAAOZ;QACT;QACA,IAAI,OAAOY,WAAW,YAAYA,QAAQR,QAAQ;YAChD,OAAOQ;QACT;QACA,IAAIZ,QAAQE,MAAM;YAChB,OAAO,KAAK,8CAA8C;;QAC5D;QACAF,wGAAMH,UAAAA,CAAKc,OAAO,CAACX,KAAK,+BAA+B;;IACzD;AACF;AAMO,SAASU,8BAA8Bb,IAAY;IACxD,IAAI;sGACFD,UAAAA,CAAGoB,UAAU,CAACnB;QACd,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAekB,0BAA0BlB,IAAY;IAC1D,IAAI;QACF,oGAAMD,UAAAA,CAAGqB,QAAQ,CAACC,MAAM,CAACrB;QACzB,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF","ignoreList":[0]}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1625, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/getDependencies.ts"],"sourcesContent":["/*\n  This source code has been taken and modified from https://github.com/vercel/next.js/blob/41a80533f900467e1b788bd2673abe2dca20be6a/packages/next/src/lib/has-necessary-dependencies.ts\n\n  License:\n\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { promises as fs } from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport { findUp } from '../findUp.js'\nimport { resolveFrom } from './resolveFrom.js'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nconst payloadPkgDirname = path.resolve(dirname, '../../../') // pkg dir (outside src)\n// if node_modules is in payloadPkgDirname, go to parent dir which contains node_modules\nif (payloadPkgDirname.includes('node_modules')) {\n  payloadPkgDirname.split('node_modules').slice(0, -1)\n}\nconst resolvedCwd = path.resolve(process.cwd())\n\nexport type NecessaryDependencies = {\n  missing: string[]\n  resolved: Map<\n    string,\n    {\n      path: string\n      version: string\n    }\n  >\n}\n\nexport async function getDependencies(\n  baseDir: string,\n  requiredPackages: string[],\n): Promise<NecessaryDependencies> {\n  const resolutions = new Map<\n    string,\n    {\n      path: string\n      version: string\n    }\n  >()\n  const missingPackages: string[] = []\n\n  await Promise.all(\n    requiredPackages.map(async (pkg) => {\n      try {\n        const pkgPath = await fs.realpath(resolveFrom(baseDir, pkg))\n        const pkgDir = path.dirname(pkgPath)\n\n        let packageJsonFilePath = null\n\n        const foundPackageJsonDir = await findUp({\n          dir: pkgDir,\n          fileNames: ['package.json'],\n        })\n\n        if (foundPackageJsonDir) {\n          const resolvedFoundPath = path.resolve(foundPackageJsonDir)\n\n          if (\n            resolvedFoundPath.startsWith(resolvedCwd) ||\n            resolvedFoundPath.startsWith(payloadPkgDirname)\n          ) {\n            // We don't want to match node modules outside the user's project. Checking for both process.cwd and dirname is a reliable way to do this.\n            packageJsonFilePath = resolvedFoundPath\n          }\n        }\n\n        // No need to check if packageJsonFilePath exists - findUp checks that for us\n        if (packageJsonFilePath) {\n          // parse version\n          const packageJson = JSON.parse(await fs.readFile(packageJsonFilePath, 'utf8'))\n          const version = packageJson.version\n\n          resolutions.set(pkg, {\n            path: packageJsonFilePath,\n            version,\n          })\n        } else {\n          return missingPackages.push(pkg)\n        }\n      } catch (_) {\n        return missingPackages.push(pkg)\n      }\n    }),\n  )\n\n  return {\n    missing: missingPackages,\n    resolved: resolutions,\n  }\n}\n"],"names":["promises","fs","path","fileURLToPath","findUp","resolveFrom","filename","url","dirname","payloadPkgDirname","resolve","includes","split","slice","resolvedCwd","process","cwd","getDependencies","baseDir","requiredPackages","resolutions","Map","missingPackages","Promise","all","map","pkg","pkgPath","realpath","pkgDir","packageJsonFilePath","foundPackageJsonDir","dir","fileNames","resolvedFoundPath","startsWith","packageJson","JSON","parse","readFile","version","set","push","_","missing","resolved"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA;;;AAEA,SAASA,YAAYC,EAAE,QAAQ,KAAI;AACnC,OAAOC,UAAU,OAAM;AACvB,SAASC,aAAa,QAAQ,MAAK;AAGnC,SAASE,WAAW,QAAQ,mBAAkB;AAD9C,SAASD,MAAM,QAAQ,eAAc;;;;;;;;;;;AAGrC,MAAME,+GAAWH,gBAAAA,EAAc,8BAAYI,GAAG;AAC9C,MAAMC,2GAAUN,WAAAA,CAAKM,OAAO,CAACF;AAE7B,MAAMG,sHAAoBP,UAAAA,CAAKQ,OAAO,CAACF,SAAS,aAAa,wBAAwB;;AACrF,wFAAwF;AACxF,IAAIC,kBAAkBE,QAAQ,CAAC,iBAAiB;IAC9CF,kBAAkBG,KAAK,CAAC,gBAAgBC,KAAK,CAAC,GAAG,CAAC;AACpD;AACA,MAAMC,gHAAcZ,UAAAA,CAAKQ,OAAO,CAACK,QAAQC,GAAG;AAarC,eAAeC,gBACpBC,OAAe,EACfC,gBAA0B;IAE1B,MAAMC,cAAc,IAAIC;IAOxB,MAAMC,kBAA4B,EAAE;IAEpC,MAAMC,QAAQC,GAAG,CACfL,iBAAiBM,GAAG,CAAC,OAAOC;QAC1B,IAAI;YACF,MAAMC,UAAU,oGAAM1B,WAAAA,CAAG2B,QAAQ,uYAACvB,cAAAA,EAAYa,SAASQ;YACvD,MAAMG,2GAAS3B,UAAAA,CAAKM,OAAO,CAACmB;YAE5B,IAAIG,sBAAsB;YAE1B,MAAMC,sBAAsB,MAAM3B,0XAAAA,EAAO;gBACvC4B,KAAKH;gBACLI,WAAW;oBAAC;iBAAe;YAC7B;YAEA,IAAIF,qBAAqB;gBACvB,MAAMG,sHAAoBhC,UAAAA,CAAKQ,OAAO,CAACqB;gBAEvC,IACEG,kBAAkBC,UAAU,CAACrB,gBAC7BoB,kBAAkBC,UAAU,CAAC1B,oBAC7B;oBACA,0IAA0I;oBAC1IqB,sBAAsBI;gBACxB;YACF;YAEA,6EAA6E;YAC7E,IAAIJ,qBAAqB;gBACvB,gBAAgB;gBAChB,MAAMM,cAAcC,KAAKC,KAAK,CAAC,MAAMrC,yGAAAA,CAAGsC,QAAQ,CAACT,qBAAqB;gBACtE,MAAMU,UAAUJ,YAAYI,OAAO;gBAEnCpB,YAAYqB,GAAG,CAACf,KAAK;oBACnBxB,MAAM4B;oBACNU;gBACF;YACF,OAAO;gBACL,OAAOlB,gBAAgBoB,IAAI,CAAChB;YAC9B;QACF,EAAE,OAAOiB,GAAG;YACV,OAAOrB,gBAAgBoB,IAAI,CAAChB;QAC9B;IACF;IAGF,OAAO;QACLkB,SAAStB;QACTuB,UAAUzB;IACZ;AACF","ignoreList":[0]}},
    {"offset": {"line": 1708, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1714, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/versionUtils.ts"],"sourcesContent":["import type { CustomVersionParser } from './dependencyChecker.js'\n\nexport function parseVersion(version: string): { parts: number[]; preReleases: string[] } {\n  const [mainVersion, ...preReleases] = version.split('-')\n  const parts = mainVersion.split('.').map(Number)\n  return { parts, preReleases }\n}\n\nfunction extractNumbers(str: string): number[] {\n  const matches = str.match(/\\d+/g) || []\n  return matches.map(Number)\n}\n\nfunction comparePreRelease(v1: string, v2: string): number {\n  const num1 = extractNumbers(v1)\n  const num2 = extractNumbers(v2)\n\n  for (let i = 0; i < Math.max(num1.length, num2.length); i++) {\n    if ((num1[i] || 0) < (num2[i] || 0)) {\n      return -1\n    }\n    if ((num1[i] || 0) > (num2[i] || 0)) {\n      return 1\n    }\n  }\n\n  // If numeric parts are equal, compare the whole string\n  if (v1 < v2) {\n    return -1\n  }\n  if (v1 > v2) {\n    return 1\n  }\n  return 0\n}\n\n/**\n * Compares two semantic version strings, including handling pre-release identifiers.\n *\n * This function first compares the major, minor, and patch components as integers.\n * If these components are equal, it then moves on to compare pre-release versions.\n * Pre-release versions are compared first by extracting and comparing any numerical values.\n * If numerical values are equal, it compares the whole pre-release string lexicographically.\n *\n * @param {string} compare - The first version string to compare.\n * @param {string} to - The second version string to compare.\n * @param {function} [customVersionParser] - An optional function to parse version strings into parts and pre-releases.\n * @returns {string} - Returns greater if compare is greater than to, lower if compare is less than to, and equal if they are equal.\n */\nexport function compareVersions(\n  compare: string,\n  to: string,\n  customVersionParser?: CustomVersionParser,\n): 'equal' | 'greater' | 'lower' {\n  const { parts: parts1, preReleases: preReleases1 } = customVersionParser\n    ? customVersionParser(compare)\n    : parseVersion(compare)\n  const { parts: parts2, preReleases: preReleases2 } = customVersionParser\n    ? customVersionParser(to)\n    : parseVersion(to)\n\n  // Compare main version parts\n  for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {\n    if ((parts1[i] || 0) > (parts2[i] || 0)) {\n      return 'greater'\n    }\n    if ((parts1[i] || 0) < (parts2[i] || 0)) {\n      return 'lower'\n    }\n  }\n\n  // Compare pre-release parts if main versions are equal\n  if (preReleases1?.length || preReleases2?.length) {\n    for (let i = 0; i < Math.max(preReleases1.length, preReleases2.length); i++) {\n      if (!preReleases1[i]) {\n        return 'greater'\n      }\n      if (!preReleases2[i]) {\n        return 'lower'\n      }\n\n      const result = comparePreRelease(preReleases1[i], preReleases2[i])\n      if (result !== 0) {\n        return result === 1 ? 'greater' : 'lower'\n      }\n      // Equal => continue for loop to check for next pre-release part\n    }\n  }\n\n  return 'equal'\n}\n"],"names":["parseVersion","version","mainVersion","preReleases","split","parts","map","Number","extractNumbers","str","matches","match","comparePreRelease","v1","v2","num1","num2","i","Math","max","length","compareVersions","compare","to","customVersionParser","parts1","preReleases1","parts2","preReleases2","result"],"mappings":";;;;AAEO,SAASA,aAAaC,OAAe;IAC1C,MAAM,CAACC,aAAa,GAAGC,YAAY,GAAGF,QAAQG,KAAK,CAAC;IACpD,MAAMC,QAAQH,YAAYE,KAAK,CAAC,KAAKE,GAAG,CAACC;IACzC,OAAO;QAAEF;QAAOF;IAAY;AAC9B;AAEA,SAASK,eAAeC,GAAW;IACjC,MAAMC,UAAUD,IAAIE,KAAK,CAAC,WAAW,EAAE;IACvC,OAAOD,QAAQJ,GAAG,CAACC;AACrB;AAEA,SAASK,kBAAkBC,EAAU,EAAEC,EAAU;IAC/C,MAAMC,OAAOP,eAAeK;IAC5B,MAAMG,OAAOR,eAAeM;IAE5B,IAAK,IAAIG,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACJ,KAAKK,MAAM,EAAEJ,KAAKI,MAAM,GAAGH,IAAK;QAC3D,IAAKF,CAAAA,IAAI,CAACE,EAAE,IAAI,CAAA,IAAMD,CAAAA,IAAI,CAACC,EAAE,IAAI,CAAA,GAAI;YACnC,OAAO,CAAC;QACV;QACA,IAAKF,CAAAA,IAAI,CAACE,EAAE,IAAI,CAAA,IAAMD,CAAAA,IAAI,CAACC,EAAE,IAAI,CAAA,GAAI;YACnC,OAAO;QACT;IACF;IAEA,uDAAuD;IACvD,IAAIJ,KAAKC,IAAI;QACX,OAAO,CAAC;IACV;IACA,IAAID,KAAKC,IAAI;QACX,OAAO;IACT;IACA,OAAO;AACT;AAeO,SAASO,gBACdC,OAAe,EACfC,EAAU,EACVC,mBAAyC;IAEzC,MAAM,EAAEnB,OAAOoB,MAAM,EAAEtB,aAAauB,YAAY,EAAE,GAAGF,sBACjDA,oBAAoBF,WACpBtB,aAAasB;IACjB,MAAM,EAAEjB,OAAOsB,MAAM,EAAExB,aAAayB,YAAY,EAAE,GAAGJ,sBACjDA,oBAAoBD,MACpBvB,aAAauB;IAEjB,6BAA6B;IAC7B,IAAK,IAAIN,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACM,OAAOL,MAAM,EAAEO,OAAOP,MAAM,GAAGH,IAAK;QAC/D,IAAKQ,CAAAA,MAAM,CAACR,EAAE,IAAI,CAAA,IAAMU,CAAAA,MAAM,CAACV,EAAE,IAAI,CAAA,GAAI;YACvC,OAAO;QACT;QACA,IAAKQ,CAAAA,MAAM,CAACR,EAAE,IAAI,CAAA,IAAMU,CAAAA,MAAM,CAACV,EAAE,IAAI,CAAA,GAAI;YACvC,OAAO;QACT;IACF;IAEA,uDAAuD;IACvD,IAAIS,cAAcN,UAAUQ,cAAcR,QAAQ;QAChD,IAAK,IAAIH,IAAI,GAAGA,IAAIC,KAAKC,GAAG,CAACO,aAAaN,MAAM,EAAEQ,aAAaR,MAAM,GAAGH,IAAK;YAC3E,IAAI,CAACS,YAAY,CAACT,EAAE,EAAE;gBACpB,OAAO;YACT;YACA,IAAI,CAACW,YAAY,CAACX,EAAE,EAAE;gBACpB,OAAO;YACT;YAEA,MAAMY,SAASjB,kBAAkBc,YAAY,CAACT,EAAE,EAAEW,YAAY,CAACX,EAAE;YACjE,IAAIY,WAAW,GAAG;gBAChB,OAAOA,WAAW,IAAI,YAAY;YACpC;QACA,gEAAgE;QAClE;IACF;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1780, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1786, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/dependencies/dependencyChecker.ts"],"sourcesContent":["import path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport { getDependencies } from '../../index.js'\nimport { compareVersions } from './versionUtils.js'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nexport type CustomVersionParser = (version: string) => { parts: number[]; preReleases: string[] }\n\nexport type DependencyCheckerArgs = {\n  /**\n   * Define dependency groups to ensure that all dependencies within that group are on the same version, and that no dependencies in that group with different versions are found\n   */\n  dependencyGroups?: {\n    dependencies: string[]\n    /**\n     * Name of the dependency group to be displayed in the error message\n     */\n    name: string\n    targetVersion?: string\n    targetVersionDependency?: string\n  }[]\n  /**\n   * Dependency package names keyed to their required versions. Supports >= (greater or equal than version) as a prefix, or no prefix for the exact version\n   */\n  dependencyVersions?: {\n    [dependency: string]: {\n      customVersionParser?: CustomVersionParser\n      required?: boolean\n      version?: string\n    }\n  }\n}\n\nexport async function checkDependencies({\n  dependencyGroups,\n  dependencyVersions,\n}: DependencyCheckerArgs): Promise<void> {\n  if (dependencyGroups?.length) {\n    for (const dependencyGroup of dependencyGroups) {\n      const resolvedDependencies = await getDependencies(dirname, dependencyGroup.dependencies)\n\n      // Go through each resolved dependency. If any dependency has a mismatching version, throw an error\n      const foundVersions: {\n        [version: string]: string\n      } = {}\n      for (const [_pkg, { version }] of resolvedDependencies.resolved) {\n        if (!Object.keys(foundVersions).includes(version)) {\n          foundVersions[version] = _pkg\n        }\n      }\n      if (Object.keys(foundVersions).length > 1) {\n        const targetVersion =\n          dependencyGroup.targetVersion ??\n          resolvedDependencies.resolved.get(dependencyGroup.targetVersionDependency)?.version\n        if (targetVersion) {\n          const formattedVersionsWithPackageNameString = Object.entries(foundVersions)\n            .filter(([version]) => version !== targetVersion)\n            .map(([version, pkg]) => `${pkg}@${version} (Please change this to ${targetVersion})`)\n            .join(', ')\n          throw new Error(\n            `Mismatching \"${dependencyGroup.name}\" dependency versions found: ${formattedVersionsWithPackageNameString}. All \"${dependencyGroup.name}\" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all \"${dependencyGroup.name}\" packages have the same version.`,\n          )\n        } else {\n          const formattedVersionsWithPackageNameString = Object.entries(foundVersions)\n            .map(([version, pkg]) => `${pkg}@${version}`)\n            .join(', ')\n          throw new Error(\n            `Mismatching \"${dependencyGroup.name}\" dependency versions found: ${formattedVersionsWithPackageNameString}. All \"${dependencyGroup.name}\" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all \"${dependencyGroup.name}\" packages have the same version.`,\n          )\n        }\n      }\n    }\n  }\n\n  if (dependencyVersions && Object.keys(dependencyVersions).length) {\n    const resolvedDependencies = await getDependencies(dirname, Object.keys(dependencyVersions))\n    for (const [dependency, settings] of Object.entries(dependencyVersions)) {\n      const resolvedDependency = resolvedDependencies.resolved.get(dependency)\n      if (!resolvedDependency) {\n        if (!settings.required) {\n          continue\n        }\n        throw new Error(`Dependency ${dependency} not found. Please ensure it is installed.`)\n      }\n\n      if (settings.version) {\n        const settingsVersionToCheck = settings.version.startsWith('>=')\n          ? settings.version.slice(2)\n          : settings.version\n\n        const versionCompareResult = compareVersions(\n          resolvedDependency.version,\n          settingsVersionToCheck,\n          settings.customVersionParser,\n        )\n\n        if (settings.version.startsWith('>=')) {\n          if (versionCompareResult === 'lower') {\n            throw new Error(\n              `Dependency ${dependency} is on version ${resolvedDependency.version}, but ${settings.version} or greater is required. Please update this dependency.`,\n            )\n          }\n        } else if (versionCompareResult === 'lower' || versionCompareResult === 'greater') {\n          throw new Error(\n            `Dependency ${dependency} is on version ${resolvedDependency.version}, but ${settings.version} is required. Please update this dependency.`,\n          )\n        }\n      }\n    }\n  }\n}\n"],"names":["path","fileURLToPath","getDependencies","compareVersions","filename","url","dirname","checkDependencies","dependencyGroups","dependencyVersions","length","dependencyGroup","resolvedDependencies","dependencies","foundVersions","_pkg","version","resolved","Object","keys","includes","targetVersion","get","targetVersionDependency","formattedVersionsWithPackageNameString","entries","filter","map","pkg","join","Error","name","dependency","settings","resolvedDependency","required","settingsVersionToCheck","startsWith","slice","versionCompareResult","customVersionParser"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1851, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1857, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getCollectionIDFieldTypes.ts"],"sourcesContent":["import type { SanitizedConfig } from '../config/types.js'\n\n/**\n *  While the default ID is determined by the db adapter, it can still differ for a collection if they\n *  define a custom ID field. This builds a map of collection slugs to their ID field type.\n * @param defaultIDType as defined by the database adapter\n */\nexport function getCollectionIDFieldTypes({\n  config,\n  defaultIDType,\n}: {\n  config: SanitizedConfig\n  defaultIDType: 'number' | 'text'\n}): { [key: string]: 'number' | 'string' } {\n  return config.collections.reduce((acc, collection) => {\n    const customCollectionIdField = collection.fields.find(\n      (field) => 'name' in field && field.name === 'id',\n    )\n\n    acc[collection.slug] = defaultIDType === 'text' ? 'string' : 'number'\n\n    if (customCollectionIdField) {\n      acc[collection.slug] = customCollectionIdField.type === 'number' ? 'number' : 'string'\n    }\n\n    return acc\n  }, {})\n}\n"],"names":["getCollectionIDFieldTypes","config","defaultIDType","collections","reduce","acc","collection","customCollectionIdField","fields","find","field","name","slug","type"],"mappings":"AAEA;;;;CAIC,GACD;;;AAAO,SAASA,0BAA0B,EACxCC,MAAM,EACNC,aAAa,EAId;IACC,OAAOD,OAAOE,WAAW,CAACC,MAAM,CAAC,CAACC,KAAKC;QACrC,MAAMC,0BAA0BD,WAAWE,MAAM,CAACC,IAAI,CACpD,CAACC,QAAU,UAAUA,SAASA,MAAMC,IAAI,KAAK;QAG/CN,GAAG,CAACC,WAAWM,IAAI,CAAC,GAAGV,kBAAkB,SAAS,WAAW;QAE7D,IAAIK,yBAAyB;YAC3BF,GAAG,CAACC,WAAWM,IAAI,CAAC,GAAGL,wBAAwBM,IAAI,KAAK,WAAW,WAAW;QAChF;QAEA,OAAOR;IACT,GAAG,CAAC;AACN","ignoreList":[0]}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1880, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/configToJSONSchema.ts"],"sourcesContent":["import type { JSONSchema4, JSONSchema4TypeName } from 'json-schema'\n\nimport pluralize from 'pluralize'\nconst { singular } = pluralize\n\nimport type { I18n } from '@payloadcms/translations'\n\nimport type { Auth } from '../auth/types.js'\nimport type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedConfig } from '../config/types.js'\nimport type { FieldAffectingData, FlattenedField, Option } from '../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\n\nimport { MissingEditorProp } from '../errors/MissingEditorProp.js'\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { generateJobsJSONSchemas } from '../queues/config/generateJobsJSONSchemas.js'\nimport { deepCopyObject } from './deepCopyObject.js'\nimport { toWords } from './formatLabels.js'\nimport { getCollectionIDFieldTypes } from './getCollectionIDFieldTypes.js'\n\nconst fieldIsRequired = (field: FlattenedField) => {\n  const isConditional = Boolean(field?.admin && field?.admin?.condition)\n  if (isConditional) {\n    return false\n  }\n\n  const isMarkedRequired = 'required' in field && field.required === true\n  if (fieldAffectsData(field) && isMarkedRequired) {\n    return true\n  }\n\n  // if any subfields are required, this field is required\n  if ('fields' in field && field.type !== 'array') {\n    return field.flattenedFields.some((subField) => fieldIsRequired(subField))\n  }\n\n  return false\n}\n\nfunction buildOptionEnums(options: Option[]): string[] {\n  return options.map((option) => {\n    if (typeof option === 'object' && 'value' in option) {\n      return option.value\n    }\n\n    return option\n  })\n}\n\nfunction generateEntitySchemas(\n  entities: (SanitizedCollectionConfig | SanitizedGlobalConfig)[],\n): JSONSchema4 {\n  const properties = [...entities].reduce((acc, { slug }) => {\n    acc[slug] = {\n      $ref: `#/definitions/${slug}`,\n    }\n\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateEntitySelectSchemas(\n  entities: (SanitizedCollectionConfig | SanitizedGlobalConfig)[],\n): JSONSchema4 {\n  const properties = [...entities].reduce((acc, { slug }) => {\n    acc[slug] = {\n      $ref: `#/definitions/${slug}_select`,\n    }\n\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateCollectionJoinsSchemas(collections: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties = [...collections].reduce<Record<string, JSONSchema4>>(\n    (acc, { slug, joins }) => {\n      const schema = {\n        type: 'object',\n        additionalProperties: false,\n        properties: {},\n        required: [],\n      } satisfies JSONSchema4\n\n      for (const collectionSlug in joins) {\n        for (const join of joins[collectionSlug]) {\n          schema.properties[join.joinPath] = {\n            type: 'string',\n            enum: [collectionSlug],\n          }\n          schema.required.push(join.joinPath)\n        }\n      }\n\n      if (Object.keys(schema.properties).length > 0) {\n        acc[slug] = schema\n      }\n\n      return acc\n    },\n    {},\n  )\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\nfunction generateLocaleEntitySchemas(localization: SanitizedConfig['localization']): JSONSchema4 {\n  if (localization && 'locales' in localization && localization?.locales) {\n    const localesFromConfig = localization?.locales\n\n    const locales = [...localesFromConfig].map((locale) => {\n      return locale.code\n    }, [])\n\n    return {\n      type: 'string',\n      enum: locales,\n    }\n  }\n\n  return {\n    type: 'null',\n  }\n}\n\nfunction generateAuthEntitySchemas(entities: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties: JSONSchema4[] = [...entities]\n    .filter(({ auth }) => Boolean(auth))\n    .map(({ slug }) => {\n      return {\n        allOf: [\n          { $ref: `#/definitions/${slug}` },\n          {\n            type: 'object',\n            additionalProperties: false,\n            properties: {\n              collection: { type: 'string', enum: [slug] },\n            },\n            required: ['collection'],\n          },\n        ],\n      }\n    }, {})\n\n  return {\n    oneOf: properties,\n  }\n}\n\n/**\n * Generates the JSON Schema for database configuration\n *\n * @example { db: idType: string }\n */\nfunction generateDbEntitySchema(config: SanitizedConfig): JSONSchema4 {\n  const defaultIDType: JSONSchema4 =\n    config.db?.defaultIDType === 'number' ? { type: 'number' } : { type: 'string' }\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties: {\n      defaultIDType,\n    },\n    required: ['defaultIDType'],\n  }\n}\n\n/**\n * Returns a JSON Schema Type with 'null' added if the field is not required.\n */\nexport function withNullableJSONSchemaType(\n  fieldType: JSONSchema4TypeName,\n  isRequired: boolean,\n): JSONSchema4TypeName | JSONSchema4TypeName[] {\n  const fieldTypes = [fieldType]\n  if (isRequired) {\n    return fieldType\n  }\n  fieldTypes.push('null')\n  return fieldTypes\n}\n\nfunction entityOrFieldToJsDocs({\n  config,\n  entity,\n  i18n,\n}: {\n  config: SanitizedConfig\n  entity: FlattenedField | SanitizedCollectionConfig | SanitizedGlobalConfig\n  i18n?: I18n\n}): string | undefined {\n  let description: string | undefined = undefined\n  if (entity?.admin?.description) {\n    if (typeof entity?.admin?.description === 'string') {\n      description = entity?.admin?.description\n    } else if (typeof entity?.admin?.description === 'object') {\n      const defaultLocale = config?.localization ? config?.localization?.defaultLocale : undefined\n      if (entity?.admin?.description?.en) {\n        description = entity?.admin?.description?.en\n      } else if (entity?.admin?.description?.[defaultLocale]) {\n        description = entity?.admin?.description?.[defaultLocale]\n      }\n    } else if (typeof entity?.admin?.description === 'function' && i18n) {\n      description = entity?.admin?.description(i18n)\n    }\n  }\n  return description\n}\nexport function fieldsToJSONSchema(\n  /**\n   * Used for relationship fields, to determine whether to use a string or number type for the ID.\n   * While there is a default ID field type set by the db adapter, they can differ on a collection-level\n   * if they have custom ID fields.\n   */\n  collectionIDFieldTypes: { [key: string]: 'number' | 'string' },\n  fields: FlattenedField[],\n  /**\n   * Allows you to define new top-level interfaces that can be re-used in the output schema.\n   */\n  interfaceNameDefinitions: Map<string, JSONSchema4>,\n  config?: SanitizedConfig,\n  i18n?: I18n,\n): {\n  properties: {\n    [k: string]: JSONSchema4\n  }\n  required: string[]\n} {\n  const requiredFieldNames = new Set<string>()\n\n  return {\n    properties: Object.fromEntries(\n      fields.reduce((fieldSchemas, field) => {\n        const isRequired = fieldAffectsData(field) && fieldIsRequired(field)\n        if (isRequired) {\n          requiredFieldNames.add(field.name)\n        }\n\n        const fieldDescription = entityOrFieldToJsDocs({ config, entity: field, i18n })\n        const baseFieldSchema: JSONSchema4 = {}\n        if (fieldDescription) {\n          baseFieldSchema.description = fieldDescription\n        }\n\n        let fieldSchema: JSONSchema4\n\n        switch (field.type) {\n          case 'array': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: {\n                type: 'object',\n                additionalProperties: false,\n                ...fieldsToJSONSchema(\n                  collectionIDFieldTypes,\n                  field.flattenedFields,\n                  interfaceNameDefinitions,\n                  config,\n                  i18n,\n                ),\n              },\n            }\n\n            if (field.interfaceName) {\n              interfaceNameDefinitions.set(field.interfaceName, fieldSchema)\n\n              fieldSchema = {\n                $ref: `#/definitions/${field.interfaceName}`,\n              }\n            }\n            break\n          }\n          case 'blocks': {\n            // Check for a case where no blocks are provided.\n            // We need to generate an empty array for this case, note that JSON schema 4 doesn't support empty arrays\n            // so the best we can get is `unknown[]`\n            const hasBlocks = Boolean(field.blocks.length)\n\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: hasBlocks\n                ? {\n                    oneOf: field.blocks.map((block) => {\n                      const blockFieldSchemas = fieldsToJSONSchema(\n                        collectionIDFieldTypes,\n                        block.flattenedFields,\n                        interfaceNameDefinitions,\n                        config,\n                        i18n,\n                      )\n\n                      const blockSchema: JSONSchema4 = {\n                        type: 'object',\n                        additionalProperties: false,\n                        properties: {\n                          ...blockFieldSchemas.properties,\n                          blockType: {\n                            const: block.slug,\n                          },\n                        },\n                        required: ['blockType', ...blockFieldSchemas.required],\n                      }\n\n                      if (block.interfaceName) {\n                        interfaceNameDefinitions.set(block.interfaceName, blockSchema)\n\n                        return {\n                          $ref: `#/definitions/${block.interfaceName}`,\n                        }\n                      }\n\n                      return blockSchema\n                    }),\n                  }\n                : {},\n            }\n            break\n          }\n          case 'checkbox': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('boolean', isRequired),\n            }\n            break\n          }\n          case 'code':\n          case 'date':\n          case 'email':\n          case 'textarea': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('string', isRequired),\n            }\n            break\n          }\n\n          case 'group':\n          case 'tab': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: 'object',\n              additionalProperties: false,\n              ...fieldsToJSONSchema(\n                collectionIDFieldTypes,\n                field.flattenedFields,\n                interfaceNameDefinitions,\n                config,\n                i18n,\n              ),\n            }\n\n            if (field.interfaceName) {\n              interfaceNameDefinitions.set(field.interfaceName, fieldSchema)\n\n              fieldSchema = { $ref: `#/definitions/${field.interfaceName}` }\n            }\n            break\n          }\n\n          case 'join': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('object', false),\n              additionalProperties: false,\n              properties: {\n                docs: {\n                  type: withNullableJSONSchemaType('array', false),\n                  items: {\n                    oneOf: [\n                      {\n                        type: collectionIDFieldTypes[field.collection],\n                      },\n                      {\n                        $ref: `#/definitions/${field.collection}`,\n                      },\n                    ],\n                  },\n                },\n                hasNextPage: { type: withNullableJSONSchemaType('boolean', false) },\n              },\n            }\n            break\n          }\n\n          case 'json': {\n            fieldSchema = field.jsonSchema?.schema || {\n              ...baseFieldSchema,\n              type: ['object', 'array', 'string', 'number', 'boolean', 'null'],\n            }\n            break\n          }\n\n          case 'number': {\n            if (field.hasMany === true) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: { type: 'number' },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('number', isRequired),\n              }\n            }\n            break\n          }\n\n          case 'point': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('array', isRequired),\n              items: [\n                {\n                  type: 'number',\n                },\n                {\n                  type: 'number',\n                },\n              ],\n              maxItems: 2,\n              minItems: 2,\n            }\n            break\n          }\n          case 'radio': {\n            fieldSchema = {\n              ...baseFieldSchema,\n              type: withNullableJSONSchemaType('string', isRequired),\n              enum: buildOptionEnums(field.options),\n            }\n\n            break\n          }\n\n          case 'relationship':\n          case 'upload': {\n            if (Array.isArray(field.relationTo)) {\n              if (field.hasMany) {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  type: withNullableJSONSchemaType('array', isRequired),\n                  items: {\n                    oneOf: field.relationTo.map((relation) => {\n                      return {\n                        type: 'object',\n                        additionalProperties: false,\n                        properties: {\n                          relationTo: {\n                            const: relation,\n                          },\n                          value: {\n                            oneOf: [\n                              {\n                                type: collectionIDFieldTypes[relation],\n                              },\n                              {\n                                $ref: `#/definitions/${relation}`,\n                              },\n                            ],\n                          },\n                        },\n                        required: ['value', 'relationTo'],\n                      }\n                    }),\n                  },\n                }\n              } else {\n                fieldSchema = {\n                  ...baseFieldSchema,\n                  oneOf: field.relationTo.map((relation) => {\n                    return {\n                      type: withNullableJSONSchemaType('object', isRequired),\n                      additionalProperties: false,\n                      properties: {\n                        relationTo: {\n                          const: relation,\n                        },\n                        value: {\n                          oneOf: [\n                            {\n                              type: collectionIDFieldTypes[relation],\n                            },\n                            {\n                              $ref: `#/definitions/${relation}`,\n                            },\n                          ],\n                        },\n                      },\n                      required: ['value', 'relationTo'],\n                    }\n                  }),\n                }\n              }\n            } else if (field.hasMany) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: {\n                  oneOf: [\n                    {\n                      type: collectionIDFieldTypes[field.relationTo],\n                    },\n                    {\n                      $ref: `#/definitions/${field.relationTo}`,\n                    },\n                  ],\n                },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                oneOf: [\n                  {\n                    type: withNullableJSONSchemaType(\n                      collectionIDFieldTypes[field.relationTo],\n                      isRequired,\n                    ),\n                  },\n                  { $ref: `#/definitions/${field.relationTo}` },\n                ],\n              }\n            }\n\n            break\n          }\n\n          case 'richText': {\n            if (!field?.editor) {\n              throw new MissingEditorProp(field) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n            }\n            if (typeof field.editor === 'function') {\n              throw new Error('Attempted to access unsanitized rich text editor.')\n            }\n            if (field.editor.outputSchema) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                ...field.editor.outputSchema({\n                  collectionIDFieldTypes,\n                  config,\n                  field,\n                  i18n,\n                  interfaceNameDefinitions,\n                  isRequired,\n                }),\n              }\n            } else {\n              // Maintain backwards compatibility with existing rich text editors\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: {\n                  type: 'object',\n                },\n              }\n            }\n\n            break\n          }\n          case 'select': {\n            const optionEnums = buildOptionEnums(field.options)\n\n            if (field.hasMany) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: {\n                  type: 'string',\n                },\n              }\n              if (optionEnums?.length) {\n                ;(fieldSchema.items as JSONSchema4).enum = optionEnums\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('string', isRequired),\n              }\n              if (optionEnums?.length) {\n                fieldSchema.enum = optionEnums\n              }\n            }\n\n            break\n          }\n\n          case 'text':\n            if (field.hasMany === true) {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('array', isRequired),\n                items: { type: 'string' },\n              }\n            } else {\n              fieldSchema = {\n                ...baseFieldSchema,\n                type: withNullableJSONSchemaType('string', isRequired),\n              }\n            }\n            break\n\n          default: {\n            break\n          }\n        }\n\n        if ('typescriptSchema' in field && field?.typescriptSchema?.length) {\n          for (const schema of field.typescriptSchema) {\n            fieldSchema = schema({ jsonSchema: fieldSchema })\n          }\n        }\n\n        if (fieldSchema && fieldAffectsData(field)) {\n          fieldSchemas.set(field.name, fieldSchema)\n        }\n\n        return fieldSchemas\n      }, new Map<string, JSONSchema4>()),\n    ),\n    required: Array.from(requiredFieldNames),\n  }\n}\n\n// This function is part of the public API and is exported through payload/utilities\nexport function entityToJSONSchema(\n  config: SanitizedConfig,\n  incomingEntity: SanitizedCollectionConfig | SanitizedGlobalConfig,\n  interfaceNameDefinitions: Map<string, JSONSchema4>,\n  defaultIDType: 'number' | 'text',\n  collectionIDFieldTypes?: { [key: string]: 'number' | 'string' },\n  i18n?: I18n,\n): JSONSchema4 {\n  if (!collectionIDFieldTypes) {\n    collectionIDFieldTypes = getCollectionIDFieldTypes({ config, defaultIDType })\n  }\n\n  const entity: SanitizedCollectionConfig | SanitizedGlobalConfig = deepCopyObject(incomingEntity)\n  const title = entity.typescript?.interface\n    ? entity.typescript.interface\n    : singular(toWords(entity.slug, true))\n\n  const idField: FieldAffectingData = { name: 'id', type: defaultIDType as 'text', required: true }\n  const customIdField = entity.flattenedFields.find(\n    (field) => field.name === 'id',\n  ) as FieldAffectingData\n\n  if (customIdField && customIdField.type !== 'group' && customIdField.type !== 'tab') {\n    customIdField.required = true\n  } else {\n    entity.flattenedFields.unshift(idField)\n  }\n\n  // mark timestamp fields required\n  if ('timestamps' in entity && entity.timestamps !== false) {\n    entity.flattenedFields = entity.flattenedFields.map((field) => {\n      if (field.name === 'createdAt' || field.name === 'updatedAt') {\n        return {\n          ...field,\n          required: true,\n        }\n      }\n      return field\n    })\n  }\n\n  if (\n    'auth' in entity &&\n    entity.auth &&\n    (!entity.auth?.disableLocalStrategy ||\n      (typeof entity.auth?.disableLocalStrategy === 'object' &&\n        entity.auth.disableLocalStrategy.enableFields))\n  ) {\n    entity.flattenedFields.push({\n      name: 'password',\n      type: 'text',\n    })\n  }\n\n  const jsonSchema: JSONSchema4 = {\n    type: 'object',\n    additionalProperties: false,\n    title,\n    ...fieldsToJSONSchema(\n      collectionIDFieldTypes,\n      entity.flattenedFields,\n      interfaceNameDefinitions,\n      config,\n      i18n,\n    ),\n  }\n\n  const entityDescription = entityOrFieldToJsDocs({ config, entity, i18n })\n\n  if (entityDescription) {\n    jsonSchema.description = entityDescription\n  }\n\n  return jsonSchema\n}\n\nexport function fieldsToSelectJSONSchema({\n  fields,\n  interfaceNameDefinitions,\n}: {\n  fields: FlattenedField[]\n  interfaceNameDefinitions: Map<string, JSONSchema4>\n}): JSONSchema4 {\n  const schema: JSONSchema4 = {\n    type: 'object',\n    additionalProperties: false,\n    properties: {},\n  }\n\n  for (const field of fields) {\n    switch (field.type) {\n      case 'array':\n      case 'group':\n      case 'tab': {\n        let fieldSchema: JSONSchema4 = fieldsToSelectJSONSchema({\n          fields: field.flattenedFields,\n          interfaceNameDefinitions,\n        })\n\n        if (field.interfaceName) {\n          const definition = `${field.interfaceName}_select`\n          interfaceNameDefinitions.set(definition, fieldSchema)\n\n          fieldSchema = {\n            $ref: `#/definitions/${definition}`,\n          }\n        }\n\n        schema.properties[field.name] = {\n          oneOf: [\n            {\n              type: 'boolean',\n            },\n            fieldSchema,\n          ],\n        }\n\n        break\n      }\n\n      case 'blocks': {\n        const blocksSchema: JSONSchema4 = {\n          type: 'object',\n          additionalProperties: false,\n          properties: {},\n        }\n\n        for (const block of field.blocks) {\n          let blockSchema = fieldsToSelectJSONSchema({\n            fields: block.flattenedFields,\n            interfaceNameDefinitions,\n          })\n\n          if (block.interfaceName) {\n            const definition = `${block.interfaceName}_select`\n            interfaceNameDefinitions.set(definition, blockSchema)\n            blockSchema = {\n              $ref: `#/definitions/${definition}`,\n            }\n          }\n\n          blocksSchema.properties[block.slug] = {\n            oneOf: [\n              {\n                type: 'boolean',\n              },\n              blockSchema,\n            ],\n          }\n        }\n\n        schema.properties[field.name] = {\n          oneOf: [\n            {\n              type: 'boolean',\n            },\n            blocksSchema,\n          ],\n        }\n\n        break\n      }\n\n      default:\n        schema.properties[field.name] = {\n          type: 'boolean',\n        }\n        break\n    }\n  }\n\n  return schema\n}\n\nconst fieldType: JSONSchema4 = {\n  type: 'string',\n  required: false,\n}\nconst generateAuthFieldTypes = ({\n  type,\n  loginWithUsername,\n}: {\n  loginWithUsername: Auth['loginWithUsername']\n  type: 'forgotOrUnlock' | 'login' | 'register'\n}): JSONSchema4 => {\n  if (loginWithUsername) {\n    switch (type) {\n      case 'forgotOrUnlock': {\n        if (loginWithUsername.allowEmailLogin) {\n          // allow email or username for unlock/forgot-password\n          return {\n            additionalProperties: false,\n            oneOf: [\n              {\n                additionalProperties: false,\n                properties: { email: fieldType },\n                required: ['email'],\n              },\n              {\n                additionalProperties: false,\n                properties: { username: fieldType },\n                required: ['username'],\n              },\n            ],\n          }\n        } else {\n          // allow only username for unlock/forgot-password\n          return {\n            additionalProperties: false,\n            properties: { username: fieldType },\n            required: ['username'],\n          }\n        }\n      }\n\n      case 'login': {\n        if (loginWithUsername.allowEmailLogin) {\n          // allow username or email and require password for login\n          return {\n            additionalProperties: false,\n            oneOf: [\n              {\n                additionalProperties: false,\n                properties: { email: fieldType, password: fieldType },\n                required: ['email', 'password'],\n              },\n              {\n                additionalProperties: false,\n                properties: { password: fieldType, username: fieldType },\n                required: ['username', 'password'],\n              },\n            ],\n          }\n        } else {\n          // allow only username and password for login\n          return {\n            additionalProperties: false,\n            properties: {\n              password: fieldType,\n              username: fieldType,\n            },\n            required: ['username', 'password'],\n          }\n        }\n      }\n\n      case 'register': {\n        const requiredFields: ('email' | 'password' | 'username')[] = ['password']\n        const properties: {\n          email?: JSONSchema4['properties']\n          password?: JSONSchema4['properties']\n          username?: JSONSchema4['properties']\n        } = {\n          password: fieldType,\n          username: fieldType,\n        }\n\n        if (loginWithUsername.requireEmail) {\n          requiredFields.push('email')\n        }\n        if (loginWithUsername.requireUsername) {\n          requiredFields.push('username')\n        }\n        if (loginWithUsername.requireEmail || loginWithUsername.allowEmailLogin) {\n          properties.email = fieldType\n        }\n\n        return {\n          additionalProperties: false,\n          properties,\n          required: requiredFields,\n        }\n      }\n    }\n  }\n\n  // default email (and password for login/register)\n  return {\n    additionalProperties: false,\n    properties: { email: fieldType, password: fieldType },\n    required: ['email', 'password'],\n  }\n}\n\nexport function authCollectionToOperationsJSONSchema(\n  config: SanitizedCollectionConfig,\n): JSONSchema4 {\n  const loginWithUsername = config.auth?.loginWithUsername\n  const loginUserFields: JSONSchema4 = generateAuthFieldTypes({ type: 'login', loginWithUsername })\n  const forgotOrUnlockUserFields: JSONSchema4 = generateAuthFieldTypes({\n    type: 'forgotOrUnlock',\n    loginWithUsername,\n  })\n  const registerUserFields: JSONSchema4 = generateAuthFieldTypes({\n    type: 'register',\n    loginWithUsername,\n  })\n\n  const properties: JSONSchema4['properties'] = {\n    forgotPassword: forgotOrUnlockUserFields,\n    login: loginUserFields,\n    registerFirstUser: registerUserFields,\n    unlock: forgotOrUnlockUserFields,\n  }\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n    title: `${singular(toWords(`${config.slug}`, true))}AuthOperations`,\n  }\n}\n\nfunction generateAuthOperationSchemas(collections: SanitizedCollectionConfig[]): JSONSchema4 {\n  const properties = collections.reduce((acc, collection) => {\n    if (collection.auth) {\n      acc[collection.slug] = {\n        $ref: `#/definitions/auth/${collection.slug}`,\n      }\n    }\n    return acc\n  }, {})\n\n  return {\n    type: 'object',\n    additionalProperties: false,\n    properties,\n    required: Object.keys(properties),\n  }\n}\n\n/**\n * This is used for generating the TypeScript types (payload-types.ts) with the payload generate:types command.\n */\nexport function configToJSONSchema(\n  config: SanitizedConfig,\n  defaultIDType?: 'number' | 'text',\n  i18n?: I18n,\n): JSONSchema4 {\n  // a mutable Map to store custom top-level `interfaceName` types. Fields with an `interfaceName` property will be moved to the top-level definitions here\n  const interfaceNameDefinitions: Map<string, JSONSchema4> = new Map()\n\n  //  Used for relationship fields, to determine whether to use a string or number type for the ID.\n  const collectionIDFieldTypes = getCollectionIDFieldTypes({ config, defaultIDType })\n\n  // Collections and Globals have to be moved to the top-level definitions as well. Reason: The top-level type will be the `Config` type - we don't want all collection and global\n  // types to be inlined inside the `Config` type\n\n  const entities: {\n    entity: SanitizedCollectionConfig | SanitizedGlobalConfig\n    type: 'collection' | 'global'\n  }[] = [\n    ...config.globals.map((global) => ({ type: 'global' as const, entity: global })),\n    ...config.collections.map((collection) => ({\n      type: 'collection' as const,\n      entity: collection,\n    })),\n  ]\n\n  const entityDefinitions: { [k: string]: JSONSchema4 } = entities.reduce(\n    (acc, { type, entity }) => {\n      acc[entity.slug] = entityToJSONSchema(\n        config,\n        entity,\n        interfaceNameDefinitions,\n        defaultIDType,\n        collectionIDFieldTypes,\n        i18n,\n      )\n      const select = fieldsToSelectJSONSchema({\n        fields: entity.flattenedFields,\n        interfaceNameDefinitions,\n      })\n\n      if (type === 'global') {\n        select.properties.globalType = {\n          type: 'boolean',\n        }\n      }\n\n      acc[`${entity.slug}_select`] = {\n        type: 'object',\n        additionalProperties: false,\n        ...select,\n      }\n\n      return acc\n    },\n    {},\n  )\n\n  const authOperationDefinitions = [...config.collections]\n    .filter(({ auth }) => Boolean(auth))\n    .reduce(\n      (acc, authCollection) => {\n        acc.auth[authCollection.slug] = authCollectionToOperationsJSONSchema(authCollection)\n        return acc\n      },\n      { auth: {} },\n    )\n\n  const jobsSchemas = config.jobs\n    ? generateJobsJSONSchemas(\n        config,\n        config.jobs,\n        interfaceNameDefinitions,\n        collectionIDFieldTypes,\n        i18n,\n      )\n    : {}\n\n  let jsonSchema: JSONSchema4 = {\n    additionalProperties: false,\n    definitions: {\n      ...entityDefinitions,\n      ...Object.fromEntries(interfaceNameDefinitions),\n      ...authOperationDefinitions,\n    },\n    // These properties here will be very simple, as all the complexity is in the definitions. These are just the properties for the top-level `Config` type\n    type: 'object',\n    properties: {\n      auth: generateAuthOperationSchemas(config.collections),\n      collections: generateEntitySchemas(config.collections || []),\n      collectionsJoins: generateCollectionJoinsSchemas(config.collections || []),\n      collectionsSelect: generateEntitySelectSchemas(config.collections || []),\n      db: generateDbEntitySchema(config),\n      globals: generateEntitySchemas(config.globals || []),\n      globalsSelect: generateEntitySelectSchemas(config.globals || []),\n      locale: generateLocaleEntitySchemas(config.localization),\n      user: generateAuthEntitySchemas(config.collections),\n    },\n    required: [\n      'user',\n      'locale',\n      'collections',\n      'collectionsSelect',\n      'collectionsJoins',\n      'globalsSelect',\n      'globals',\n      'auth',\n      'db',\n      'jobs',\n    ],\n    title: 'Config',\n  }\n  if (jobsSchemas.definitions?.size) {\n    for (const [key, value] of jobsSchemas.definitions) {\n      jsonSchema.definitions[key] = value\n    }\n  }\n  if (jobsSchemas.properties) {\n    jsonSchema.properties.jobs = {\n      type: 'object',\n      additionalProperties: false,\n      properties: jobsSchemas.properties,\n      required: ['tasks', 'workflows'],\n    }\n  }\n\n  if (config?.typescript?.schema?.length) {\n    for (const schema of config.typescript.schema) {\n      jsonSchema = schema({ jsonSchema })\n    }\n  }\n\n  return jsonSchema\n}\n"],"names":["pluralize","singular","MissingEditorProp","fieldAffectsData","generateJobsJSONSchemas","deepCopyObject","toWords","getCollectionIDFieldTypes","fieldIsRequired","field","isConditional","Boolean","admin","condition","isMarkedRequired","required","type","flattenedFields","some","subField","buildOptionEnums","options","map","option","value","generateEntitySchemas","entities","properties","reduce","acc","slug","$ref","additionalProperties","Object","keys","generateEntitySelectSchemas","generateCollectionJoinsSchemas","collections","joins","schema","collectionSlug","join","joinPath","enum","push","length","generateLocaleEntitySchemas","localization","locales","localesFromConfig","locale","code","generateAuthEntitySchemas","filter","auth","allOf","collection","oneOf","generateDbEntitySchema","config","defaultIDType","db","withNullableJSONSchemaType","fieldType","isRequired","fieldTypes","entityOrFieldToJsDocs","entity","i18n","description","undefined","defaultLocale","en","fieldsToJSONSchema","collectionIDFieldTypes","fields","interfaceNameDefinitions","requiredFieldNames","Set","fromEntries","fieldSchemas","add","name","fieldDescription","baseFieldSchema","fieldSchema","items","interfaceName","set","hasBlocks","blocks","block","blockFieldSchemas","blockSchema","blockType","const","docs","hasNextPage","jsonSchema","hasMany","maxItems","minItems","Array","isArray","relationTo","relation","editor","Error","outputSchema","optionEnums","typescriptSchema","Map","from","entityToJSONSchema","incomingEntity","title","typescript","interface","idField","customIdField","find","unshift","timestamps","disableLocalStrategy","enableFields","entityDescription","fieldsToSelectJSONSchema","definition","blocksSchema","generateAuthFieldTypes","loginWithUsername","allowEmailLogin","email","username","password","requiredFields","requireEmail","requireUsername","authCollectionToOperationsJSONSchema","loginUserFields","forgotOrUnlockUserFields","registerUserFields","forgotPassword","login","registerFirstUser","unlock","generateAuthOperationSchemas","configToJSONSchema","globals","global","entityDefinitions","select","globalType","authOperationDefinitions","authCollection","jobsSchemas","jobs","definitions","collectionsJoins","collectionsSelect","globalsSelect","user","size","key"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2900, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2906, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/getEntityPolicies.ts"],"sourcesContent":["import type { CollectionPermission, GlobalPermission } from '../auth/types.js'\nimport type { SanitizedCollectionConfig, TypeWithID } from '../collections/config/types.js'\nimport type { Access } from '../config/types.js'\nimport type { Field, FieldAccess } from '../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { AllOperations, Document, PayloadRequest, Where } from '../types/index.js'\n\nimport { combineQueries } from '../database/combineQueries.js'\nimport { tabHasName } from '../fields/config/types.js'\n\ntype Args = {\n  entity: SanitizedCollectionConfig | SanitizedGlobalConfig\n  id?: number | string\n  operations: AllOperations[]\n  req: PayloadRequest\n  type: 'collection' | 'global'\n}\n\ntype ReturnType<T extends Args> = T['type'] extends 'global'\n  ? GlobalPermission\n  : CollectionPermission\n\ntype CreateAccessPromise = (args: {\n  access: Access | FieldAccess\n  accessLevel: 'entity' | 'field'\n  disableWhere?: boolean\n  operation: AllOperations\n  policiesObj: {\n    [key: string]: any\n  }\n}) => Promise<void>\n\nexport async function getEntityPolicies<T extends Args>(args: T): Promise<ReturnType<T>> {\n  const { id, type, entity, operations, req } = args\n  const { data, locale, payload, user } = req\n  const isLoggedIn = !!user\n\n  const policies = {\n    fields: {},\n  } as ReturnType<T>\n\n  let docBeingAccessed\n\n  async function getEntityDoc({ where }: { where?: Where } = {}): Promise<Document & TypeWithID> {\n    if (entity.slug) {\n      if (type === 'global') {\n        return payload.findGlobal({\n          slug: entity.slug,\n          fallbackLocale: null,\n          locale,\n          overrideAccess: true,\n          req,\n        })\n      }\n\n      if (type === 'collection' && id) {\n        if (typeof where === 'object') {\n          const paginatedRes = await payload.find({\n            collection: entity.slug,\n            depth: 0,\n            fallbackLocale: null,\n            limit: 1,\n            locale,\n            overrideAccess: true,\n            pagination: false,\n            req,\n            where: combineQueries(where, { id: { equals: id } }),\n          })\n\n          return paginatedRes?.docs?.[0] || undefined\n        }\n\n        return payload.findByID({\n          id,\n          collection: entity.slug,\n          depth: 0,\n          fallbackLocale: null,\n          locale,\n          overrideAccess: true,\n          req,\n        })\n      }\n    }\n\n    return undefined\n  }\n\n  const createAccessPromise: CreateAccessPromise = async ({\n    access,\n    accessLevel,\n    disableWhere = false,\n    operation,\n    policiesObj,\n  }) => {\n    const mutablePolicies = policiesObj\n\n    if (accessLevel === 'field' && docBeingAccessed === undefined) {\n      // assign docBeingAccessed first as the promise to avoid multiple calls to getEntityDoc\n      docBeingAccessed = getEntityDoc().then((doc) => {\n        docBeingAccessed = doc\n      })\n    }\n    // awaiting the promise to ensure docBeingAccessed is assigned before it is used\n    await docBeingAccessed\n\n    // https://payloadcms.slack.com/archives/C048Z9C2BEX/p1702054928343769\n    const accessResult = await access({ id, data, doc: docBeingAccessed, req })\n\n    if (typeof accessResult === 'object' && !disableWhere) {\n      mutablePolicies[operation] = {\n        permission:\n          id || type === 'global' ? !!(await getEntityDoc({ where: accessResult })) : true,\n        where: accessResult,\n      }\n    } else if (mutablePolicies[operation]?.permission !== false) {\n      mutablePolicies[operation] = {\n        permission: !!accessResult,\n      }\n    }\n  }\n\n  const executeFieldPolicies = async ({\n    entityPermission,\n    fields,\n    operation,\n    policiesObj,\n  }: {\n    entityPermission\n    fields: Field[]\n    operation: AllOperations\n    policiesObj\n  }) => {\n    const mutablePolicies = policiesObj.fields\n\n    // Fields don't have all operations of a collection\n    if (operation === 'delete' || operation === 'readVersions' || operation === 'unlock') {\n      return\n    }\n\n    await Promise.all(\n      fields.map(async (field) => {\n        if ('name' in field && field.name) {\n          if (!mutablePolicies[field.name]) {\n            mutablePolicies[field.name] = {}\n          }\n\n          if ('access' in field && field.access && typeof field.access[operation] === 'function') {\n            await createAccessPromise({\n              access: field.access[operation],\n              accessLevel: 'field',\n              disableWhere: true,\n              operation,\n              policiesObj: mutablePolicies[field.name],\n            })\n          } else {\n            mutablePolicies[field.name][operation] = {\n              permission: policiesObj[operation]?.permission,\n            }\n          }\n\n          if ('fields' in field && field.fields) {\n            if (!mutablePolicies[field.name].fields) {\n              mutablePolicies[field.name].fields = {}\n            }\n\n            await executeFieldPolicies({\n              entityPermission,\n              fields: field.fields,\n              operation,\n              policiesObj: mutablePolicies[field.name],\n            })\n          }\n\n          if ('blocks' in field && field.blocks) {\n            if (!mutablePolicies[field.name]?.blocks) {\n              mutablePolicies[field.name].blocks = {}\n            }\n\n            await Promise.all(\n              field.blocks.map(async (block) => {\n                if (!mutablePolicies[field.name].blocks?.[block.slug]) {\n                  mutablePolicies[field.name].blocks[block.slug] = {\n                    fields: {},\n                    [operation]: { permission: entityPermission },\n                  }\n                } else if (!mutablePolicies[field.name].blocks[block.slug][operation]) {\n                  mutablePolicies[field.name].blocks[block.slug][operation] = {\n                    permission: entityPermission,\n                  }\n                }\n\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: block.fields,\n                  operation,\n                  policiesObj: mutablePolicies[field.name].blocks[block.slug],\n                })\n              }),\n            )\n          }\n        } else if ('fields' in field && field.fields) {\n          await executeFieldPolicies({\n            entityPermission,\n            fields: field.fields,\n            operation,\n            policiesObj,\n          })\n        } else if (field.type === 'tabs') {\n          await Promise.all(\n            field.tabs.map(async (tab) => {\n              if (tabHasName(tab)) {\n                if (!mutablePolicies[tab.name]) {\n                  mutablePolicies[tab.name] = {\n                    fields: {},\n                    [operation]: { permission: entityPermission },\n                  }\n                } else if (!mutablePolicies[tab.name][operation]) {\n                  mutablePolicies[tab.name][operation] = { permission: entityPermission }\n                }\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: tab.fields,\n                  operation,\n                  policiesObj: mutablePolicies[tab.name],\n                })\n              } else {\n                await executeFieldPolicies({\n                  entityPermission,\n                  fields: tab.fields,\n                  operation,\n                  policiesObj,\n                })\n              }\n            }),\n          )\n        }\n      }),\n    )\n  }\n\n  await operations.reduce(async (priorOperation, operation) => {\n    await priorOperation\n\n    let entityAccessPromise: Promise<void>\n\n    if (typeof entity.access[operation] === 'function') {\n      entityAccessPromise = createAccessPromise({\n        access: entity.access[operation],\n        accessLevel: 'entity',\n        operation,\n        policiesObj: policies,\n      })\n    } else {\n      policies[operation] = {\n        permission: isLoggedIn,\n      }\n    }\n\n    await entityAccessPromise\n\n    await executeFieldPolicies({\n      entityPermission: policies[operation].permission,\n      fields: entity.fields,\n      operation,\n      policiesObj: policies,\n    })\n  }, Promise.resolve())\n\n  return policies\n}\n"],"names":["combineQueries","tabHasName","getEntityPolicies","args","id","type","entity","operations","req","data","locale","payload","user","isLoggedIn","policies","fields","docBeingAccessed","getEntityDoc","where","slug","findGlobal","fallbackLocale","overrideAccess","paginatedRes","find","collection","depth","limit","pagination","equals","docs","undefined","findByID","createAccessPromise","access","accessLevel","disableWhere","operation","policiesObj","mutablePolicies","then","doc","accessResult","permission","executeFieldPolicies","entityPermission","Promise","all","map","field","name","blocks","block","tabs","tab","reduce","priorOperation","entityAccessPromise","resolve"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3125, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizePermissions.ts"],"sourcesContent":["import type { MarkOptional } from 'ts-essentials'\n\nimport type {\n  CollectionPermission,\n  FieldPermissions,\n  FieldsPermissions,\n  GlobalPermission,\n  Permissions,\n  SanitizedBlocksPermissions,\n  SanitizedFieldPermissions,\n  SanitizedFieldsPermissions,\n  SanitizedPermissions,\n} from '../auth/types.js'\n\nfunction checkAndSanitizeFieldsPermssions(data: FieldsPermissions): boolean {\n  let allFieldPermissionsTrue = true\n  for (const key in data) {\n    if (typeof data[key] === 'object') {\n      if (!checkAndSanitizePermissions(data[key])) {\n        allFieldPermissionsTrue = false\n      } else {\n        ;(data[key] as unknown as SanitizedFieldPermissions) = true\n      }\n    } else if (data[key] !== true) {\n      allFieldPermissionsTrue = false\n    }\n  }\n\n  // If all values are true or it's an empty object, return true\n  return allFieldPermissionsTrue\n}\n\n/**\n * Check if all permissions in a FieldPermissions, CollectionPermission or GlobalPermission object are true.\n * If nested fields or blocks are present, the function will recursively check those as well.\n */\nfunction checkAndSanitizePermissions(\n  data: CollectionPermission | FieldPermissions | GlobalPermission,\n): boolean {\n  /**\n   * Check blocks permissions\n   */\n  let blocksPermissions = true\n  if ('blocks' in data && data.blocks) {\n    for (const blockSlug in data.blocks) {\n      if (typeof data.blocks[blockSlug] === 'object') {\n        for (const key in data.blocks[blockSlug]) {\n          /**\n           * Check fields in nested blocks\n           */\n          if (key === 'fields') {\n            if (data.blocks[blockSlug].fields) {\n              if (!checkAndSanitizeFieldsPermssions(data.blocks[blockSlug].fields)) {\n                blocksPermissions = false\n              } else {\n                ;(data.blocks[blockSlug].fields as unknown as SanitizedFieldsPermissions) = true\n              }\n            }\n          } else {\n            if (typeof data.blocks[blockSlug][key] === 'object') {\n              /**\n               * Check Permissions in nested blocks\n               */\n              if (isPermissionObject(data.blocks[blockSlug][key])) {\n                if (\n                  data.blocks[blockSlug][key]['permission'] === true &&\n                  !('where' in data.blocks[blockSlug][key])\n                ) {\n                  // If the permission is true and there is no where clause, set the key to true\n                  data.blocks[blockSlug][key] = true\n                  continue\n                } else if (\n                  data.blocks[blockSlug][key]['permission'] === true &&\n                  'where' in data.blocks[blockSlug][key]\n                ) {\n                  // otherwise do nothing so we can keep the where clause\n                  blocksPermissions = false\n                } else {\n                  blocksPermissions = false\n                  data.blocks[blockSlug][key] = false\n                  delete data.blocks[blockSlug][key]\n                  continue\n                }\n              } else {\n                throw new Error('Unexpected object in block permissions')\n              }\n            }\n          }\n        }\n      } else if (data.blocks[blockSlug] !== true) {\n        // If any value is not true, return false\n        blocksPermissions = false\n        delete data.blocks[blockSlug]\n      }\n    }\n    if (blocksPermissions) {\n      ;(data.blocks as unknown as SanitizedBlocksPermissions) = true\n    }\n  }\n\n  /**\n   * Check nested Fields permissions\n   */\n  let fieldsPermissions = true\n  if (data.fields) {\n    if (!checkAndSanitizeFieldsPermssions(data.fields)) {\n      fieldsPermissions = false\n    } else {\n      ;(data.fields as unknown as SanitizedFieldsPermissions) = true\n    }\n  }\n\n  /**\n   * Check other Permissions objects (e.g. read, write)\n   */\n  let otherPermissions = true\n  for (const key in data) {\n    if (key === 'fields' || key === 'blocks') {\n      continue\n    }\n    if (typeof data[key] === 'object') {\n      if (isPermissionObject(data[key])) {\n        if (data[key]['permission'] === true && !('where' in data[key])) {\n          // If the permission is true and there is no where clause, set the key to true\n          data[key] = true\n          continue\n        } else if (data[key]['permission'] === true && 'where' in data[key]) {\n          // otherwise do nothing so we can keep the where clause\n          otherPermissions = false\n        } else {\n          otherPermissions = false\n          data[key] = false\n          delete data[key]\n          continue\n        }\n      } else {\n        throw new Error('Unexpected object in fields permissions')\n      }\n    } else if (data[key] !== true) {\n      // If any value is not true, return false\n      otherPermissions = false\n    }\n  }\n\n  // If all values are true or it's an empty object, return true\n  return fieldsPermissions && blocksPermissions && otherPermissions\n}\n\n/**\n * Check if an object is a permission object.\n */\nfunction isPermissionObject(data: unknown): boolean {\n  return typeof data === 'object' && 'permission' in data && typeof data['permission'] === 'boolean'\n}\n\n/**\n * Recursively remove empty objects from an object.\n */\nfunction cleanEmptyObjects(obj: any): void {\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] === 'object' && obj[key] !== null) {\n      // Recursive call\n      cleanEmptyObjects(obj[key])\n      if (Object.keys(obj[key]).length === 0) {\n        // Delete the key if the object is empty\n        delete obj[key]\n      }\n    } else if (obj[key] === null || obj[key] === undefined) {\n      delete obj[key]\n    }\n  })\n}\n\nexport function recursivelySanitizeCollections(obj: Permissions['collections']): void {\n  if (typeof obj !== 'object') {\n    return\n  }\n\n  const collectionPermissions = Object.values(obj)\n\n  for (const collectionPermission of collectionPermissions) {\n    checkAndSanitizePermissions(collectionPermission)\n  }\n}\n\nexport function recursivelySanitizeGlobals(obj: Permissions['globals']): void {\n  if (typeof obj !== 'object') {\n    return\n  }\n\n  const globalPermissions = Object.values(obj)\n\n  for (const globalPermission of globalPermissions) {\n    checkAndSanitizePermissions(globalPermission)\n  }\n}\n\n/**\n * Recursively remove empty objects and false values from an object.\n */\nexport function sanitizePermissions(\n  data: MarkOptional<Permissions, 'canAccessAdmin'>,\n): SanitizedPermissions {\n  if (data.canAccessAdmin === false) {\n    delete data.canAccessAdmin\n  }\n\n  if (data.collections) {\n    recursivelySanitizeCollections(data.collections)\n  }\n\n  if (data.globals) {\n    recursivelySanitizeGlobals(data.globals)\n  }\n\n  // Run clean up of empty objects at the end\n  cleanEmptyObjects(data)\n\n  return data as unknown as SanitizedPermissions\n}\n"],"names":["checkAndSanitizeFieldsPermssions","data","allFieldPermissionsTrue","key","checkAndSanitizePermissions","blocksPermissions","blocks","blockSlug","fields","isPermissionObject","Error","fieldsPermissions","otherPermissions","cleanEmptyObjects","obj","Object","keys","forEach","length","undefined","recursivelySanitizeCollections","collectionPermissions","values","collectionPermission","recursivelySanitizeGlobals","globalPermissions","globalPermission","sanitizePermissions","canAccessAdmin","collections","globals"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3301, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3307, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/sanitizeInternalFields.ts"],"sourcesContent":["const internalFields = ['__v']\n\nconst sanitizeInternalFields = <T extends Record<string, unknown>>(incomingDoc: T): T =>\n  Object.entries(incomingDoc).reduce((newDoc, [key, val]): T => {\n    if (key === '_id') {\n      return {\n        ...newDoc,\n        id: val,\n      }\n    }\n\n    if (internalFields.indexOf(key) > -1) {\n      return newDoc\n    }\n\n    return {\n      ...newDoc,\n      [key]: val,\n    }\n  }, {} as T)\n\nexport default sanitizeInternalFields\n"],"names":["internalFields","sanitizeInternalFields","incomingDoc","Object","entries","reduce","newDoc","key","val","id","indexOf"],"mappings":";;;AAAA,MAAMA,iBAAiB;IAAC;CAAM;AAE9B,MAAMC,yBAAyB,CAAoCC,cACjEC,OAAOC,OAAO,CAACF,aAAaG,MAAM,CAAC,CAACC,QAAQ,CAACC,KAAKC,IAAI;QACpD,IAAID,QAAQ,OAAO;YACjB,OAAO;gBACL,GAAGD,MAAM;gBACTG,IAAID;YACN;QACF;QAEA,IAAIR,eAAeU,OAAO,CAACH,OAAO,CAAC,GAAG;YACpC,OAAOD;QACT;QAEA,OAAO;YACL,GAAGA,MAAM;YACT,CAACC,IAAI,EAAEC;QACT;IACF,GAAG,CAAC;uCAESP,uBAAsB","ignoreList":[0]}},
    {"offset": {"line": 3330, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3336, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/mapAsync.ts"],"sourcesContent":["export async function mapAsync<T, U>(\n  arr: T[],\n  callbackfn: (item: T, index: number, array: T[]) => Promise<U>,\n): Promise<U[]> {\n  return Promise.all(arr.map(callbackfn))\n}\n"],"names":["mapAsync","arr","callbackfn","Promise","all","map"],"mappings":";;;AAAO,eAAeA,SACpBC,GAAQ,EACRC,UAA8D;IAE9D,OAAOC,QAAQC,GAAG,CAACH,IAAII,GAAG,CAACH;AAC7B","ignoreList":[0]}},
    {"offset": {"line": 3342, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3348, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/checkDocumentLockStatus.ts"],"sourcesContent":["import type { TypeWithID } from '../collections/config/types.js'\nimport type { PaginatedDocs } from '../database/types.js'\nimport type { JsonObject, PayloadRequest } from '../types/index.js'\n\nimport { Locked } from '../errors/index.js'\n\ntype CheckDocumentLockStatusArgs = {\n  collectionSlug?: string\n  globalSlug?: string\n  id?: number | string\n  lockDurationDefault?: number\n  lockErrorMessage?: string\n  overrideLock?: boolean\n  req: PayloadRequest\n}\n\nexport const checkDocumentLockStatus = async ({\n  id,\n  collectionSlug,\n  globalSlug,\n  lockDurationDefault = 300, // Default 5 minutes in seconds\n  lockErrorMessage,\n  overrideLock = true,\n  req,\n}: CheckDocumentLockStatusArgs): Promise<void> => {\n  const { payload } = req\n\n  // Retrieve the lockDocuments property for either collection or global\n  const lockDocumentsProp = collectionSlug\n    ? payload.config?.collections?.find((c) => c.slug === collectionSlug)?.lockDocuments\n    : payload.config?.globals?.find((g) => g.slug === globalSlug)?.lockDocuments\n\n  const isLockingEnabled = lockDocumentsProp !== false\n\n  let lockedDocumentQuery = {}\n\n  if (collectionSlug) {\n    lockedDocumentQuery = {\n      and: [\n        { 'document.relationTo': { equals: collectionSlug } },\n        { 'document.value': { equals: id } },\n      ],\n    }\n  } else if (globalSlug) {\n    lockedDocumentQuery = { globalSlug: { equals: globalSlug } }\n  } else {\n    throw new Error('Either collectionSlug or globalSlug must be provided.')\n  }\n\n  if (!isLockingEnabled) {\n    return\n  }\n\n  // Only perform lock checks if overrideLock is false and locking is enabled\n  if (!overrideLock) {\n    const defaultLockErrorMessage = collectionSlug\n      ? `Document with ID ${id} is currently locked by another user and cannot be modified.`\n      : `Global document with slug \"${globalSlug}\" is currently locked by another user and cannot be modified.`\n\n    const finalLockErrorMessage = lockErrorMessage || defaultLockErrorMessage\n\n    const lockedDocumentResult: PaginatedDocs<JsonObject & TypeWithID> = await payload.db.find({\n      collection: 'payload-locked-documents',\n      limit: 1,\n      pagination: false,\n      req,\n      sort: '-updatedAt',\n      where: lockedDocumentQuery,\n    })\n\n    // If there's a locked document, check lock conditions\n    const lockedDoc = lockedDocumentResult?.docs[0]\n    if (lockedDoc) {\n      const lastEditedAt = new Date(lockedDoc?.updatedAt).getTime()\n      const now = new Date().getTime()\n\n      const lockDuration =\n        typeof lockDocumentsProp === 'object' ? lockDocumentsProp.duration : lockDurationDefault\n\n      const lockDurationInMilliseconds = lockDuration * 1000\n      const currentUserId = req.user?.id\n\n      // document is locked by another user and the lock hasn't expired\n      if (\n        lockedDoc.user?.value !== currentUserId &&\n        now - lastEditedAt <= lockDurationInMilliseconds\n      ) {\n        throw new Locked(finalLockErrorMessage)\n      }\n    }\n  }\n\n  // Perform the delete operation regardless of overrideLock status\n  await payload.db.deleteMany({\n    collection: 'payload-locked-documents',\n    req,\n    where: lockedDocumentQuery,\n  })\n}\n"],"names":["Locked","checkDocumentLockStatus","id","collectionSlug","globalSlug","lockDurationDefault","lockErrorMessage","overrideLock","req","payload","lockDocumentsProp","config","collections","find","c","slug","lockDocuments","globals","g","isLockingEnabled","lockedDocumentQuery","and","equals","Error","defaultLockErrorMessage","finalLockErrorMessage","lockedDocumentResult","db","collection","limit","pagination","sort","where","lockedDoc","docs","lastEditedAt","Date","updatedAt","getTime","now","lockDuration","duration","lockDurationInMilliseconds","currentUserId","user","value","deleteMany"],"mappings":";;;AAIA,SAASA,MAAM,QAAQ,qBAAoB;;AAYpC,MAAMC,0BAA0B,OAAO,EAC5CC,EAAE,EACFC,cAAc,EACdC,UAAU,EACVC,sBAAsB,GAAG,EACzBC,gBAAgB,EAChBC,eAAe,IAAI,EACnBC,GAAG,EACyB;IAC5B,MAAM,EAAEC,OAAO,EAAE,GAAGD;IAEpB,sEAAsE;IACtE,MAAME,oBAAoBP,iBACtBM,QAAQE,MAAM,EAAEC,aAAaC,KAAK,CAACC,IAAMA,EAAEC,IAAI,KAAKZ,iBAAiBa,gBACrEP,QAAQE,MAAM,EAAEM,SAASJ,KAAK,CAACK,IAAMA,EAAEH,IAAI,KAAKX,aAAaY;IAEjE,MAAMG,mBAAmBT,sBAAsB;IAE/C,IAAIU,sBAAsB,CAAC;IAE3B,IAAIjB,gBAAgB;QAClBiB,sBAAsB;YACpBC,KAAK;gBACH;oBAAE,uBAAuB;wBAAEC,QAAQnB;oBAAe;gBAAE;gBACpD;oBAAE,kBAAkB;wBAAEmB,QAAQpB;oBAAG;gBAAE;aACpC;QACH;IACF,OAAO,IAAIE,YAAY;QACrBgB,sBAAsB;YAAEhB,YAAY;gBAAEkB,QAAQlB;YAAW;QAAE;IAC7D,OAAO;QACL,MAAM,IAAImB,MAAM;IAClB;IAEA,IAAI,CAACJ,kBAAkB;QACrB;IACF;IAEA,2EAA2E;IAC3E,IAAI,CAACZ,cAAc;QACjB,MAAMiB,0BAA0BrB,iBAC5B,CAAC,iBAAiB,EAAED,GAAG,4DAA4D,CAAC,GACpF,CAAC,2BAA2B,EAAEE,WAAW,6DAA6D,CAAC;QAE3G,MAAMqB,wBAAwBnB,oBAAoBkB;QAElD,MAAME,uBAA+D,MAAMjB,QAAQkB,EAAE,CAACd,IAAI,CAAC;YACzFe,YAAY;YACZC,OAAO;YACPC,YAAY;YACZtB;YACAuB,MAAM;YACNC,OAAOZ;QACT;QAEA,sDAAsD;QACtD,MAAMa,YAAYP,sBAAsBQ,IAAI,CAAC,EAAE;QAC/C,IAAID,WAAW;YACb,MAAME,eAAe,IAAIC,KAAKH,WAAWI,WAAWC,OAAO;YAC3D,MAAMC,MAAM,IAAIH,OAAOE,OAAO;YAE9B,MAAME,eACJ,OAAO9B,sBAAsB,WAAWA,kBAAkB+B,QAAQ,GAAGpC;YAEvE,MAAMqC,6BAA6BF,eAAe;YAClD,MAAMG,gBAAgBnC,IAAIoC,IAAI,EAAE1C;YAEhC,iEAAiE;YACjE,IACE+B,UAAUW,IAAI,EAAEC,UAAUF,iBAC1BJ,MAAMJ,gBAAgBO,4BACtB;gBACA,MAAM,8WAAI1C,SAAAA,CAAOyB;YACnB;QACF;IACF;IAEA,iEAAiE;IACjE,MAAMhB,QAAQkB,EAAE,CAACmB,UAAU,CAAC;QAC1BlB,YAAY;QACZpB;QACAwB,OAAOZ;IACT;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3419, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3425, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/logger.ts"],"sourcesContent":["import { type Logger, pino } from 'pino'\nimport { build, type PinoPretty, type PrettyOptions } from 'pino-pretty'\n\nimport type { Config } from '../config/types.js'\n\n/**\n * Payload internal logger. Uses Pino.\n * This allows you to bring your own logger instance and let payload use it\n */\nexport type PayloadLogger = Logger\n\nconst prettyOptions: PrettyOptions = {\n  colorize: true,\n  ignore: 'pid,hostname',\n  translateTime: 'SYS:HH:MM:ss',\n}\n\nexport const prettySyncLoggerDestination: PinoPretty.PrettyStream = build({\n  ...prettyOptions,\n  destination: 1, // stdout\n  sync: true,\n})\n\nexport const defaultLoggerOptions: PinoPretty.PrettyStream = build(prettyOptions)\n\nexport const getLogger = (name = 'payload', logger?: Config['logger']): PayloadLogger => {\n  if (!logger) {\n    return pino(defaultLoggerOptions)\n  }\n\n  // Synchronous logger used by bin scripts\n  if (logger === 'sync') {\n    return pino(prettySyncLoggerDestination)\n  }\n\n  // Check if logger is an object\n  if ('options' in logger) {\n    const { destination, options } = logger\n\n    if (!options.name) {\n      options.name = name\n    }\n\n    if (!options.enabled) {\n      options.enabled = process.env.DISABLE_LOGGING !== 'true'\n    }\n\n    return pino(options, destination)\n  } else {\n    // Instantiated logger\n    return logger\n  }\n}\n"],"names":["pino","build","prettyOptions","colorize","ignore","translateTime","prettySyncLoggerDestination","destination","sync","defaultLoggerOptions","getLogger","name","logger","options","enabled","process","env","DISABLE_LOGGING"],"mappings":";;;;;AAAA,SAAsBA,IAAI,QAAQ,OAAM;AACxC,SAASC,KAAK,QAA6C,cAAa;;;AAUxE,MAAMC,gBAA+B;IACnCC,UAAU;IACVC,QAAQ;IACRC,eAAe;AACjB;AAEO,MAAMC,sOAAuDL,QAAAA,EAAM;IACxE,GAAGC,aAAa;IAChBK,aAAa;IACbC,MAAM;AACR,GAAE;AAEK,MAAMC,+NAAgDR,QAAAA,EAAMC,eAAc;AAE1E,MAAMQ,YAAY,CAACC,OAAO,SAAS,EAAEC;IAC1C,IAAI,CAACA,QAAQ;QACX,yLAAOZ,OAAAA,EAAKS;IACd;IAEA,yCAAyC;IACzC,IAAIG,WAAW,QAAQ;QACrB,yLAAOZ,OAAAA,EAAKM;IACd;IAEA,+BAA+B;IAC/B,IAAI,aAAaM,QAAQ;QACvB,MAAM,EAAEL,WAAW,EAAEM,OAAO,EAAE,GAAGD;QAEjC,IAAI,CAACC,QAAQF,IAAI,EAAE;YACjBE,QAAQF,IAAI,GAAGA;QACjB;QAEA,IAAI,CAACE,QAAQC,OAAO,EAAE;YACpBD,QAAQC,OAAO,GAAGC,QAAQC,GAAG,CAACC,eAAe,KAAK;QACpD;QAEA,yLAAOjB,OAAAA,EAAKa,SAASN;IACvB,OAAO;QACL,sBAAsB;QACtB,OAAOK;IACT;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3468, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3474, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/conf/envPaths.ts"],"sourcesContent":["/**\n * Taken from https://github.com/sindresorhus/env-paths/blob/main/index.js\n *\n * MIT License\n *\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport os from 'node:os'\nimport path from 'node:path'\nimport process from 'node:process'\n\nconst homedir = os.homedir()\nconst tmpdir = os.tmpdir()\nconst { env } = process\n\nconst macos = (name) => {\n  const library = path.join(homedir, 'Library')\n\n  return {\n    cache: path.join(library, 'Caches', name),\n    config: path.join(library, 'Preferences', name),\n    data: path.join(library, 'Application Support', name),\n    log: path.join(library, 'Logs', name),\n    temp: path.join(tmpdir, name),\n  }\n}\n\nconst windows = (name) => {\n  const appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming')\n  const localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local')\n\n  return {\n    // Data/config/cache/log are invented by me as Windows isn't opinionated about this\n    cache: path.join(localAppData, name, 'Cache'),\n    config: path.join(appData, name, 'Config'),\n    data: path.join(localAppData, name, 'Data'),\n    log: path.join(localAppData, name, 'Log'),\n    temp: path.join(tmpdir, name),\n  }\n}\n\n// https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\nconst linux = (name) => {\n  const username = path.basename(homedir)\n\n  return {\n    cache: path.join(env.XDG_CACHE_HOME || path.join(homedir, '.cache'), name),\n    config: path.join(env.XDG_CONFIG_HOME || path.join(homedir, '.config'), name),\n    data: path.join(env.XDG_DATA_HOME || path.join(homedir, '.local', 'share'), name),\n    // https://wiki.debian.org/XDGBaseDirectorySpecification#state\n    log: path.join(env.XDG_STATE_HOME || path.join(homedir, '.local', 'state'), name),\n    temp: path.join(tmpdir, username, name),\n  }\n}\n\nexport function envPaths(name, { suffix = 'nodejs' } = {}) {\n  if (typeof name !== 'string') {\n    throw new TypeError(`Expected a string, got ${typeof name}`)\n  }\n\n  if (suffix) {\n    // Add suffix to prevent possible conflict with native apps\n    name += `-${suffix}`\n  }\n\n  if (process.platform === 'darwin') {\n    return macos(name)\n  }\n\n  if (process.platform === 'win32') {\n    return windows(name)\n  }\n\n  return linux(name)\n}\n"],"names":["os","path","process","homedir","tmpdir","env","macos","name","library","join","cache","config","data","log","temp","windows","appData","APPDATA","localAppData","LOCALAPPDATA","linux","username","basename","XDG_CACHE_HOME","XDG_CONFIG_HOME","XDG_DATA_HOME","XDG_STATE_HOME","envPaths","suffix","TypeError","platform"],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;AAED,OAAOA,QAAQ,UAAS;AACxB,OAAOC,UAAU,YAAW;AAC5B,OAAOC,aAAa,eAAc;;;;AAElC,MAAMC,wHAAUH,UAAAA,CAAGG,OAAO;AAC1B,MAAMC,uHAASJ,UAAAA,CAAGI,MAAM;AACxB,MAAM,EAAEC,GAAG,EAAE,2HAAGH,UAAAA;AAEhB,MAAMI,QAAQ,CAACC;IACb,MAAMC,4HAAUP,UAAAA,CAAKQ,IAAI,CAACN,SAAS;IAEnC,OAAO;QACLO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACD,SAAS,UAAUD;QACpCI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACD,SAAS,eAAeD;QAC1CK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACD,SAAS,uBAAuBD;QAChDM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACD,SAAS,QAAQD;QAChCO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQG;IAC1B;AACF;AAEA,MAAMQ,UAAU,CAACR;IACf,MAAMS,UAAUX,IAAIY,OAAO,sHAAIhB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAW;IAC7D,MAAMe,eAAeb,IAAIc,YAAY,sHAAIlB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAW;IAEvE,OAAO;QACL,mFAAmF;QACnFO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACrCI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACO,SAAST,MAAM;QACjCK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACpCM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACS,cAAcX,MAAM;QACnCO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQG;IAC1B;AACF;AAEA,+EAA+E;AAC/E,MAAMa,QAAQ,CAACb;IACb,MAAMc,6HAAWpB,UAAAA,CAAKqB,QAAQ,CAACnB;IAE/B,OAAO;QACLO,yHAAOT,UAAAA,CAAKQ,IAAI,CAACJ,IAAIkB,cAAc,sHAAItB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,WAAWI;QACrEI,0HAAQV,UAAAA,CAAKQ,IAAI,CAACJ,IAAImB,eAAe,sHAAIvB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,YAAYI;QACxEK,wHAAMX,UAAAA,CAAKQ,IAAI,CAACJ,IAAIoB,aAAa,sHAAIxB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,UAAU,UAAUI;QAC5E,8DAA8D;QAC9DM,uHAAKZ,UAAAA,CAAKQ,IAAI,CAACJ,IAAIqB,cAAc,sHAAIzB,UAAAA,CAAKQ,IAAI,CAACN,SAAS,UAAU,UAAUI;QAC5EO,wHAAMb,UAAAA,CAAKQ,IAAI,CAACL,QAAQiB,UAAUd;IACpC;AACF;AAEO,SAASoB,SAASpB,IAAI,EAAE,EAAEqB,SAAS,QAAQ,EAAE,GAAG,CAAC,CAAC;IACvD,IAAI,OAAOrB,SAAS,UAAU;QAC5B,MAAM,IAAIsB,UAAU,CAAC,uBAAuB,EAAE,OAAOtB,MAAM;IAC7D;IAEA,IAAIqB,QAAQ;QACV,2DAA2D;QAC3DrB,QAAQ,CAAC,CAAC,EAAEqB,QAAQ;IACtB;IAEA,4HAAI1B,UAAAA,CAAQ4B,QAAQ,KAAK,UAAU;QACjC,OAAOxB,MAAMC;IACf;IAEA,4HAAIL,UAAAA,CAAQ4B,QAAQ,KAAK,SAAS;QAChC,OAAOf,QAAQR;IACjB;IAEA,OAAOa,MAAMb;AACf","ignoreList":[0]}},
    {"offset": {"line": 3548, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3554, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/conf/index.ts"],"sourcesContent":["/**\n * Taken & simplified from https://github.com/sindresorhus/conf/blob/main/source/index.ts\n *\n * MIT License\n *\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport assert from 'node:assert'\nimport fs from 'node:fs'\nimport path from 'node:path'\n\nimport { envPaths } from './envPaths.js'\n\nconst createPlainObject = <T = Record<string, unknown>>(): T => Object.create(null)\n\nconst checkValueType = (key: string, value: unknown): void => {\n  const nonJsonTypes = new Set(['function', 'symbol', 'undefined'])\n\n  const type = typeof value\n\n  if (nonJsonTypes.has(type)) {\n    throw new TypeError(\n      `Setting a value of type \\`${type}\\` for key \\`${key}\\` is not allowed as it's not supported by JSON`,\n    )\n  }\n}\n\nexport class Conf<T extends Record<string, any> = Record<string, unknown>>\n  implements Iterable<[keyof T, T[keyof T]]>\n{\n  readonly #options: Readonly<Partial<Options>>\n  private readonly _deserialize: Deserialize<T> = (value) => JSON.parse(value)\n  private readonly _serialize: Serialize<T> = (value) => JSON.stringify(value, undefined, '\\t')\n\n  readonly events: EventTarget\n\n  readonly path: string\n\n  constructor() {\n    const options: Partial<Options> = {\n      configFileMode: 0o666,\n      configName: 'config',\n      fileExtension: 'json',\n      projectSuffix: 'nodejs',\n    }\n\n    const cwd = envPaths('payload', { suffix: options.projectSuffix }).config\n\n    this.#options = options\n\n    this.events = new EventTarget()\n\n    const fileExtension = options.fileExtension ? `.${options.fileExtension}` : ''\n    this.path = path.resolve(cwd, `${options.configName ?? 'config'}${fileExtension}`)\n\n    const fileStore = this.store\n    const store = Object.assign(createPlainObject(), fileStore)\n\n    try {\n      assert.deepEqual(fileStore, store)\n    } catch {\n      this.store = store\n    }\n  }\n\n  private _ensureDirectory(): void {\n    // Ensure the directory exists as it could have been deleted in the meantime.\n    fs.mkdirSync(path.dirname(this.path), { recursive: true })\n  }\n\n  private _write(value: T): void {\n    const data: string | Uint8Array = this._serialize(value)\n\n    fs.writeFileSync(this.path, data, { mode: this.#options.configFileMode })\n  }\n\n  /**\n   Delete an item.\n\n   @param key - The key of the item to delete.\n   */\n  delete(key: string): void {\n    const { store } = this\n    delete store[key]\n\n    this.store = store\n  }\n\n  /**\n   Get an item.\n\n   @param key - The key of the item to get.\n   */\n  get<Key extends keyof T>(key: Key): T[Key] {\n    const { store } = this\n    return store[key]\n  }\n\n  /**\n   Set an item or multiple items at once.\n\n   @param key - You can use [dot-notation](https://github.com/sindresorhus/dot-prop) in a key to access nested properties. Or a hashmap of items to set at once.\n   @param value - Must be JSON serializable. Trying to set the type `undefined`, `function`, or `symbol` will result in a `TypeError`.\n   */\n  set<Key extends keyof T>(key: string, value?: T[Key] | unknown): void {\n    if (typeof key !== 'string' && typeof key !== 'object') {\n      throw new TypeError(\n        `Expected \\`key\\` to be of type \\`string\\` or \\`object\\`, got ${typeof key}`,\n      )\n    }\n\n    if (typeof key !== 'object' && value === undefined) {\n      throw new TypeError('Use `delete()` to clear values')\n    }\n\n    const { store } = this\n\n    const set = (key: string, value?: T | T[Key] | unknown): void => {\n      checkValueType(key, value)\n      store[key as Key] = value as T[Key]\n    }\n\n    if (typeof key === 'object') {\n      const object = key\n      for (const [key, value] of Object.entries(object)) {\n        set(key, value)\n      }\n    } else {\n      set(key, value)\n    }\n\n    this.store = store\n  }\n\n  *[Symbol.iterator](): IterableIterator<[keyof T, T[keyof T]]> {\n    for (const [key, value] of Object.entries(this.store)) {\n      yield [key, value]\n    }\n  }\n  get size(): number {\n    return Object.keys(this.store).length\n  }\n  get store(): T {\n    try {\n      const dataString = fs.readFileSync(this.path, 'utf8')\n      const deserializedData = this._deserialize(dataString)\n      return Object.assign(createPlainObject(), deserializedData)\n    } catch (error: unknown) {\n      if ((error as any)?.code === 'ENOENT') {\n        this._ensureDirectory()\n        return createPlainObject()\n      }\n\n      throw error\n    }\n  }\n\n  set store(value: T) {\n    this._ensureDirectory()\n\n    this._write(value)\n\n    this.events.dispatchEvent(new Event('change'))\n  }\n}\n\nexport type Options = {\n  /**\n   The config is cleared if reading the config file causes a `SyntaxError`. This is a good behavior for unimportant data, as the config file is not intended to be hand-edited, so it usually means the config is corrupt and there's nothing the user can do about it anyway. However, if you let the user edit the config file directly, mistakes might happen and it could be more useful to throw an error when the config is invalid instead of clearing.\n\n   @default false\n   */\n  clearInvalidConfig?: boolean\n\n  /**\n   The [mode](https://en.wikipedia.org/wiki/File-system_permissions#Numeric_notation) that will be used for the config file.\n\n   You would usually not need this, but it could be useful if you want to restrict the permissions of the config file. Setting a permission such as `0o600` would result in a config file that can only be accessed by the user running the program.\n\n   Note that setting restrictive permissions can cause problems if different users need to read the file. A common problem is a user running your tool with and without `sudo` and then not being able to access the config the second time.\n\n   @default 0o666\n   */\n  readonly configFileMode?: number\n\n  /**\n   Name of the config file (without extension).\n\n   Useful if you need multiple config files for your app or module. For example, different config files between two major versions.\n\n   @default 'config'\n   */\n  configName?: string\n\n  /**\n   Extension of the config file.\n\n   You would usually not need this, but could be useful if you want to interact with a file with a custom file extension that can be associated with your app. These might be simple save/export/preference files that are intended to be shareable or saved outside of the app.\n\n   @default 'json'\n   */\n  fileExtension?: string\n\n  readonly projectSuffix?: string\n}\n\nexport type Serialize<T> = (value: T) => string\nexport type Deserialize<T> = (text: string) => T\n"],"names":["assert","fs","path","envPaths","createPlainObject","Object","create","checkValueType","key","value","nonJsonTypes","Set","type","has","TypeError","Conf","_deserialize","JSON","parse","_serialize","stringify","undefined","events","constructor","options","configFileMode","configName","fileExtension","projectSuffix","cwd","suffix","config","EventTarget","resolve","fileStore","store","assign","deepEqual","_ensureDirectory","mkdirSync","dirname","recursive","_write","data","writeFileSync","mode","delete","get","set","object","entries","Symbol","iterator","size","keys","length","dataString","readFileSync","deserializedData","error","code","dispatchEvent","Event"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3703, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3709, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/oneWayHash.ts"],"sourcesContent":["import type { BinaryLike } from 'crypto'\n\nimport { createHash } from 'crypto'\n\nexport const oneWayHash = (data: BinaryLike, secret: string): string => {\n  const hash = createHash('sha256')\n\n  // prepend value with payload secret. This ensure one-way.\n  hash.update(secret)\n\n  // Update is an append operation, not a replacement. The secret from the prior\n  // update is still present!\n  hash.update(data)\n  return hash.digest('hex')\n}\n"],"names":["createHash","oneWayHash","data","secret","hash","update","digest"],"mappings":";;;AAEA,SAASA,UAAU,QAAQ,SAAQ;;AAE5B,MAAMC,aAAa,CAACC,MAAkBC;IAC3C,MAAMC,iHAAOJ,aAAAA,EAAW;IAExB,0DAA0D;IAC1DI,KAAKC,MAAM,CAACF;IAEZ,8EAA8E;IAC9E,2BAA2B;IAC3BC,KAAKC,MAAM,CAACH;IACZ,OAAOE,KAAKE,MAAM,CAAC;AACrB,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3723, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3729, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/index.ts"],"sourcesContent":["import { execSync } from 'child_process'\nimport ciInfo from 'ci-info'\nimport { randomBytes } from 'crypto'\nimport fs from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport type { Payload } from '../../types/index.js'\nimport type { AdminInitEvent } from './events/adminInit.js'\nimport type { ServerInitEvent } from './events/serverInit.js'\n\nimport { findUp } from '../findUp.js'\nimport { Conf } from './conf/index.js'\nimport { oneWayHash } from './oneWayHash.js'\n\nexport type BaseEvent = {\n  ciName: null | string\n  dbAdapter: string\n  emailAdapter: null | string\n  envID: string\n  isCI: boolean\n  locales: string[]\n  localizationDefaultLocale: null | string\n  localizationEnabled: boolean\n  nodeEnv: string\n  nodeVersion: string\n  payloadVersion: string\n  projectID: string\n  projectIDSource: 'cwd' | 'git' | 'packageJSON' | 'serverURL'\n  uploadAdapters: string[]\n}\n\ntype PackageJSON = {\n  dependencies: Record<string, string | undefined>\n  name: string\n}\n\ntype TelemetryEvent = AdminInitEvent | ServerInitEvent\n\ntype Args = {\n  event: TelemetryEvent\n  payload: Payload\n}\n\nlet baseEvent: BaseEvent | null = null\n\nexport const sendEvent = async ({ event, payload }: Args): Promise<void> => {\n  try {\n    const { packageJSON, packageJSONPath } = await getPackageJSON()\n\n    // Only generate the base event once\n    if (!baseEvent) {\n      const { projectID, source: projectIDSource } = getProjectID(payload, packageJSON)\n      baseEvent = {\n        ciName: ciInfo.isCI ? ciInfo.name : null,\n        envID: getEnvID(),\n        isCI: ciInfo.isCI,\n        nodeEnv: process.env.NODE_ENV || 'development',\n        nodeVersion: process.version,\n        payloadVersion: getPayloadVersion(packageJSON),\n        projectID,\n        projectIDSource,\n        ...getLocalizationInfo(payload),\n        dbAdapter: payload.db.name,\n        emailAdapter: payload.email?.name || null,\n        uploadAdapters: payload.config.upload.adapters,\n      }\n    }\n\n    if (process.env.PAYLOAD_TELEMETRY_DEBUG) {\n      payload.logger.info({\n        event: { ...baseEvent, ...event, packageJSONPath },\n        msg: 'Telemetry Event',\n      })\n      return\n    }\n\n    if (payload.config.telemetry !== false) {\n      await fetch('https://telemetry.payloadcms.com/events', {\n        body: JSON.stringify({ ...baseEvent, ...event }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        method: 'post',\n      })\n    }\n  } catch (_) {\n    // Eat any errors in sending telemetry event\n  }\n}\n\n/**\n * This is a quasi-persistent identifier used to dedupe recurring events. It's\n * generated from random data and completely anonymous.\n */\nconst getEnvID = (): string => {\n  const conf = new Conf()\n  const ENV_ID = 'envID'\n\n  const val = conf.get(ENV_ID)\n  if (val) {\n    return val as string\n  }\n\n  const generated = randomBytes(32).toString('hex')\n  conf.set(ENV_ID, generated)\n  return generated\n}\n\nconst getProjectID = (\n  payload: Payload,\n  packageJSON: PackageJSON,\n): { projectID: string; source: BaseEvent['projectIDSource'] } => {\n  const gitID = getGitID(payload)\n  if (gitID) {\n    return { projectID: oneWayHash(gitID, payload.secret), source: 'git' }\n  }\n\n  const packageJSONID = getPackageJSONID(payload, packageJSON)\n  if (packageJSONID) {\n    return { projectID: oneWayHash(packageJSONID, payload.secret), source: 'packageJSON' }\n  }\n\n  const serverURL = payload.config.serverURL\n  if (serverURL) {\n    return { projectID: oneWayHash(serverURL, payload.secret), source: 'serverURL' }\n  }\n\n  const cwd = process.cwd()\n  return { projectID: oneWayHash(cwd, payload.secret), source: 'cwd' }\n}\n\nconst getGitID = (payload: Payload) => {\n  try {\n    const originBuffer = execSync('git config --local --get remote.origin.url', {\n      stdio: 'pipe',\n      timeout: 1000,\n    })\n\n    return oneWayHash(String(originBuffer).trim(), payload.secret)\n  } catch (_) {\n    return null\n  }\n}\n\nconst getPackageJSON = async (): Promise<{\n  packageJSON?: PackageJSON\n  packageJSONPath: string\n}> => {\n  let packageJSONPath = path.resolve(process.cwd(), 'package.json')\n\n  if (!fs.existsSync(packageJSONPath)) {\n    // Old logic\n    const filename = fileURLToPath(import.meta.url)\n    const dirname = path.dirname(filename)\n    packageJSONPath = await findUp({\n      dir: dirname,\n      fileNames: ['package.json'],\n    })\n  }\n\n  const jsonContentString = await fs.promises.readFile(packageJSONPath, 'utf-8')\n  const jsonContent: PackageJSON = JSON.parse(jsonContentString)\n  return { packageJSON: jsonContent, packageJSONPath }\n}\n\nconst getPackageJSONID = (payload: Payload, packageJSON: PackageJSON): string => {\n  return oneWayHash(packageJSON.name, payload.secret)\n}\n\nexport const getPayloadVersion = (packageJSON: PackageJSON): string => {\n  return packageJSON?.dependencies?.payload ?? ''\n}\n\nexport const getLocalizationInfo = (\n  payload: Payload,\n): Pick<BaseEvent, 'locales' | 'localizationDefaultLocale' | 'localizationEnabled'> => {\n  if (!payload.config.localization) {\n    return {\n      locales: [],\n      localizationDefaultLocale: null,\n      localizationEnabled: false,\n    }\n  }\n\n  return {\n    locales: payload.config.localization.localeCodes,\n    localizationDefaultLocale: payload.config.localization.defaultLocale,\n    localizationEnabled: true,\n  }\n}\n"],"names":["execSync","ciInfo","randomBytes","fs","path","fileURLToPath","findUp","Conf","oneWayHash","baseEvent","sendEvent","event","payload","packageJSON","packageJSONPath","getPackageJSON","projectID","source","projectIDSource","getProjectID","ciName","isCI","name","envID","getEnvID","nodeEnv","process","env","NODE_ENV","nodeVersion","version","payloadVersion","getPayloadVersion","getLocalizationInfo","dbAdapter","db","emailAdapter","email","uploadAdapters","config","upload","adapters","PAYLOAD_TELEMETRY_DEBUG","logger","info","msg","telemetry","fetch","body","JSON","stringify","headers","method","_","conf","ENV_ID","val","get","generated","toString","set","gitID","getGitID","secret","packageJSONID","getPackageJSONID","serverURL","cwd","originBuffer","stdio","timeout","String","trim","resolve","existsSync","filename","url","dirname","dir","fileNames","jsonContentString","promises","readFile","jsonContent","parse","dependencies","localization","locales","localizationDefaultLocale","localizationEnabled","localeCodes","defaultLocale"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3899, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3905, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/telemetry/events/serverInit.ts"],"sourcesContent":["import type { Payload } from '../../../index.js'\n\nimport { sendEvent } from '../index.js'\n\nexport type ServerInitEvent = {\n  type: 'server-init'\n}\n\nexport const serverInit = (payload: Payload): void => {\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  sendEvent({\n    event: {\n      type: 'server-init',\n    },\n    payload,\n  })\n}\n"],"names":["sendEvent","serverInit","payload","event","type"],"mappings":";;;AAEA,SAASA,SAAS,QAAQ,cAAa;;AAMhC,MAAMC,aAAa,CAACC;IACzB,mEAAmE;iYACnEF,YAAAA,EAAU;QACRG,OAAO;YACLC,MAAM;QACR;QACAF;IACF;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3919, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3925, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/parseCookies.ts"],"sourcesContent":["import { APIError } from '../errors/APIError.js'\n\nexport const parseCookies = (headers: Request['headers']): Map<string, string> => {\n  const list = new Map<string, string>()\n  const rc = headers.get('Cookie')\n\n  if (rc) {\n    rc.split(';').forEach((cookie) => {\n      const parts = cookie.split('=')\n      const key = parts.shift().trim()\n      const encodedValue = parts.join('=')\n\n      try {\n        const decodedValue = decodeURI(encodedValue)\n        list.set(key, decodedValue)\n      } catch (e) {\n        throw new APIError(`Error decoding cookie value for key ${key}: ${e.message}`)\n      }\n    })\n  }\n\n  return list\n}\n"],"names":["APIError","parseCookies","headers","list","Map","rc","get","split","forEach","cookie","parts","key","shift","trim","encodedValue","join","decodedValue","decodeURI","set","e","message"],"mappings":";;;AAAA,SAASA,QAAQ,QAAQ,wBAAuB;;AAEzC,MAAMC,eAAe,CAACC;IAC3B,MAAMC,OAAO,IAAIC;IACjB,MAAMC,KAAKH,QAAQI,GAAG,CAAC;IAEvB,IAAID,IAAI;QACNA,GAAGE,KAAK,CAAC,KAAKC,OAAO,CAAC,CAACC;YACrB,MAAMC,QAAQD,OAAOF,KAAK,CAAC;YAC3B,MAAMI,MAAMD,MAAME,KAAK,GAAGC,IAAI;YAC9B,MAAMC,eAAeJ,MAAMK,IAAI,CAAC;YAEhC,IAAI;gBACF,MAAMC,eAAeC,UAAUH;gBAC/BX,KAAKe,GAAG,CAACP,KAAKK;YAChB,EAAE,OAAOG,GAAG;gBACV,MAAM,gXAAInB,WAAAA,CAAS,CAAC,oCAAoC,EAAEW,IAAI,EAAE,EAAEQ,EAAEC,OAAO,EAAE;YAC/E;QACF;IACF;IAEA,OAAOjB;AACT,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3948, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3954, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/removeUndefined.ts"],"sourcesContent":["export function removeUndefined<T extends object>(obj: T): T {\n  return Object.fromEntries(Object.entries(obj).filter(([, value]) => value !== undefined)) as T\n}\n"],"names":["removeUndefined","obj","Object","fromEntries","entries","filter","value","undefined"],"mappings":";;;AAAO,SAASA,gBAAkCC,GAAM;IACtD,OAAOC,OAAOC,WAAW,CAACD,OAAOE,OAAO,CAACH,KAAKI,MAAM,CAAC,CAAC,GAAGC,MAAM,GAAKA,UAAUC;AAChF","ignoreList":[0]}},
    {"offset": {"line": 3960, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3976, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/isEntityHidden.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nexport const isEntityHidden = ({\n  hidden,\n  user,\n}: {\n  hidden: SanitizedCollectionConfig['admin']['hidden'] | SanitizedGlobalConfig['admin']['hidden']\n  user: PayloadRequest['user']\n}) => {\n  return typeof hidden === 'function' ? hidden({ user }) : hidden === true\n}\n"],"names":["isEntityHidden","hidden","user"],"mappings":";;;AAIO,MAAMA,iBAAiB,CAAC,EAC7BC,MAAM,EACNC,IAAI,EAIL;IACC,OAAO,OAAOD,WAAW,aAAaA,OAAO;QAAEC;IAAK,KAAKD,WAAW;AACtE,EAAC","ignoreList":[0]}},
    {"offset": {"line": 3984, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3990, "column": 0}, "map": {"version":3,"sources":["file:///home/eric/Documents/GitHub/astro-payload-mono/payload/node_modules/.pnpm/payload%403.11.0_graphql%4016.10.0_monaco-editor%400.52.2_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_typescript%405.7.2/node_modules/payload/src/utilities/formatErrors.ts"],"sourcesContent":["import type { ErrorResult } from '../config/types.js'\nimport type { APIError } from '../errors/APIError.js'\n\nimport { APIErrorName } from '../errors/APIError.js'\nimport { ValidationErrorName } from '../errors/ValidationError.js'\n\nexport const formatErrors = (incoming: { [key: string]: unknown } | APIError): ErrorResult => {\n  if (incoming) {\n    // Cannot use `instanceof` to check error type: https://github.com/microsoft/TypeScript/issues/13965\n    // Instead, get the prototype of the incoming error and check its constructor name\n    const proto = Object.getPrototypeOf(incoming)\n\n    // Payload 'ValidationError' and 'APIError'\n    if (\n      (proto.constructor.name === ValidationErrorName || proto.constructor.name === APIErrorName) &&\n      incoming.data\n    ) {\n      return {\n        errors: [\n          {\n            name: incoming.name,\n            data: incoming.data,\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n\n    // Mongoose 'ValidationError': https://mongoosejs.com/docs/api/error.html#Error.ValidationError\n    if (proto.constructor.name === ValidationErrorName && 'errors' in incoming && incoming.errors) {\n      return {\n        errors: Object.keys(incoming.errors).reduce((acc, key) => {\n          acc.push({\n            field: incoming.errors[key].path,\n            message: incoming.errors[key].message,\n          })\n          return acc\n        }, []),\n      }\n    }\n\n    if (Array.isArray(incoming.message)) {\n      return {\n        errors: incoming.message,\n      }\n    }\n\n    if (incoming.name) {\n      return {\n        errors: [\n          {\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n  }\n\n  return {\n    errors: [\n      {\n        message: 'An unknown error occurred.',\n      },\n    ],\n  }\n}\n"],"names":["APIErrorName","ValidationErrorName","formatErrors","incoming","proto","Object","getPrototypeOf","constructor","name","data","errors","message","keys","reduce","acc","key","push","field","path","Array","isArray"],"mappings":";;;AAIA,SAASC,mBAAmB,QAAQ,+BAA8B;AADlE,SAASD,YAAY,QAAQ,wBAAuB;;;AAG7C,MAAME,eAAe,CAACC;IAC3B,IAAIA,UAAU;QACZ,oGAAoG;QACpG,kFAAkF;QAClF,MAAMC,QAAQC,OAAOC,cAAc,CAACH;QAEpC,2CAA2C;QAC3C,IACGC,CAAAA,MAAMG,WAAW,CAACC,IAAI,KAAKP,yYAAAA,IAAuBG,MAAMG,WAAW,CAACC,IAAI,iXAAKR,eAAW,KACzFG,SAASM,IAAI,EACb;YACA,OAAO;gBACLC,QAAQ;oBACN;wBACEF,MAAML,SAASK,IAAI;wBACnBC,MAAMN,SAASM,IAAI;wBACnBE,SAASR,SAASQ,OAAO;oBAC3B;iBACD;YACH;QACF;QAEA,+FAA+F;QAC/F,IAAIP,MAAMG,WAAW,CAACC,IAAI,wXAAKP,sBAAAA,IAAuB,YAAYE,YAAYA,SAASO,MAAM,EAAE;YAC7F,OAAO;gBACLA,QAAQL,OAAOO,IAAI,CAACT,SAASO,MAAM,EAAEG,MAAM,CAAC,CAACC,KAAKC;oBAChDD,IAAIE,IAAI,CAAC;wBACPC,OAAOd,SAASO,MAAM,CAACK,IAAI,CAACG,IAAI;wBAChCP,SAASR,SAASO,MAAM,CAACK,IAAI,CAACJ,OAAO;oBACvC;oBACA,OAAOG;gBACT,GAAG,EAAE;YACP;QACF;QAEA,IAAIK,MAAMC,OAAO,CAACjB,SAASQ,OAAO,GAAG;YACnC,OAAO;gBACLD,QAAQP,SAASQ,OAAO;YAC1B;QACF;QAEA,IAAIR,SAASK,IAAI,EAAE;YACjB,OAAO;gBACLE,QAAQ;oBACN;wBACEC,SAASR,SAASQ,OAAO;oBAC3B;iBACD;YACH;QACF;IACF;IAEA,OAAO;QACLD,QAAQ;YACN;gBACEC,SAAS;YACX;SACD;IACH;AACF,EAAC","ignoreList":[0]}},
    {"offset": {"line": 4049, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}